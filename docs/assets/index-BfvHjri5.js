(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function ly(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var om={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function vC(){if(VS)return Al;VS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Al.Fragment=e,Al.jsx=t,Al.jsxs=t,Al}var FS;function SC(){return FS||(FS=1,om.exports=vC()),om.exports}var k=SC(),lm={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function wC(){if(GS)return we;GS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),b=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function _(M,J,Z){this.props=M,this.context=J,this.refs=E,this.updater=Z||S}_.prototype.isReactComponent={},_.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},_.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=_.prototype;function O(M,J,Z){this.props=M,this.context=J,this.refs=E,this.updater=Z||S}var B=O.prototype=new C;B.constructor=O,x(B,_.prototype),B.isPureReactComponent=!0;var j=Array.isArray;function P(){}var U={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function W(M,J,Z){var ie=Z.ref;return{$$typeof:n,type:M,key:J,ref:ie!==void 0?ie:null,props:Z}}function de(M,J){return W(M.type,J,M.props)}function oe(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function ke(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return J[Z]})}var te=/\/+/g;function he(M,J){return typeof M=="object"&&M!==null&&M.key!=null?ke(""+M.key):J.toString(36)}function Te(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(P,P):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function q(M,J,Z,ie,ae){var xe=typeof M;(xe==="undefined"||xe==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(xe){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case n:case e:ze=!0;break;case p:return ze=M._init,q(ze(M._payload),J,Z,ie,ae)}}if(ze)return ae=ae(M),ze=ie===""?"."+he(M,0):ie,j(ae)?(Z="",ze!=null&&(Z=ze.replace(te,"$&/")+"/"),q(ae,J,Z,"",function(Mr){return Mr})):ae!=null&&(oe(ae)&&(ae=de(ae,Z+(ae.key==null||M&&M.key===ae.key?"":(""+ae.key).replace(te,"$&/")+"/")+ze)),J.push(ae)),1;ze=0;var ct=ie===""?".":ie+":";if(j(M))for(var nt=0;nt<M.length;nt++)ie=M[nt],xe=ct+he(ie,nt),ze+=q(ie,J,Z,xe,ae);else if(nt=v(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(ie=M.next()).done;)ie=ie.value,xe=ct+he(ie,nt++),ze+=q(ie,J,Z,xe,ae);else if(xe==="object"){if(typeof M.then=="function")return q(Te(M),J,Z,ie,ae);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ee(M,J,Z){if(M==null)return M;var ie=[],ae=0;return q(M,ie,"","",function(xe){return J.call(Z,xe,ae++)}),ie}function ge(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},He={map:ee,forEach:function(M,J,Z){ee(M,function(){J.apply(this,arguments)},Z)},count:function(M){var J=0;return ee(M,function(){J++}),J},toArray:function(M){return ee(M,function(J){return J})||[]},only:function(M){if(!oe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return we.Activity=g,we.Children=He,we.Component=_,we.Fragment=t,we.Profiler=s,we.PureComponent=O,we.StrictMode=r,we.Suspense=f,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,we.__COMPILER_RUNTIME={__proto__:null,c:function(M){return U.H.useMemoCache(M)}},we.cache=function(M){return function(){return M.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(M,J,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ie=x({},M.props),ae=M.key;if(J!=null)for(xe in J.key!==void 0&&(ae=""+J.key),J)!F.call(J,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&J.ref===void 0||(ie[xe]=J[xe]);var xe=arguments.length-2;if(xe===1)ie.children=Z;else if(1<xe){for(var ze=Array(xe),ct=0;ct<xe;ct++)ze[ct]=arguments[ct+2];ie.children=ze}return W(M.type,ae,ie)},we.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:a,_context:M},M},we.createElement=function(M,J,Z){var ie,ae={},xe=null;if(J!=null)for(ie in J.key!==void 0&&(xe=""+J.key),J)F.call(J,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ae[ie]=J[ie]);var ze=arguments.length-2;if(ze===1)ae.children=Z;else if(1<ze){for(var ct=Array(ze),nt=0;nt<ze;nt++)ct[nt]=arguments[nt+2];ae.children=ct}if(M&&M.defaultProps)for(ie in ze=M.defaultProps,ze)ae[ie]===void 0&&(ae[ie]=ze[ie]);return W(M,xe,ae)},we.createRef=function(){return{current:null}},we.forwardRef=function(M){return{$$typeof:u,render:M}},we.isValidElement=oe,we.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:ge}},we.memo=function(M,J){return{$$typeof:h,type:M,compare:J===void 0?null:J}},we.startTransition=function(M){var J=U.T,Z={};U.T=Z;try{var ie=M(),ae=U.S;ae!==null&&ae(Z,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(P,Pe)}catch(xe){Pe(xe)}finally{J!==null&&Z.types!==null&&(J.types=Z.types),U.T=J}},we.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},we.use=function(M){return U.H.use(M)},we.useActionState=function(M,J,Z){return U.H.useActionState(M,J,Z)},we.useCallback=function(M,J){return U.H.useCallback(M,J)},we.useContext=function(M){return U.H.useContext(M)},we.useDebugValue=function(){},we.useDeferredValue=function(M,J){return U.H.useDeferredValue(M,J)},we.useEffect=function(M,J){return U.H.useEffect(M,J)},we.useEffectEvent=function(M){return U.H.useEffectEvent(M)},we.useId=function(){return U.H.useId()},we.useImperativeHandle=function(M,J,Z){return U.H.useImperativeHandle(M,J,Z)},we.useInsertionEffect=function(M,J){return U.H.useInsertionEffect(M,J)},we.useLayoutEffect=function(M,J){return U.H.useLayoutEffect(M,J)},we.useMemo=function(M,J){return U.H.useMemo(M,J)},we.useOptimistic=function(M,J){return U.H.useOptimistic(M,J)},we.useReducer=function(M,J,Z){return U.H.useReducer(M,J,Z)},we.useRef=function(M){return U.H.useRef(M)},we.useState=function(M){return U.H.useState(M)},we.useSyncExternalStore=function(M,J,Z){return U.H.useSyncExternalStore(M,J,Z)},we.useTransition=function(){return U.H.useTransition()},we.version="19.2.3",we}var KS;function Tc(){return KS||(KS=1,lm.exports=wC()),lm.exports}var D=Tc();const bn=ly(D);var cm={exports:{}},Cl={},um={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS;function xC(){return JS||(JS=1,(function(n){function e(q,ee){var ge=q.length;q.push(ee);e:for(;0<ge;){var Pe=ge-1>>>1,He=q[Pe];if(0<s(He,ee))q[Pe]=ee,q[ge]=He,ge=Pe;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ee=q[0],ge=q.pop();if(ge!==ee){q[0]=ge;e:for(var Pe=0,He=q.length,M=He>>>1;Pe<M;){var J=2*(Pe+1)-1,Z=q[J],ie=J+1,ae=q[ie];if(0>s(Z,ge))ie<He&&0>s(ae,Z)?(q[Pe]=ae,q[ie]=ge,Pe=ie):(q[Pe]=Z,q[J]=ge,Pe=J);else if(ie<He&&0>s(ae,ge))q[Pe]=ae,q[ie]=ge,Pe=ie;else break e}}return ee}function s(q,ee){var ge=q.sortIndex-ee.sortIndex;return ge!==0?ge:q.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],h=[],p=1,g=null,b=3,v=!1,S=!1,x=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function B(q){for(var ee=t(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=q)r(h),ee.sortIndex=ee.expirationTime,e(f,ee);else break;ee=t(h)}}function j(q){if(x=!1,B(q),!S)if(t(f)!==null)S=!0,P||(P=!0,ke());else{var ee=t(h);ee!==null&&Te(j,ee.startTime-q)}}var P=!1,U=-1,F=5,W=-1;function de(){return E?!0:!(n.unstable_now()-W<F)}function oe(){if(E=!1,P){var q=n.unstable_now();W=q;var ee=!0;try{e:{S=!1,x&&(x=!1,C(U),U=-1),v=!0;var ge=b;try{t:{for(B(q),g=t(f);g!==null&&!(g.expirationTime>q&&de());){var Pe=g.callback;if(typeof Pe=="function"){g.callback=null,b=g.priorityLevel;var He=Pe(g.expirationTime<=q);if(q=n.unstable_now(),typeof He=="function"){g.callback=He,B(q),ee=!0;break t}g===t(f)&&r(f),B(q)}else r(f);g=t(f)}if(g!==null)ee=!0;else{var M=t(h);M!==null&&Te(j,M.startTime-q),ee=!1}}break e}finally{g=null,b=ge,v=!1}ee=void 0}}finally{ee?ke():P=!1}}}var ke;if(typeof O=="function")ke=function(){O(oe)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=oe,ke=function(){he.postMessage(null)}}else ke=function(){_(oe,0)};function Te(q,ee){U=_(function(){q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var ee=3;break;default:ee=b}var ge=b;b=ee;try{return q()}finally{b=ge}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(q,ee){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ge=b;b=q;try{return ee()}finally{b=ge}},n.unstable_scheduleCallback=function(q,ee,ge){var Pe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Pe+ge:Pe):ge=Pe,q){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ge+He,q={id:p++,callback:ee,priorityLevel:q,startTime:ge,expirationTime:He,sortIndex:-1},ge>Pe?(q.sortIndex=ge,e(h,q),t(f)===null&&q===t(h)&&(x?(C(U),U=-1):x=!0,Te(j,ge-Pe))):(q.sortIndex=He,e(f,q),S||v||(S=!0,P||(P=!0,ke()))),q},n.unstable_shouldYield=de,n.unstable_wrapCallback=function(q){var ee=b;return function(){var ge=b;b=ee;try{return q.apply(this,arguments)}finally{b=ge}}}})(fm)),fm}var WS;function EC(){return WS||(WS=1,um.exports=xC()),um.exports}var dm={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS;function TC(){if(YS)return Yt;YS=1;var n=Tc();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},Yt.flushSync=function(f){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=p,r.d.f()}},Yt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Yt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Yt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:v}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Yt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Yt.requestFormReset=function(f){r.d.r(f)},Yt.unstable_batchedUpdates=function(f,h){return f(h)},Yt.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Yt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Yt.version="19.2.3",Yt}var XS;function AE(){if(XS)return dm.exports;XS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=TC(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS;function _C(){if(QS)return Cl;QS=1;var n=EC(),e=Tc(),t=AE();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,d=o;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return f(m),i;if(y===d)return f(m),o;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=m,d=y;else{for(var w=!1,T=m.child;T;){if(T===c){w=!0,c=m,d=y;break}if(T===d){w=!0,d=m,c=y;break}T=T.sibling}if(!w){for(T=y.child;T;){if(T===c){w=!0,c=y,d=m;break}if(T===d){w=!0,d=y,c=m;break}T=T.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),O=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function ke(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var te=Symbol.for("react.client.reference");function he(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===te?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case j:return"Suspense";case P:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case O:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case B:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case F:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}var Te=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function M(i){return{current:i}}function J(i){0>He||(i.current=Pe[He],Pe[He]=null,He--)}function Z(i,o){He++,Pe[He]=i.current,i.current=o}var ie=M(null),ae=M(null),xe=M(null),ze=M(null);function ct(i,o){switch(Z(xe,o),Z(ae,i),Z(ie,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?hS(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=hS(o),i=pS(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(ie),Z(ie,i)}function nt(){J(ie),J(ae),J(xe)}function Mr(i){i.memoizedState!==null&&Z(ze,i);var o=ie.current,c=pS(o,i.type);o!==c&&(Z(ae,i),Z(ie,c))}function ps(i){ae.current===i&&(J(ie),J(ae)),ze.current===i&&(J(ze),El._currentValue=ge)}var la,Rr;function Ln(i){if(la===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);la=o&&o[1]||"",Rr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+la+i+Rr}var nr=!1;function ms(i,o){if(!i||nr)return"";nr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch($){var H=$}Reflect.construct(i,[],K)}else{try{K.call()}catch($){H=$}i.call(K.prototype)}}else{try{throw Error()}catch($){H=$}(K=i())&&typeof K.catch=="function"&&K.catch(function(){})}}catch($){if($&&H&&typeof $.stack=="string")return[$.stack,H.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),w=y[0],T=y[1];if(w&&T){var A=w.split(`
`),I=T.split(`
`);for(m=d=0;d<A.length&&!A[d].includes("DetermineComponentFrameRoot");)d++;for(;m<I.length&&!I[m].includes("DetermineComponentFrameRoot");)m++;if(d===A.length||m===I.length)for(d=A.length-1,m=I.length-1;1<=d&&0<=m&&A[d]!==I[m];)m--;for(;1<=d&&0<=m;d--,m--)if(A[d]!==I[m]){if(d!==1||m!==1)do if(d--,m--,0>m||A[d]!==I[m]){var V=`
`+A[d].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=d&&0<=m);break}}}finally{nr=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Ln(c):""}function Ao(i,o){switch(i.tag){case 26:case 27:case 5:return Ln(i.type);case 16:return Ln("Lazy");case 13:return i.child!==o&&o!==null?Ln("Suspense Fallback"):Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return ms(i.type,!1);case 11:return ms(i.type.render,!1);case 1:return ms(i.type,!0);case 31:return Ln("Activity");default:return""}}function Nr(i){try{var o="",c=null;do o+=Ao(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var mi=Object.prototype.hasOwnProperty,gi=n.unstable_scheduleCallback,ca=n.unstable_cancelCallback,Dc=n.unstable_shouldYield,Qd=n.unstable_requestPaint,Bt=n.unstable_now,gs=n.unstable_getCurrentPriorityLevel,Dr=n.unstable_ImmediatePriority,Sn=n.unstable_UserBlockingPriority,yi=n.unstable_NormalPriority,Lc=n.unstable_LowPriority,Co=n.unstable_IdlePriority,Oo=n.log,jc=n.unstable_setDisableYieldValue,mr=null,Nt=null;function Dt(i){if(typeof Oo=="function"&&jc(i),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(mr,i)}catch{}}var vt=Math.clz32?Math.clz32:Zd,Mo=Math.log,Ro=Math.LN2;function Zd(i){return i>>>=0,i===0?32:31-(Mo(i)/Ro|0)|0}var Lr=256,jr=262144,ua=4194304;function wn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fa(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var T=d&134217727;return T!==0?(d=T&~y,d!==0?m=wn(d):(w&=T,w!==0?m=wn(w):c||(c=T&~i,c!==0&&(m=wn(c))))):(T=d&~y,T!==0?m=wn(T):w!==0?m=wn(w):c||(c=d&~i,c!==0&&(m=wn(c)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:m}function ys(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function mt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(){var i=ua;return ua<<=1,(ua&62914560)===0&&(ua=4194304),i}function No(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function bi(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Do(i,o,c,d,m,y){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var T=i.entanglements,A=i.expirationTimes,I=i.hiddenUpdates;for(c=w&~c;0<c;){var V=31-vt(c),K=1<<V;T[V]=0,A[V]=-1;var H=I[V];if(H!==null)for(I[V]=null,V=0;V<H.length;V++){var $=H[V];$!==null&&($.lane&=-536870913)}c&=~K}d!==0&&Lo(i,d,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~o))}function Lo(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-vt(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function jo(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-vt(c),m=1<<d;m&o|i[d]&o&&(i[d]|=o),c&=~m}}function zc(i,o){var c=o&-o;return c=(c&42)!==0?1:cn(c),(c&(i.suspendedLanes|o))!==0?0:c}function cn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function rr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function zo(){var i=ee.p;return i!==0?i:(i=window.event,i===void 0?32:IS(i.type))}function Io(i,o){var c=ee.p;try{return ee.p=i,o()}finally{ee.p=c}}var jn=Math.random().toString(36).slice(2),St="__reactFiber$"+jn,rt="__reactProps$"+jn,Ir="__reactContainer$"+jn,da="__reactEvents$"+jn,Ic="__reactListeners$"+jn,Bc="__reactHandles$"+jn,Uc="__reactResources$"+jn,le="__reactMarker$"+jn;function R(i){delete i[St],delete i[rt],delete i[da],delete i[Ic],delete i[Bc]}function X(i){var o=i[St];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Ir]||c[St]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=wS(i);i!==null;){if(c=i[St])return c;i=wS(i)}return o}i=c,c=i.parentNode}return null}function re(i){if(i=i[St]||i[Ir]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function $e(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function st(i){var o=i[Uc];return o||(o=i[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Oe(i){i[le]=!0}var Ut=new Set,zn={};function un(i,o){gr(i,o),gr(i+"Capture",o)}function gr(i,o){for(zn[i]=o,i=0;i<o.length;i++)Ut.add(o[i])}var Ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bo={},Uo={};function fk(i){return mi.call(Uo,i)?!0:mi.call(Bo,i)?!1:Ct.test(i)?Uo[i]=!0:(Bo[i]=!0,!1)}function Pc(i,o,c){if(fk(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Hc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Br(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function sb(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function dk(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,y=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function eh(i){if(!i._valueTracker){var o=sb(i)?"checked":"value";i._valueTracker=dk(i,o,""+i[o])}}function ab(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=sb(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function $c(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var hk=/[\n"\\]/g;function Bn(i){return i.replace(hk,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function th(i,o,c,d,m,y,w,T){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),o!=null?w==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+In(o)):i.value!==""+In(o)&&(i.value=""+In(o)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),o!=null?nh(i,w,In(o)):c!=null?nh(i,w,In(c)):d!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+In(T):i.removeAttribute("name")}function ob(i,o,c,d,m,y,w,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){eh(i);return}c=c!=null?""+In(c):"",o=o!=null?""+In(o):c,T||o===i.value||(i.value=o),i.defaultValue=o}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=T?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),eh(i)}function nh(i,o,c){o==="number"&&$c(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function ha(i,o,c,d){if(i=i.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=o.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&d&&(i[c].defaultSelected=!0)}else{for(c=""+In(c),o=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function lb(i,o,c){if(o!=null&&(o=""+In(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+In(c):""}function cb(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(Te(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=In(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),eh(i)}function pa(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var pk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ub(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||pk.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function fb(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var m in o)d=o[m],o.hasOwnProperty(m)&&c[m]!==d&&ub(i,m,d)}else for(var y in o)o.hasOwnProperty(y)&&ub(i,y,o[y])}function rh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qc(i){return gk.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ur(){}var ih=null;function sh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ma=null,ga=null;function db(i){var o=re(i);if(o&&(i=o.stateNode)){var c=i[rt]||null;e:switch(i=o.stateNode,o.type){case"input":if(th(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Bn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var m=d[rt]||null;if(!m)throw Error(r(90));th(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&ab(d)}break e;case"textarea":lb(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ha(i,!!c.multiple,o,!1)}}}var ah=!1;function hb(i,o,c){if(ah)return i(o,c);ah=!0;try{var d=i(o);return d}finally{if(ah=!1,(ma!==null||ga!==null)&&(Mu(),ma&&(o=ma,i=ga,ga=ma=null,db(o),i)))for(o=0;o<i.length;o++)db(i[o])}}function Po(i,o){var c=i.stateNode;if(c===null)return null;var d=c[rt]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(Pr)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){oh=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{oh=!1}var vi=null,lh=null,Vc=null;function pb(){if(Vc)return Vc;var i,o=lh,c=o.length,d,m="value"in vi?vi.value:vi.textContent,y=m.length;for(i=0;i<c&&o[i]===m[i];i++);var w=c-i;for(d=1;d<=w&&o[c-d]===m[y-d];d++);return Vc=m.slice(i,1<d?1-d:void 0)}function Fc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Gc(){return!0}function mb(){return!1}function fn(i){function o(c,d,m,y,w){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(c=i[T],this[T]=c?c(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Gc:mb,this.isPropagationStopped=mb,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),o}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=fn(bs),$o=g({},bs,{view:0,detail:0}),yk=fn($o),ch,uh,qo,Jc=g({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qo&&(qo&&i.type==="mousemove"?(ch=i.screenX-qo.screenX,uh=i.screenY-qo.screenY):uh=ch=0,qo=i),ch)},movementY:function(i){return"movementY"in i?i.movementY:uh}}),gb=fn(Jc),bk=g({},Jc,{dataTransfer:0}),vk=fn(bk),Sk=g({},$o,{relatedTarget:0}),fh=fn(Sk),wk=g({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),xk=fn(wk),Ek=g({},bs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Tk=fn(Ek),_k=g({},bs,{data:0}),yb=fn(_k),kk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ck={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ok(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ck[i])?!!o[i]:!1}function dh(){return Ok}var Mk=g({},$o,{key:function(i){if(i.key){var o=kk[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Fc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ak[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dh,charCode:function(i){return i.type==="keypress"?Fc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rk=fn(Mk),Nk=g({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bb=fn(Nk),Dk=g({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dh}),Lk=fn(Dk),jk=g({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),zk=fn(jk),Ik=g({},Jc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Bk=fn(Ik),Uk=g({},bs,{newState:0,oldState:0}),Pk=fn(Uk),Hk=[9,13,27,32],hh=Pr&&"CompositionEvent"in window,Vo=null;Pr&&"documentMode"in document&&(Vo=document.documentMode);var $k=Pr&&"TextEvent"in window&&!Vo,vb=Pr&&(!hh||Vo&&8<Vo&&11>=Vo),Sb=" ",wb=!1;function xb(i,o){switch(i){case"keyup":return Hk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ya=!1;function qk(i,o){switch(i){case"compositionend":return Eb(o);case"keypress":return o.which!==32?null:(wb=!0,Sb);case"textInput":return i=o.data,i===Sb&&wb?null:i;default:return null}}function Vk(i,o){if(ya)return i==="compositionend"||!hh&&xb(i,o)?(i=pb(),Vc=lh=vi=null,ya=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vb&&o.locale!=="ko"?null:o.data;default:return null}}var Fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Fk[i.type]:o==="textarea"}function _b(i,o,c,d){ma?ga?ga.push(d):ga=[d]:ma=d,o=Iu(o,"onChange"),0<o.length&&(c=new Kc("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var Fo=null,Go=null;function Gk(i){oS(i,0)}function Wc(i){var o=$e(i);if(ab(o))return i}function kb(i,o){if(i==="change")return o}var Ab=!1;if(Pr){var ph;if(Pr){var mh="oninput"in document;if(!mh){var Cb=document.createElement("div");Cb.setAttribute("oninput","return;"),mh=typeof Cb.oninput=="function"}ph=mh}else ph=!1;Ab=ph&&(!document.documentMode||9<document.documentMode)}function Ob(){Fo&&(Fo.detachEvent("onpropertychange",Mb),Go=Fo=null)}function Mb(i){if(i.propertyName==="value"&&Wc(Go)){var o=[];_b(o,Go,i,sh(i)),hb(Gk,o)}}function Kk(i,o,c){i==="focusin"?(Ob(),Fo=o,Go=c,Fo.attachEvent("onpropertychange",Mb)):i==="focusout"&&Ob()}function Jk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wc(Go)}function Wk(i,o){if(i==="click")return Wc(o)}function Yk(i,o){if(i==="input"||i==="change")return Wc(o)}function Xk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var xn=typeof Object.is=="function"?Object.is:Xk;function Ko(i,o){if(xn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!mi.call(o,m)||!xn(i[m],o[m]))return!1}return!0}function Rb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nb(i,o){var c=Rb(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Rb(c)}}function Db(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Db(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Lb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=$c(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=$c(i.document)}return o}function gh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Qk=Pr&&"documentMode"in document&&11>=document.documentMode,ba=null,yh=null,Jo=null,bh=!1;function jb(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;bh||ba==null||ba!==$c(d)||(d=ba,"selectionStart"in d&&gh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Jo&&Ko(Jo,d)||(Jo=d,d=Iu(yh,"onSelect"),0<d.length&&(o=new Kc("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=ba)))}function vs(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var va={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},vh={},zb={};Pr&&(zb=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Ss(i){if(vh[i])return vh[i];if(!va[i])return i;var o=va[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in zb)return vh[i]=o[c];return i}var Ib=Ss("animationend"),Bb=Ss("animationiteration"),Ub=Ss("animationstart"),Zk=Ss("transitionrun"),eA=Ss("transitionstart"),tA=Ss("transitioncancel"),Pb=Ss("transitionend"),Hb=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function ir(i,o){Hb.set(i,o),un(o,[i])}var Yc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Un=[],Sa=0,wh=0;function Xc(){for(var i=Sa,o=wh=Sa=0;o<i;){var c=Un[o];Un[o++]=null;var d=Un[o];Un[o++]=null;var m=Un[o];Un[o++]=null;var y=Un[o];if(Un[o++]=null,d!==null&&m!==null){var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}y!==0&&$b(c,m,y)}}function Qc(i,o,c,d){Un[Sa++]=i,Un[Sa++]=o,Un[Sa++]=c,Un[Sa++]=d,wh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function xh(i,o,c,d){return Qc(i,o,c,d),Zc(i)}function ws(i,o){return Qc(i,null,null,o),Zc(i)}function $b(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var m=!1,y=i.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&o!==null&&(m=31-vt(c),i=y.hiddenUpdates,d=i[m],d===null?i[m]=[o]:d.push(o),o.lane=c|536870912),y):null}function Zc(i){if(50<gl)throw gl=0,Rp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var wa={};function nA(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,o,c,d){return new nA(i,o,c,d)}function Eh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Hr(i,o){var c=i.alternate;return c===null?(c=En(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function qb(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function eu(i,o,c,d,m,y){var w=0;if(d=i,typeof i=="function")Eh(i)&&(w=1);else if(typeof i=="string")w=oC(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case W:return i=En(31,c,o,m),i.elementType=W,i.lanes=y,i;case x:return xs(c.children,m,y,o);case E:w=8,m|=24;break;case _:return i=En(12,c,o,m|2),i.elementType=_,i.lanes=y,i;case j:return i=En(13,c,o,m),i.elementType=j,i.lanes=y,i;case P:return i=En(19,c,o,m),i.elementType=P,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:w=10;break e;case C:w=9;break e;case B:w=11;break e;case U:w=14;break e;case F:w=16,d=null;break e}w=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return o=En(w,c,o,m),o.elementType=i,o.type=d,o.lanes=y,o}function xs(i,o,c,d){return i=En(7,i,d,o),i.lanes=c,i}function Th(i,o,c){return i=En(6,i,null,o),i.lanes=c,i}function Vb(i){var o=En(18,null,null,0);return o.stateNode=i,o}function _h(i,o,c){return o=En(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Fb=new WeakMap;function Pn(i,o){if(typeof i=="object"&&i!==null){var c=Fb.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Nr(o)},Fb.set(i,o),o)}return{value:i,source:o,stack:Nr(o)}}var xa=[],Ea=0,tu=null,Wo=0,Hn=[],$n=0,Si=null,yr=1,br="";function $r(i,o){xa[Ea++]=Wo,xa[Ea++]=tu,tu=i,Wo=o}function Gb(i,o,c){Hn[$n++]=yr,Hn[$n++]=br,Hn[$n++]=Si,Si=i;var d=yr;i=br;var m=32-vt(d)-1;d&=~(1<<m),c+=1;var y=32-vt(o)+m;if(30<y){var w=m-m%5;y=(d&(1<<w)-1).toString(32),d>>=w,m-=w,yr=1<<32-vt(o)+m|c<<m|d,br=y+i}else yr=1<<y|c<<m|d,br=i}function kh(i){i.return!==null&&($r(i,1),Gb(i,1,0))}function Ah(i){for(;i===tu;)tu=xa[--Ea],xa[Ea]=null,Wo=xa[--Ea],xa[Ea]=null;for(;i===Si;)Si=Hn[--$n],Hn[$n]=null,br=Hn[--$n],Hn[$n]=null,yr=Hn[--$n],Hn[$n]=null}function Kb(i,o){Hn[$n++]=yr,Hn[$n++]=br,Hn[$n++]=Si,yr=o.id,br=o.overflow,Si=i}var Pt=null,Ze=null,je=!1,wi=null,qn=!1,Ch=Error(r(519));function xi(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yo(Pn(o,i)),Ch}function Jb(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[St]=i,o[rt]=d,c){case"dialog":Ne("cancel",o),Ne("close",o);break;case"iframe":case"object":case"embed":Ne("load",o);break;case"video":case"audio":for(c=0;c<bl.length;c++)Ne(bl[c],o);break;case"source":Ne("error",o);break;case"img":case"image":case"link":Ne("error",o),Ne("load",o);break;case"details":Ne("toggle",o);break;case"input":Ne("invalid",o),ob(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ne("invalid",o);break;case"textarea":Ne("invalid",o),cb(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||fS(o.textContent,c)?(d.popover!=null&&(Ne("beforetoggle",o),Ne("toggle",o)),d.onScroll!=null&&Ne("scroll",o),d.onScrollEnd!=null&&Ne("scrollend",o),d.onClick!=null&&(o.onclick=Ur),o=!0):o=!1,o||xi(i,!0)}function Wb(i){for(Pt=i.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Pt=Pt.return}}function Ta(i){if(i!==Pt)return!1;if(!je)return Wb(i),je=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Gp(i.type,i.memoizedProps)),c=!c),c&&Ze&&xi(i),Wb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ze=SS(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ze=SS(i)}else o===27?(o=Ze,zi(i.type)?(i=Xp,Xp=null,Ze=i):Ze=o):Ze=Pt?Fn(i.stateNode.nextSibling):null;return!0}function Es(){Ze=Pt=null,je=!1}function Oh(){var i=wi;return i!==null&&(mn===null?mn=i:mn.push.apply(mn,i),wi=null),i}function Yo(i){wi===null?wi=[i]:wi.push(i)}var Mh=M(null),Ts=null,qr=null;function Ei(i,o,c){Z(Mh,o._currentValue),o._currentValue=c}function Vr(i){i._currentValue=Mh.current,J(Mh)}function Rh(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function Nh(i,o,c,d){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var w=m.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=m;for(var A=0;A<o.length;A++)if(T.context===o[A]){y.lanes|=c,T=y.alternate,T!==null&&(T.lanes|=c),Rh(y.return,c,i),d||(w=null);break e}y=T.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=c,y=w.alternate,y!==null&&(y.lanes|=c),Rh(w,c,i),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function _a(i,o,c,d){i=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var T=m.type;xn(m.pendingProps.value,w.value)||(i!==null?i.push(T):i=[T])}}else if(m===ze.current){if(w=m.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(El):i=[El])}m=m.return}i!==null&&Nh(o,i,c,d),o.flags|=262144}function nu(i){for(i=i.firstContext;i!==null;){if(!xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function _s(i){Ts=i,qr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ht(i){return Yb(Ts,i)}function ru(i,o){return Ts===null&&_s(i),Yb(i,o)}function Yb(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},qr===null){if(i===null)throw Error(r(308));qr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else qr=qr.next=o;return c}var rA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},iA=n.unstable_scheduleCallback,sA=n.unstable_NormalPriority,wt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dh(){return{controller:new rA,data:new Map,refCount:0}}function Xo(i){i.refCount--,i.refCount===0&&iA(sA,function(){i.controller.abort()})}var Qo=null,Lh=0,ka=0,Aa=null;function aA(i,o){if(Qo===null){var c=Qo=[];Lh=0,ka=Ip(),Aa={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Lh++,o.then(Xb,Xb),o}function Xb(){if(--Lh===0&&Qo!==null){Aa!==null&&(Aa.status="fulfilled");var i=Qo;Qo=null,ka=0,Aa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function oA(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var m=0;m<c.length;m++)(0,c[m])(o)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var Qb=q.S;q.S=function(i,o){jv=Bt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aA(i,o),Qb!==null&&Qb(i,o)};var ks=M(null);function jh(){var i=ks.current;return i!==null?i:Ye.pooledCache}function iu(i,o){o===null?Z(ks,ks.current):Z(ks,o.pool)}function Zb(){var i=jh();return i===null?null:{parent:wt._currentValue,pool:i}}var Ca=Error(r(460)),zh=Error(r(474)),su=Error(r(542)),au={then:function(){}};function e0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function t0(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Ur,Ur),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,r0(i),i;default:if(typeof o.status=="string")o.then(Ur,Ur);else{if(i=Ye,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=d}},function(d){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,r0(i),i}throw Cs=o,Ca}}function As(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Cs=c,Ca):c}}var Cs=null;function n0(){if(Cs===null)throw Error(r(459));var i=Cs;return Cs=null,i}function r0(i){if(i===Ca||i===su)throw Error(r(483))}var Oa=null,Zo=0;function ou(i){var o=Zo;return Zo+=1,Oa===null&&(Oa=[]),t0(Oa,i,o)}function el(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function lu(i,o){throw o.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function i0(i){function o(L,N){if(i){var z=L.deletions;z===null?(L.deletions=[N],L.flags|=16):z.push(N)}}function c(L,N){if(!i)return null;for(;N!==null;)o(L,N),N=N.sibling;return null}function d(L){for(var N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function m(L,N){return L=Hr(L,N),L.index=0,L.sibling=null,L}function y(L,N,z){return L.index=z,i?(z=L.alternate,z!==null?(z=z.index,z<N?(L.flags|=67108866,N):z):(L.flags|=67108866,N)):(L.flags|=1048576,N)}function w(L){return i&&L.alternate===null&&(L.flags|=67108866),L}function T(L,N,z,G){return N===null||N.tag!==6?(N=Th(z,L.mode,G),N.return=L,N):(N=m(N,z),N.return=L,N)}function A(L,N,z,G){var pe=z.type;return pe===x?V(L,N,z.props.children,G,z.key):N!==null&&(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===F&&As(pe)===N.type)?(N=m(N,z.props),el(N,z),N.return=L,N):(N=eu(z.type,z.key,z.props,null,L.mode,G),el(N,z),N.return=L,N)}function I(L,N,z,G){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=_h(z,L.mode,G),N.return=L,N):(N=m(N,z.children||[]),N.return=L,N)}function V(L,N,z,G,pe){return N===null||N.tag!==7?(N=xs(z,L.mode,G,pe),N.return=L,N):(N=m(N,z),N.return=L,N)}function K(L,N,z){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Th(""+N,L.mode,z),N.return=L,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case v:return z=eu(N.type,N.key,N.props,null,L.mode,z),el(z,N),z.return=L,z;case S:return N=_h(N,L.mode,z),N.return=L,N;case F:return N=As(N),K(L,N,z)}if(Te(N)||ke(N))return N=xs(N,L.mode,z,null),N.return=L,N;if(typeof N.then=="function")return K(L,ou(N),z);if(N.$$typeof===O)return K(L,ru(L,N),z);lu(L,N)}return null}function H(L,N,z,G){var pe=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:T(L,N,""+z,G);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return z.key===pe?A(L,N,z,G):null;case S:return z.key===pe?I(L,N,z,G):null;case F:return z=As(z),H(L,N,z,G)}if(Te(z)||ke(z))return pe!==null?null:V(L,N,z,G,null);if(typeof z.then=="function")return H(L,N,ou(z),G);if(z.$$typeof===O)return H(L,N,ru(L,z),G);lu(L,z)}return null}function $(L,N,z,G,pe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return L=L.get(z)||null,T(N,L,""+G,pe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return L=L.get(G.key===null?z:G.key)||null,A(N,L,G,pe);case S:return L=L.get(G.key===null?z:G.key)||null,I(N,L,G,pe);case F:return G=As(G),$(L,N,z,G,pe)}if(Te(G)||ke(G))return L=L.get(z)||null,V(N,L,G,pe,null);if(typeof G.then=="function")return $(L,N,z,ou(G),pe);if(G.$$typeof===O)return $(L,N,z,ru(N,G),pe);lu(N,G)}return null}function se(L,N,z,G){for(var pe=null,Ie=null,ce=N,_e=N=0,Le=null;ce!==null&&_e<z.length;_e++){ce.index>_e?(Le=ce,ce=null):Le=ce.sibling;var Be=H(L,ce,z[_e],G);if(Be===null){ce===null&&(ce=Le);break}i&&ce&&Be.alternate===null&&o(L,ce),N=y(Be,N,_e),Ie===null?pe=Be:Ie.sibling=Be,Ie=Be,ce=Le}if(_e===z.length)return c(L,ce),je&&$r(L,_e),pe;if(ce===null){for(;_e<z.length;_e++)ce=K(L,z[_e],G),ce!==null&&(N=y(ce,N,_e),Ie===null?pe=ce:Ie.sibling=ce,Ie=ce);return je&&$r(L,_e),pe}for(ce=d(ce);_e<z.length;_e++)Le=$(ce,L,_e,z[_e],G),Le!==null&&(i&&Le.alternate!==null&&ce.delete(Le.key===null?_e:Le.key),N=y(Le,N,_e),Ie===null?pe=Le:Ie.sibling=Le,Ie=Le);return i&&ce.forEach(function(Hi){return o(L,Hi)}),je&&$r(L,_e),pe}function ye(L,N,z,G){if(z==null)throw Error(r(151));for(var pe=null,Ie=null,ce=N,_e=N=0,Le=null,Be=z.next();ce!==null&&!Be.done;_e++,Be=z.next()){ce.index>_e?(Le=ce,ce=null):Le=ce.sibling;var Hi=H(L,ce,Be.value,G);if(Hi===null){ce===null&&(ce=Le);break}i&&ce&&Hi.alternate===null&&o(L,ce),N=y(Hi,N,_e),Ie===null?pe=Hi:Ie.sibling=Hi,Ie=Hi,ce=Le}if(Be.done)return c(L,ce),je&&$r(L,_e),pe;if(ce===null){for(;!Be.done;_e++,Be=z.next())Be=K(L,Be.value,G),Be!==null&&(N=y(Be,N,_e),Ie===null?pe=Be:Ie.sibling=Be,Ie=Be);return je&&$r(L,_e),pe}for(ce=d(ce);!Be.done;_e++,Be=z.next())Be=$(ce,L,_e,Be.value,G),Be!==null&&(i&&Be.alternate!==null&&ce.delete(Be.key===null?_e:Be.key),N=y(Be,N,_e),Ie===null?pe=Be:Ie.sibling=Be,Ie=Be);return i&&ce.forEach(function(bC){return o(L,bC)}),je&&$r(L,_e),pe}function Je(L,N,z,G){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case v:e:{for(var pe=z.key;N!==null;){if(N.key===pe){if(pe=z.type,pe===x){if(N.tag===7){c(L,N.sibling),G=m(N,z.props.children),G.return=L,L=G;break e}}else if(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===F&&As(pe)===N.type){c(L,N.sibling),G=m(N,z.props),el(G,z),G.return=L,L=G;break e}c(L,N);break}else o(L,N);N=N.sibling}z.type===x?(G=xs(z.props.children,L.mode,G,z.key),G.return=L,L=G):(G=eu(z.type,z.key,z.props,null,L.mode,G),el(G,z),G.return=L,L=G)}return w(L);case S:e:{for(pe=z.key;N!==null;){if(N.key===pe)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){c(L,N.sibling),G=m(N,z.children||[]),G.return=L,L=G;break e}else{c(L,N);break}else o(L,N);N=N.sibling}G=_h(z,L.mode,G),G.return=L,L=G}return w(L);case F:return z=As(z),Je(L,N,z,G)}if(Te(z))return se(L,N,z,G);if(ke(z)){if(pe=ke(z),typeof pe!="function")throw Error(r(150));return z=pe.call(z),ye(L,N,z,G)}if(typeof z.then=="function")return Je(L,N,ou(z),G);if(z.$$typeof===O)return Je(L,N,ru(L,z),G);lu(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,N!==null&&N.tag===6?(c(L,N.sibling),G=m(N,z),G.return=L,L=G):(c(L,N),G=Th(z,L.mode,G),G.return=L,L=G),w(L)):c(L,N)}return function(L,N,z,G){try{Zo=0;var pe=Je(L,N,z,G);return Oa=null,pe}catch(ce){if(ce===Ca||ce===su)throw ce;var Ie=En(29,ce,null,L.mode);return Ie.lanes=G,Ie.return=L,Ie}finally{}}}var Os=i0(!0),s0=i0(!1),Ti=!1;function Ih(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function _i(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ki(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ue&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,o=Zc(i),$b(i,null,c),o}return Qc(i,d,o,c),Zc(i)}function tl(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,jo(i,c)}}function Uh(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?m=y=o:y=y.next=o}else m=y=o;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Ph=!1;function nl(){if(Ph){var i=Aa;if(i!==null)throw i}}function rl(i,o,c,d){Ph=!1;var m=i.updateQueue;Ti=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var A=T,I=A.next;A.next=null,w===null?y=I:w.next=I,w=A;var V=i.alternate;V!==null&&(V=V.updateQueue,T=V.lastBaseUpdate,T!==w&&(T===null?V.firstBaseUpdate=I:T.next=I,V.lastBaseUpdate=A))}if(y!==null){var K=m.baseState;w=0,V=I=A=null,T=y;do{var H=T.lane&-536870913,$=H!==T.lane;if($?(De&H)===H:(d&H)===H){H!==0&&H===ka&&(Ph=!0),V!==null&&(V=V.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var se=i,ye=T;H=o;var Je=c;switch(ye.tag){case 1:if(se=ye.payload,typeof se=="function"){K=se.call(Je,K,H);break e}K=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ye.payload,H=typeof se=="function"?se.call(Je,K,H):se,H==null)break e;K=g({},K,H);break e;case 2:Ti=!0}}H=T.callback,H!==null&&(i.flags|=64,$&&(i.flags|=8192),$=m.callbacks,$===null?m.callbacks=[H]:$.push(H))}else $={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},V===null?(I=V=$,A=K):V=V.next=$,w|=H;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;$=T,T=$.next,$.next=null,m.lastBaseUpdate=$,m.shared.pending=null}}while(!0);V===null&&(A=K),m.baseState=A,m.firstBaseUpdate=I,m.lastBaseUpdate=V,y===null&&(m.shared.lanes=0),Ri|=w,i.lanes=w,i.memoizedState=K}}function a0(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function o0(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)a0(c[i],o)}var Ma=M(null),cu=M(0);function l0(i,o){i=Zr,Z(cu,i),Z(Ma,o),Zr=i|o.baseLanes}function Hh(){Z(cu,Zr),Z(Ma,Ma.current)}function $h(){Zr=cu.current,J(Ma),J(cu)}var Tn=M(null),Vn=null;function Ai(i){var o=i.alternate;Z(gt,gt.current&1),Z(Tn,i),Vn===null&&(o===null||Ma.current!==null||o.memoizedState!==null)&&(Vn=i)}function qh(i){Z(gt,gt.current),Z(Tn,i),Vn===null&&(Vn=i)}function c0(i){i.tag===22?(Z(gt,gt.current),Z(Tn,i),Vn===null&&(Vn=i)):Ci()}function Ci(){Z(gt,gt.current),Z(Tn,Tn.current)}function _n(i){J(Tn),Vn===i&&(Vn=null),J(gt)}var gt=M(0);function uu(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Wp(c)||Yp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fr=0,Ee=null,Ge=null,xt=null,fu=!1,Ra=!1,Ms=!1,du=0,il=0,Na=null,lA=0;function ut(){throw Error(r(321))}function Vh(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!xn(i[c],o[c]))return!1;return!0}function Fh(i,o,c,d,m,y){return Fr=y,Ee=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=i===null||i.memoizedState===null?G0:ap,Ms=!1,y=c(d,m),Ms=!1,Ra&&(y=f0(o,c,d,m)),u0(i),y}function u0(i){q.H=ol;var o=Ge!==null&&Ge.next!==null;if(Fr=0,xt=Ge=Ee=null,fu=!1,il=0,Na=null,o)throw Error(r(300));i===null||Et||(i=i.dependencies,i!==null&&nu(i)&&(Et=!0))}function f0(i,o,c,d){Ee=i;var m=0;do{if(Ra&&(Na=null),il=0,Ra=!1,25<=m)throw Error(r(301));if(m+=1,xt=Ge=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=K0,y=o(c,d)}while(Ra);return y}function cA(){var i=q.H,o=i.useState()[0];return o=typeof o.then=="function"?sl(o):o,i=i.useState()[0],(Ge!==null?Ge.memoizedState:null)!==i&&(Ee.flags|=1024),o}function Gh(){var i=du!==0;return du=0,i}function Kh(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Jh(i){if(fu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}fu=!1}Fr=0,xt=Ge=Ee=null,Ra=!1,il=du=0,Na=null}function tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ee.memoizedState=xt=i:xt=xt.next=i,xt}function yt(){if(Ge===null){var i=Ee.alternate;i=i!==null?i.memoizedState:null}else i=Ge.next;var o=xt===null?Ee.memoizedState:xt.next;if(o!==null)xt=o,Ge=i;else{if(i===null)throw Ee.alternate===null?Error(r(467)):Error(r(310));Ge=i,i={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},xt===null?Ee.memoizedState=xt=i:xt=xt.next=i}return xt}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(i){var o=il;return il+=1,Na===null&&(Na=[]),i=t0(Na,i,o),o=Ee,(xt===null?o.memoizedState:xt.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?G0:ap),i}function pu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return sl(i);if(i.$$typeof===O)return Ht(i)}throw Error(r(438,String(i)))}function Wh(i){var o=null,c=Ee.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Ee.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=hu(),Ee.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=de;return o.index++,c}function Gr(i,o){return typeof o=="function"?o(i):o}function mu(i){var o=yt();return Yh(o,Ge,i)}function Yh(i,o,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var m=i.baseQueue,y=d.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}o.baseQueue=m=y,d.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{o=m.next;var T=w=null,A=null,I=o,V=!1;do{var K=I.lane&-536870913;if(K!==I.lane?(De&K)===K:(Fr&K)===K){var H=I.revertLane;if(H===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),K===ka&&(V=!0);else if((Fr&H)===H){I=I.next,H===ka&&(V=!0);continue}else K={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(T=A=K,w=y):A=A.next=K,Ee.lanes|=H,Ri|=H;K=I.action,Ms&&c(y,K),y=I.hasEagerState?I.eagerState:c(y,K)}else H={lane:K,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(T=A=H,w=y):A=A.next=H,Ee.lanes|=K,Ri|=K;I=I.next}while(I!==null&&I!==o);if(A===null?w=y:A.next=T,!xn(y,i.memoizedState)&&(Et=!0,V&&(c=Aa,c!==null)))throw c;i.memoizedState=y,i.baseState=w,i.baseQueue=A,d.lastRenderedState=y}return m===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Xh(i){var o=yt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,m=c.pending,y=o.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do y=i(y,w.action),w=w.next;while(w!==m);xn(y,o.memoizedState)||(Et=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,d]}function d0(i,o,c){var d=Ee,m=yt(),y=je;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!xn((Ge||m).memoizedState,c);if(w&&(m.memoizedState=c,Et=!0),m=m.queue,ep(m0.bind(null,d,m,i),[i]),m.getSnapshot!==o||w||xt!==null&&xt.memoizedState.tag&1){if(d.flags|=2048,Da(9,{destroy:void 0},p0.bind(null,d,m,c,o),null),Ye===null)throw Error(r(349));y||(Fr&127)!==0||h0(d,o,c)}return c}function h0(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Ee.updateQueue,o===null?(o=hu(),Ee.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function p0(i,o,c,d){o.value=c,o.getSnapshot=d,g0(o)&&y0(i)}function m0(i,o,c){return c(function(){g0(o)&&y0(i)})}function g0(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!xn(i,c)}catch{return!0}}function y0(i){var o=ws(i,2);o!==null&&gn(o,i,2)}function Qh(i){var o=tn();if(typeof i=="function"){var c=i;if(i=c(),Ms){Dt(!0);try{c()}finally{Dt(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:i},o}function b0(i,o,c,d){return i.baseState=c,Yh(i,Ge,typeof d=="function"?d:Gr)}function uA(i,o,c,d,m){if(bu(i))throw Error(r(485));if(i=o.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};q.T!==null?c(!0):y.isTransition=!1,d(y),c=o.pending,c===null?(y.next=o.pending=y,v0(o,y)):(y.next=c.next,o.pending=c.next=y)}}function v0(i,o){var c=o.action,d=o.payload,m=i.state;if(o.isTransition){var y=q.T,w={};q.T=w;try{var T=c(m,d),A=q.S;A!==null&&A(w,T),S0(i,o,T)}catch(I){Zh(i,o,I)}finally{y!==null&&w.types!==null&&(y.types=w.types),q.T=y}}else try{y=c(m,d),S0(i,o,y)}catch(I){Zh(i,o,I)}}function S0(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){w0(i,o,d)},function(d){return Zh(i,o,d)}):w0(i,o,c)}function w0(i,o,c){o.status="fulfilled",o.value=c,x0(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,v0(i,c)))}function Zh(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,x0(o),o=o.next;while(o!==d)}i.action=null}function x0(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function E0(i,o){return o}function T0(i,o){if(je){var c=Ye.formState;if(c!==null){e:{var d=Ee;if(je){if(Ze){t:{for(var m=Ze,y=qn;m.nodeType!==8;){if(!y){m=null;break t}if(m=Fn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ze=Fn(m.nextSibling),d=m.data==="F!";break e}}xi(d)}d=!1}d&&(o=c[0])}}return c=tn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E0,lastRenderedState:o},c.queue=d,c=q0.bind(null,Ee,d),d.dispatch=c,d=Qh(!1),y=sp.bind(null,Ee,!1,d.queue),d=tn(),m={state:o,dispatch:null,action:i,pending:null},d.queue=m,c=uA.bind(null,Ee,m,y,c),m.dispatch=c,d.memoizedState=i,[o,c,!1]}function _0(i){var o=yt();return k0(o,Ge,i)}function k0(i,o,c){if(o=Yh(i,o,E0)[0],i=mu(Gr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=sl(o)}catch(w){throw w===Ca?su:w}else d=o;o=yt();var m=o.queue,y=m.dispatch;return c!==o.memoizedState&&(Ee.flags|=2048,Da(9,{destroy:void 0},fA.bind(null,m,c),null)),[d,y,i]}function fA(i,o){i.action=o}function A0(i){var o=yt(),c=Ge;if(c!==null)return k0(o,c,i);yt(),o=o.memoizedState,c=yt();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function Da(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=Ee.updateQueue,o===null&&(o=hu(),Ee.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function C0(){return yt().memoizedState}function gu(i,o,c,d){var m=tn();Ee.flags|=i,m.memoizedState=Da(1|o,{destroy:void 0},c,d===void 0?null:d)}function yu(i,o,c,d){var m=yt();d=d===void 0?null:d;var y=m.memoizedState.inst;Ge!==null&&d!==null&&Vh(d,Ge.memoizedState.deps)?m.memoizedState=Da(o,y,c,d):(Ee.flags|=i,m.memoizedState=Da(1|o,y,c,d))}function O0(i,o){gu(8390656,8,i,o)}function ep(i,o){yu(2048,8,i,o)}function dA(i){Ee.flags|=4;var o=Ee.updateQueue;if(o===null)o=hu(),Ee.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function M0(i){var o=yt().memoizedState;return dA({ref:o,nextImpl:i}),function(){if((Ue&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function R0(i,o){return yu(4,2,i,o)}function N0(i,o){return yu(4,4,i,o)}function D0(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function L0(i,o,c){c=c!=null?c.concat([i]):null,yu(4,4,D0.bind(null,o,i),c)}function tp(){}function j0(i,o){var c=yt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Vh(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function z0(i,o){var c=yt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Vh(o,d[1]))return d[0];if(d=i(),Ms){Dt(!0);try{i()}finally{Dt(!1)}}return c.memoizedState=[d,o],d}function np(i,o,c){return c===void 0||(Fr&1073741824)!==0&&(De&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Iv(),Ee.lanes|=i,Ri|=i,c)}function I0(i,o,c,d){return xn(c,o)?c:Ma.current!==null?(i=np(i,c,d),xn(i,o)||(Et=!0),i):(Fr&42)===0||(Fr&1073741824)!==0&&(De&261930)===0?(Et=!0,i.memoizedState=c):(i=Iv(),Ee.lanes|=i,Ri|=i,o)}function B0(i,o,c,d,m){var y=ee.p;ee.p=y!==0&&8>y?y:8;var w=q.T,T={};q.T=T,sp(i,!1,o,c);try{var A=m(),I=q.S;if(I!==null&&I(T,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=oA(A,d);al(i,o,V,Cn(i))}else al(i,o,d,Cn(i))}catch(K){al(i,o,{then:function(){},status:"rejected",reason:K},Cn())}finally{ee.p=y,w!==null&&T.types!==null&&(w.types=T.types),q.T=w}}function hA(){}function rp(i,o,c,d){if(i.tag!==5)throw Error(r(476));var m=U0(i).queue;B0(i,m,o,ge,c===null?hA:function(){return P0(i),c(d)})}function U0(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:ge},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function P0(i){var o=U0(i);o.next===null&&(o=i.alternate.memoizedState),al(i,o.next.queue,{},Cn())}function ip(){return Ht(El)}function H0(){return yt().memoizedState}function $0(){return yt().memoizedState}function pA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Cn();i=_i(c);var d=ki(o,i,c);d!==null&&(gn(d,o,c),tl(d,o,c)),o={cache:Dh()},i.payload=o;return}o=o.return}}function mA(i,o,c){var d=Cn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bu(i)?V0(o,c):(c=xh(i,o,c,d),c!==null&&(gn(c,i,d),F0(c,o,d)))}function q0(i,o,c){var d=Cn();al(i,o,c,d)}function al(i,o,c,d){var m={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(bu(i))V0(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,T=y(w,c);if(m.hasEagerState=!0,m.eagerState=T,xn(T,w))return Qc(i,o,m,0),Ye===null&&Xc(),!1}catch{}finally{}if(c=xh(i,o,m,d),c!==null)return gn(c,i,d),F0(c,o,d),!0}return!1}function sp(i,o,c,d){if(d={lane:2,revertLane:Ip(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},bu(i)){if(o)throw Error(r(479))}else o=xh(i,c,d,2),o!==null&&gn(o,i,2)}function bu(i){var o=i.alternate;return i===Ee||o!==null&&o===Ee}function V0(i,o){Ra=fu=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function F0(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,jo(i,c)}}var ol={readContext:Ht,use:pu,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};ol.useEffectEvent=ut;var G0={readContext:Ht,use:pu,useCallback:function(i,o){return tn().memoizedState=[i,o===void 0?null:o],i},useContext:Ht,useEffect:O0,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,gu(4194308,4,D0.bind(null,o,i),c)},useLayoutEffect:function(i,o){return gu(4194308,4,i,o)},useInsertionEffect:function(i,o){gu(4,2,i,o)},useMemo:function(i,o){var c=tn();o=o===void 0?null:o;var d=i();if(Ms){Dt(!0);try{i()}finally{Dt(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=tn();if(c!==void 0){var m=c(o);if(Ms){Dt(!0);try{c(o)}finally{Dt(!1)}}}else m=o;return d.memoizedState=d.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},d.queue=i,i=i.dispatch=mA.bind(null,Ee,i),[d.memoizedState,i]},useRef:function(i){var o=tn();return i={current:i},o.memoizedState=i},useState:function(i){i=Qh(i);var o=i.queue,c=q0.bind(null,Ee,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:tp,useDeferredValue:function(i,o){var c=tn();return np(c,i,o)},useTransition:function(){var i=Qh(!1);return i=B0.bind(null,Ee,i.queue,!0,!1),tn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=Ee,m=tn();if(je){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),Ye===null)throw Error(r(349));(De&127)!==0||h0(d,o,c)}m.memoizedState=c;var y={value:c,getSnapshot:o};return m.queue=y,O0(m0.bind(null,d,y,i),[i]),d.flags|=2048,Da(9,{destroy:void 0},p0.bind(null,d,y,c,o),null),c},useId:function(){var i=tn(),o=Ye.identifierPrefix;if(je){var c=br,d=yr;c=(d&~(1<<32-vt(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=du++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=lA++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:ip,useFormState:T0,useActionState:T0,useOptimistic:function(i){var o=tn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=sp.bind(null,Ee,!0,c),c.dispatch=o,[i,o]},useMemoCache:Wh,useCacheRefresh:function(){return tn().memoizedState=pA.bind(null,Ee)},useEffectEvent:function(i){var o=tn(),c={impl:i};return o.memoizedState=c,function(){if((Ue&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},ap={readContext:Ht,use:pu,useCallback:j0,useContext:Ht,useEffect:ep,useImperativeHandle:L0,useInsertionEffect:R0,useLayoutEffect:N0,useMemo:z0,useReducer:mu,useRef:C0,useState:function(){return mu(Gr)},useDebugValue:tp,useDeferredValue:function(i,o){var c=yt();return I0(c,Ge.memoizedState,i,o)},useTransition:function(){var i=mu(Gr)[0],o=yt().memoizedState;return[typeof i=="boolean"?i:sl(i),o]},useSyncExternalStore:d0,useId:H0,useHostTransitionStatus:ip,useFormState:_0,useActionState:_0,useOptimistic:function(i,o){var c=yt();return b0(c,Ge,i,o)},useMemoCache:Wh,useCacheRefresh:$0};ap.useEffectEvent=M0;var K0={readContext:Ht,use:pu,useCallback:j0,useContext:Ht,useEffect:ep,useImperativeHandle:L0,useInsertionEffect:R0,useLayoutEffect:N0,useMemo:z0,useReducer:Xh,useRef:C0,useState:function(){return Xh(Gr)},useDebugValue:tp,useDeferredValue:function(i,o){var c=yt();return Ge===null?np(c,i,o):I0(c,Ge.memoizedState,i,o)},useTransition:function(){var i=Xh(Gr)[0],o=yt().memoizedState;return[typeof i=="boolean"?i:sl(i),o]},useSyncExternalStore:d0,useId:H0,useHostTransitionStatus:ip,useFormState:A0,useActionState:A0,useOptimistic:function(i,o){var c=yt();return Ge!==null?b0(c,Ge,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:$0};K0.useEffectEvent=M0;function op(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:g({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var lp={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=Cn(),m=_i(d);m.payload=o,c!=null&&(m.callback=c),o=ki(i,m,d),o!==null&&(gn(o,i,d),tl(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=Cn(),m=_i(d);m.tag=1,m.payload=o,c!=null&&(m.callback=c),o=ki(i,m,d),o!==null&&(gn(o,i,d),tl(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Cn(),d=_i(c);d.tag=2,o!=null&&(d.callback=o),o=ki(i,d,c),o!==null&&(gn(o,i,c),tl(o,i,c))}};function J0(i,o,c,d,m,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,w):o.prototype&&o.prototype.isPureReactComponent?!Ko(c,d)||!Ko(m,y):!0}function W0(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&lp.enqueueReplaceState(o,o.state,null)}function Rs(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=g({},c));for(var m in i)c[m]===void 0&&(c[m]=i[m])}return c}function Y0(i){Yc(i)}function X0(i){console.error(i)}function Q0(i){Yc(i)}function vu(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Z0(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function cp(i,o,c){return c=_i(c),c.tag=3,c.payload={element:null},c.callback=function(){vu(i,o)},c}function ev(i){return i=_i(i),i.tag=3,i}function tv(i,o,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=d.value;i.payload=function(){return m(y)},i.callback=function(){Z0(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Z0(o,c,d),typeof m!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var T=d.stack;this.componentDidCatch(d.value,{componentStack:T!==null?T:""})})}function gA(i,o,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&_a(o,c,m,!0),c=Tn.current,c!==null){switch(c.tag){case 31:case 13:return Vn===null?Ru():c.alternate===null&&ft===0&&(ft=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===au?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Lp(i,d,m)),!1;case 22:return c.flags|=65536,d===au?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Lp(i,d,m)),!1}throw Error(r(435,c.tag))}return Lp(i,d,m),Ru(),!1}if(je)return o=Tn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,d!==Ch&&(i=Error(r(422),{cause:d}),Yo(Pn(i,c)))):(d!==Ch&&(o=Error(r(423),{cause:d}),Yo(Pn(o,c))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,d=Pn(d,c),m=cp(i.stateNode,d,m),Uh(i,m),ft!==4&&(ft=2)),!1;var y=Error(r(520),{cause:d});if(y=Pn(y,c),ml===null?ml=[y]:ml.push(y),ft!==4&&(ft=2),o===null)return!0;d=Pn(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=m&-m,c.lanes|=i,i=cp(c.stateNode,d,i),Uh(c,i),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ni===null||!Ni.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=ev(m),tv(m,i,c,d),Uh(c,m),!1}c=c.return}while(c!==null);return!1}var up=Error(r(461)),Et=!1;function $t(i,o,c,d){o.child=i===null?s0(o,null,c,d):Os(o,i.child,c,d)}function nv(i,o,c,d,m){c=c.render;var y=o.ref;if("ref"in d){var w={};for(var T in d)T!=="ref"&&(w[T]=d[T])}else w=d;return _s(o),d=Fh(i,o,c,w,y,m),T=Gh(),i!==null&&!Et?(Kh(i,o,m),Kr(i,o,m)):(je&&T&&kh(o),o.flags|=1,$t(i,o,d,m),o.child)}function rv(i,o,c,d,m){if(i===null){var y=c.type;return typeof y=="function"&&!Eh(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,iv(i,o,y,d,m)):(i=eu(c.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!bp(i,m)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:Ko,c(w,d)&&i.ref===o.ref)return Kr(i,o,m)}return o.flags|=1,i=Hr(y,d),i.ref=o.ref,i.return=o,o.child=i}function iv(i,o,c,d,m){if(i!==null){var y=i.memoizedProps;if(Ko(y,d)&&i.ref===o.ref)if(Et=!1,o.pendingProps=d=y,bp(i,m))(i.flags&131072)!==0&&(Et=!0);else return o.lanes=i.lanes,Kr(i,o,m)}return fp(i,o,c,d,m)}function sv(i,o,c,d){var m=d.children,y=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(d=o.child=i.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~y}else d=0,o.child=null;return av(i,o,y,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&iu(o,y!==null?y.cachePool:null),y!==null?l0(o,y):Hh(),c0(o);else return d=o.lanes=536870912,av(i,o,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(iu(o,y.cachePool),l0(o,y),Ci(),o.memoizedState=null):(i!==null&&iu(o,null),Hh(),Ci());return $t(i,o,m,c),o.child}function ll(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function av(i,o,c,d,m){var y=jh();return y=y===null?null:{parent:wt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},i!==null&&iu(o,null),Hh(),c0(o),i!==null&&_a(i,o,d,!0),o.childLanes=m,null}function Su(i,o){return o=xu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function ov(i,o,c){return Os(o,i.child,null,c),i=Su(o,o.pendingProps),i.flags|=2,_n(o),o.memoizedState=null,i}function yA(i,o,c){var d=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(je){if(d.mode==="hidden")return i=Su(o,d),o.lanes=536870912,ll(null,i);if(qh(o),(i=Ze)?(i=vS(i,qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Si!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},c=Vb(i),c.return=o,o.child=c,Pt=o,Ze=null)):i=null,i===null)throw xi(o);return o.lanes=536870912,null}return Su(o,d)}var y=i.memoizedState;if(y!==null){var w=y.dehydrated;if(qh(o),m)if(o.flags&256)o.flags&=-257,o=ov(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Et||_a(i,o,c,!1),m=(c&i.childLanes)!==0,Et||m){if(d=Ye,d!==null&&(w=zc(d,c),w!==0&&w!==y.retryLane))throw y.retryLane=w,ws(i,w),gn(d,i,w),up;Ru(),o=ov(i,o,c)}else i=y.treeContext,Ze=Fn(w.nextSibling),Pt=o,je=!0,wi=null,qn=!1,i!==null&&Kb(o,i),o=Su(o,d),o.flags|=4096;return o}return i=Hr(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function wu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function fp(i,o,c,d,m){return _s(o),c=Fh(i,o,c,d,void 0,m),d=Gh(),i!==null&&!Et?(Kh(i,o,m),Kr(i,o,m)):(je&&d&&kh(o),o.flags|=1,$t(i,o,c,m),o.child)}function lv(i,o,c,d,m,y){return _s(o),o.updateQueue=null,c=f0(o,d,c,m),u0(i),d=Gh(),i!==null&&!Et?(Kh(i,o,y),Kr(i,o,y)):(je&&d&&kh(o),o.flags|=1,$t(i,o,c,y),o.child)}function cv(i,o,c,d,m){if(_s(o),o.stateNode===null){var y=wa,w=c.contextType;typeof w=="object"&&w!==null&&(y=Ht(w)),y=new c(d,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=lp,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=d,y.state=o.memoizedState,y.refs={},Ih(o),w=c.contextType,y.context=typeof w=="object"&&w!==null?Ht(w):wa,y.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(op(o,c,w,d),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&lp.enqueueReplaceState(y,y.state,null),rl(o,d,y,m),nl(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){y=o.stateNode;var T=o.memoizedProps,A=Rs(c,T);y.props=A;var I=y.context,V=c.contextType;w=wa,typeof V=="object"&&V!==null&&(w=Ht(V));var K=c.getDerivedStateFromProps;V=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||I!==w)&&W0(o,y,d,w),Ti=!1;var H=o.memoizedState;y.state=H,rl(o,d,y,m),nl(),I=o.memoizedState,T||H!==I||Ti?(typeof K=="function"&&(op(o,c,K,d),I=o.memoizedState),(A=Ti||J0(o,c,A,d,H,I,w))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=I),y.props=d,y.state=I,y.context=w,d=A):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{y=o.stateNode,Bh(i,o),w=o.memoizedProps,V=Rs(c,w),y.props=V,K=o.pendingProps,H=y.context,I=c.contextType,A=wa,typeof I=="object"&&I!==null&&(A=Ht(I)),T=c.getDerivedStateFromProps,(I=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==K||H!==A)&&W0(o,y,d,A),Ti=!1,H=o.memoizedState,y.state=H,rl(o,d,y,m),nl();var $=o.memoizedState;w!==K||H!==$||Ti||i!==null&&i.dependencies!==null&&nu(i.dependencies)?(typeof T=="function"&&(op(o,c,T,d),$=o.memoizedState),(V=Ti||J0(o,c,V,d,H,$,A)||i!==null&&i.dependencies!==null&&nu(i.dependencies))?(I||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,$,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,$,A)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=$),y.props=d,y.state=$,y.context=A,d=V):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),d=!1)}return y=d,wu(i,o),d=(o.flags&128)!==0,y||d?(y=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&d?(o.child=Os(o,i.child,null,m),o.child=Os(o,null,c,m)):$t(i,o,c,m),o.memoizedState=y.state,i=o.child):i=Kr(i,o,m),i}function uv(i,o,c,d){return Es(),o.flags|=256,$t(i,o,c,d),o.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hp(i){return{baseLanes:i,cachePool:Zb()}}function pp(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=An),i}function fv(i,o,c){var d=o.pendingProps,m=!1,y=(o.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(gt.current&2)!==0),w&&(m=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,i===null){if(je){if(m?Ai(o):Ci(),(i=Ze)?(i=vS(i,qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Si!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},c=Vb(i),c.return=o,o.child=c,Pt=o,Ze=null)):i=null,i===null)throw xi(o);return Yp(i)?o.lanes=32:o.lanes=536870912,null}var T=d.children;return d=d.fallback,m?(Ci(),m=o.mode,T=xu({mode:"hidden",children:T},m),d=xs(d,m,c,null),T.return=o,d.return=o,T.sibling=d,o.child=T,d=o.child,d.memoizedState=hp(c),d.childLanes=pp(i,w,c),o.memoizedState=dp,ll(null,d)):(Ai(o),mp(o,T))}var A=i.memoizedState;if(A!==null&&(T=A.dehydrated,T!==null)){if(y)o.flags&256?(Ai(o),o.flags&=-257,o=gp(i,o,c)):o.memoizedState!==null?(Ci(),o.child=i.child,o.flags|=128,o=null):(Ci(),T=d.fallback,m=o.mode,d=xu({mode:"visible",children:d.children},m),T=xs(T,m,c,null),T.flags|=2,d.return=o,T.return=o,d.sibling=T,o.child=d,Os(o,i.child,null,c),d=o.child,d.memoizedState=hp(c),d.childLanes=pp(i,w,c),o.memoizedState=dp,o=ll(null,d));else if(Ai(o),Yp(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var I=w.dgst;w=I,d=Error(r(419)),d.stack="",d.digest=w,Yo({value:d,source:null,stack:null}),o=gp(i,o,c)}else if(Et||_a(i,o,c,!1),w=(c&i.childLanes)!==0,Et||w){if(w=Ye,w!==null&&(d=zc(w,c),d!==0&&d!==A.retryLane))throw A.retryLane=d,ws(i,d),gn(w,i,d),up;Wp(T)||Ru(),o=gp(i,o,c)}else Wp(T)?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,Ze=Fn(T.nextSibling),Pt=o,je=!0,wi=null,qn=!1,i!==null&&Kb(o,i),o=mp(o,d.children),o.flags|=4096);return o}return m?(Ci(),T=d.fallback,m=o.mode,A=i.child,I=A.sibling,d=Hr(A,{mode:"hidden",children:d.children}),d.subtreeFlags=A.subtreeFlags&65011712,I!==null?T=Hr(I,T):(T=xs(T,m,c,null),T.flags|=2),T.return=o,d.return=o,d.sibling=T,o.child=d,ll(null,d),d=o.child,T=i.child.memoizedState,T===null?T=hp(c):(m=T.cachePool,m!==null?(A=wt._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Zb(),T={baseLanes:T.baseLanes|c,cachePool:m}),d.memoizedState=T,d.childLanes=pp(i,w,c),o.memoizedState=dp,ll(i.child,d)):(Ai(o),c=i.child,i=c.sibling,c=Hr(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(w=o.deletions,w===null?(o.deletions=[i],o.flags|=16):w.push(i)),o.child=c,o.memoizedState=null,c)}function mp(i,o){return o=xu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function xu(i,o){return i=En(22,i,null,o),i.lanes=0,i}function gp(i,o,c){return Os(o,i.child,null,c),i=mp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function dv(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Rh(i.return,o,c)}function yp(i,o,c,d,m,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m,treeForkCount:y}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=m,w.treeForkCount=y)}function hv(i,o,c){var d=o.pendingProps,m=d.revealOrder,y=d.tail;d=d.children;var w=gt.current,T=(w&2)!==0;if(T?(w=w&1|2,o.flags|=128):w&=1,Z(gt,w),$t(i,o,d,c),d=je?Wo:0,!T&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dv(i,c,o);else if(i.tag===19)dv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(c=o.child,m=null;c!==null;)i=c.alternate,i!==null&&uu(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),yp(o,!1,m,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&uu(i)===null){o.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}yp(o,!0,c,null,y,d);break;case"together":yp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Kr(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Ri|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(_a(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Hr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Hr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function bp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&nu(i)))}function bA(i,o,c){switch(o.tag){case 3:ct(o,o.stateNode.containerInfo),Ei(o,wt,i.memoizedState.cache),Es();break;case 27:case 5:Mr(o);break;case 4:ct(o,o.stateNode.containerInfo);break;case 10:Ei(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,qh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Ai(o),o.flags|=128,null):(c&o.child.childLanes)!==0?fv(i,o,c):(Ai(o),i=Kr(i,o,c),i!==null?i.sibling:null);Ai(o);break;case 19:var m=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(_a(i,o,c,!1),d=(c&o.childLanes)!==0),m){if(d)return hv(i,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(gt,gt.current),d)break;return null;case 22:return o.lanes=0,sv(i,o,c,o.pendingProps);case 24:Ei(o,wt,i.memoizedState.cache)}return Kr(i,o,c)}function pv(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Et=!0;else{if(!bp(i,c)&&(o.flags&128)===0)return Et=!1,bA(i,o,c);Et=(i.flags&131072)!==0}else Et=!1,je&&(o.flags&1048576)!==0&&Gb(o,Wo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(i=As(o.elementType),o.type=i,typeof i=="function")Eh(i)?(d=Rs(i,d),o.tag=1,o=cv(null,o,i,d,c)):(o.tag=0,o=fp(null,o,i,d,c));else{if(i!=null){var m=i.$$typeof;if(m===B){o.tag=11,o=nv(null,o,i,d,c);break e}else if(m===U){o.tag=14,o=rv(null,o,i,d,c);break e}}throw o=he(i)||i,Error(r(306,o,""))}}return o;case 0:return fp(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,m=Rs(d,o.pendingProps),cv(i,o,d,m,c);case 3:e:{if(ct(o,o.stateNode.containerInfo),i===null)throw Error(r(387));d=o.pendingProps;var y=o.memoizedState;m=y.element,Bh(i,o),rl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,Ei(o,wt,d),d!==y.cache&&Nh(o,[wt],c,!0),nl(),d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=uv(i,o,d,c);break e}else if(d!==m){m=Pn(Error(r(424)),o),Yo(m),o=uv(i,o,d,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ze=Fn(i.firstChild),Pt=o,je=!0,wi=null,qn=!0,c=s0(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Es(),d===m){o=Kr(i,o,c);break e}$t(i,o,d,c)}o=o.child}return o;case 26:return wu(i,o),i===null?(c=_S(o.type,null,o.pendingProps,null))?o.memoizedState=c:je||(c=o.type,i=o.pendingProps,d=Bu(xe.current).createElement(c),d[St]=o,d[rt]=i,qt(d,c,i),Oe(d),o.stateNode=d):o.memoizedState=_S(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Mr(o),i===null&&je&&(d=o.stateNode=xS(o.type,o.pendingProps,xe.current),Pt=o,qn=!0,m=Ze,zi(o.type)?(Xp=m,Ze=Fn(d.firstChild)):Ze=m),$t(i,o,o.pendingProps.children,c),wu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&je&&((m=d=Ze)&&(d=JA(d,o.type,o.pendingProps,qn),d!==null?(o.stateNode=d,Pt=o,Ze=Fn(d.firstChild),qn=!1,m=!0):m=!1),m||xi(o)),Mr(o),m=o.type,y=o.pendingProps,w=i!==null?i.memoizedProps:null,d=y.children,Gp(m,y)?d=null:w!==null&&Gp(m,w)&&(o.flags|=32),o.memoizedState!==null&&(m=Fh(i,o,cA,null,null,c),El._currentValue=m),wu(i,o),$t(i,o,d,c),o.child;case 6:return i===null&&je&&((i=c=Ze)&&(c=WA(c,o.pendingProps,qn),c!==null?(o.stateNode=c,Pt=o,Ze=null,i=!0):i=!1),i||xi(o)),null;case 13:return fv(i,o,c);case 4:return ct(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Os(o,null,d,c):$t(i,o,d,c),o.child;case 11:return nv(i,o,o.type,o.pendingProps,c);case 7:return $t(i,o,o.pendingProps,c),o.child;case 8:return $t(i,o,o.pendingProps.children,c),o.child;case 12:return $t(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Ei(o,o.type,d.value),$t(i,o,d.children,c),o.child;case 9:return m=o.type._context,d=o.pendingProps.children,_s(o),m=Ht(m),d=d(m),o.flags|=1,$t(i,o,d,c),o.child;case 14:return rv(i,o,o.type,o.pendingProps,c);case 15:return iv(i,o,o.type,o.pendingProps,c);case 19:return hv(i,o,c);case 31:return yA(i,o,c);case 22:return sv(i,o,c,o.pendingProps);case 24:return _s(o),d=Ht(wt),i===null?(m=jh(),m===null&&(m=Ye,y=Dh(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),o.memoizedState={parent:d,cache:m},Ih(o),Ei(o,wt,m)):((i.lanes&c)!==0&&(Bh(i,o),rl(o,null,null,c),nl()),m=i.memoizedState,y=o.memoizedState,m.parent!==d?(m={parent:d,cache:d},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Ei(o,wt,d)):(d=y.cache,Ei(o,wt,d),d!==m.cache&&Nh(o,[wt],c,!0))),$t(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Jr(i){i.flags|=4}function vp(i,o,c,d,m){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(Hv())i.flags|=8192;else throw Cs=au,zh}else i.flags&=-16777217}function mv(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!MS(o))if(Hv())i.flags|=8192;else throw Cs=au,zh}function Eu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?zr():536870912,i.lanes|=o,Ia|=o)}function cl(i,o){if(!je)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function et(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function vA(i,o,c){var d=o.pendingProps;switch(Ah(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(o),null;case 1:return et(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Vr(wt),nt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Ta(o)?Jr(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Oh())),et(o),null;case 26:var m=o.type,y=o.memoizedState;return i===null?(Jr(o),y!==null?(et(o),mv(o,y)):(et(o),vp(o,m,null,d,c))):y?y!==i.memoizedState?(Jr(o),et(o),mv(o,y)):(et(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&Jr(o),et(o),vp(o,m,i,d,c)),null;case 27:if(ps(o),c=xe.current,m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Jr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return et(o),null}i=ie.current,Ta(o)?Jb(o):(i=xS(m,d,c),o.stateNode=i,Jr(o))}return et(o),null;case 5:if(ps(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Jr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return et(o),null}if(y=ie.current,Ta(o))Jb(o);else{var w=Bu(xe.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?w.createElement(m,{is:d.is}):w.createElement(m)}}y[St]=o,y[rt]=d;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=y;e:switch(qt(y,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Jr(o)}}return et(o),vp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&Jr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(i=xe.current,Ta(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,m=Pt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}i[St]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||fS(i.nodeValue,c)),i||xi(o,!0)}else i=Bu(i).createTextNode(d),i[St]=o,o.stateNode=i}return et(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=Ta(o),c!==null){if(i===null){if(!d)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[St]=o}else Es(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;et(o),i=!1}else c=Oh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(_n(o),o):(_n(o),null);if((o.flags&128)!==0)throw Error(r(558))}return et(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Ta(o),d!==null&&d.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[St]=o}else Es(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;et(o),m=!1}else m=Oh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(_n(o),o):(_n(o),null)}return _n(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Eu(o,o.updateQueue),et(o),null);case 4:return nt(),i===null&&Hp(o.stateNode.containerInfo),et(o),null;case 10:return Vr(o.type),et(o),null;case 19:if(J(gt),d=o.memoizedState,d===null)return et(o),null;if(m=(o.flags&128)!==0,y=d.rendering,y===null)if(m)cl(d,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=uu(i),y!==null){for(o.flags|=128,cl(d,!1),i=y.updateQueue,o.updateQueue=i,Eu(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)qb(c,i),c=c.sibling;return Z(gt,gt.current&1|2),je&&$r(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&Bt()>Cu&&(o.flags|=128,m=!0,cl(d,!1),o.lanes=4194304)}else{if(!m)if(i=uu(y),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,Eu(o,i),cl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!je)return et(o),null}else 2*Bt()-d.renderingStartTime>Cu&&c!==536870912&&(o.flags|=128,m=!0,cl(d,!1),o.lanes=4194304);d.isBackwards?(y.sibling=o.child,o.child=y):(i=d.last,i!==null?i.sibling=y:o.child=y,d.last=y)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Bt(),i.sibling=null,c=gt.current,Z(gt,m?c&1|2:c&1),je&&$r(o,d.treeForkCount),i):(et(o),null);case 22:case 23:return _n(o),$h(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(et(o),o.subtreeFlags&6&&(o.flags|=8192)):et(o),c=o.updateQueue,c!==null&&Eu(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&J(ks),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Vr(wt),et(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function SA(i,o){switch(Ah(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Vr(wt),nt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ps(o),null;case 31:if(o.memoizedState!==null){if(_n(o),o.alternate===null)throw Error(r(340));Es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(_n(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return J(gt),null;case 4:return nt(),null;case 10:return Vr(o.type),null;case 22:case 23:return _n(o),$h(),i!==null&&J(ks),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Vr(wt),null;case 25:return null;default:return null}}function gv(i,o){switch(Ah(o),o.tag){case 3:Vr(wt),nt();break;case 26:case 27:case 5:ps(o);break;case 4:nt();break;case 31:o.memoizedState!==null&&_n(o);break;case 13:_n(o);break;case 19:J(gt);break;case 10:Vr(o.type);break;case 22:case 23:_n(o),$h(),i!==null&&J(ks);break;case 24:Vr(wt)}}function ul(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&i)===i){d=void 0;var y=c.create,w=c.inst;d=y(),w.destroy=d}c=c.next}while(c!==m)}}catch(T){Ve(o,o.return,T)}}function Oi(i,o,c){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&i)===i){var w=d.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,m=o;var A=c,I=T;try{I()}catch(V){Ve(m,A,V)}}}d=d.next}while(d!==y)}}catch(V){Ve(o,o.return,V)}}function yv(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{o0(o,c)}catch(d){Ve(i,i.return,d)}}}function bv(i,o,c){c.props=Rs(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Ve(i,o,d)}}function fl(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(m){Ve(i,o,m)}}function vr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){Ve(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){Ve(i,o,m)}else c.current=null}function vv(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){Ve(i,i.return,m)}}function Sp(i,o,c){try{var d=i.stateNode;$A(d,i.type,c,o),d[rt]=o}catch(m){Ve(i,i.return,m)}}function Sv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zi(i.type)||i.tag===4}function wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Sv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xp(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ur));else if(d!==4&&(d===27&&zi(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(xp(i,o,c),i=i.sibling;i!==null;)xp(i,o,c),i=i.sibling}function Tu(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&zi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Tu(i,o,c),i=i.sibling;i!==null;)Tu(i,o,c),i=i.sibling}function wv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);qt(o,d,c),o[St]=i,o[rt]=c}catch(y){Ve(i,i.return,y)}}var Wr=!1,Tt=!1,Ep=!1,xv=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function wA(i,o){if(i=i.containerInfo,Vp=Fu,i=Lb(i),gh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,T=-1,A=-1,I=0,V=0,K=i,H=null;t:for(;;){for(var $;K!==c||m!==0&&K.nodeType!==3||(T=w+m),K!==y||d!==0&&K.nodeType!==3||(A=w+d),K.nodeType===3&&(w+=K.nodeValue.length),($=K.firstChild)!==null;)H=K,K=$;for(;;){if(K===i)break t;if(H===c&&++I===m&&(T=w),H===y&&++V===d&&(A=w),($=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=$}c=T===-1||A===-1?null:{start:T,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(Fp={focusedElem:i,selectionRange:c},Fu=!1,Lt=o;Lt!==null;)if(o=Lt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Lt=i;else for(;Lt!==null;){switch(o=Lt,y=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)m=i[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=o,m=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var se=Rs(c.type,m);i=d.getSnapshotBeforeUpdate(se,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(ye){Ve(c,c.return,ye)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Jp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Lt=i;break}Lt=o.return}}function Ev(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Xr(i,c),d&4&&ul(5,c);break;case 1:if(Xr(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(w){Ve(c,c.return,w)}else{var m=Rs(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Ve(c,c.return,w)}}d&64&&yv(c),d&512&&fl(c,c.return);break;case 3:if(Xr(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{o0(i,o)}catch(w){Ve(c,c.return,w)}}break;case 27:o===null&&d&4&&wv(c);case 26:case 5:Xr(i,c),o===null&&d&4&&vv(c),d&512&&fl(c,c.return);break;case 12:Xr(i,c);break;case 31:Xr(i,c),d&4&&kv(i,c);break;case 13:Xr(i,c),d&4&&Av(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=MA.bind(null,c),YA(i,c))));break;case 22:if(d=c.memoizedState!==null||Wr,!d){o=o!==null&&o.memoizedState!==null||Tt,m=Wr;var y=Tt;Wr=d,(Tt=o)&&!y?Qr(i,c,(c.subtreeFlags&8772)!==0):Xr(i,c),Wr=m,Tt=y}break;case 30:break;default:Xr(i,c)}}function Tv(i){var o=i.alternate;o!==null&&(i.alternate=null,Tv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&R(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var it=null,dn=!1;function Yr(i,o,c){for(c=c.child;c!==null;)_v(i,o,c),c=c.sibling}function _v(i,o,c){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(mr,c)}catch{}switch(c.tag){case 26:Tt||vr(c,o),Yr(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Tt||vr(c,o);var d=it,m=dn;zi(c.type)&&(it=c.stateNode,dn=!1),Yr(i,o,c),Sl(c.stateNode),it=d,dn=m;break;case 5:Tt||vr(c,o);case 6:if(d=it,m=dn,it=null,Yr(i,o,c),it=d,dn=m,it!==null)if(dn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(c.stateNode)}catch(y){Ve(c,o,y)}else try{it.removeChild(c.stateNode)}catch(y){Ve(c,o,y)}break;case 18:it!==null&&(dn?(i=it,yS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Fa(i)):yS(it,c.stateNode));break;case 4:d=it,m=dn,it=c.stateNode.containerInfo,dn=!0,Yr(i,o,c),it=d,dn=m;break;case 0:case 11:case 14:case 15:Oi(2,c,o),Tt||Oi(4,c,o),Yr(i,o,c);break;case 1:Tt||(vr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&bv(c,o,d)),Yr(i,o,c);break;case 21:Yr(i,o,c);break;case 22:Tt=(d=Tt)||c.memoizedState!==null,Yr(i,o,c),Tt=d;break;default:Yr(i,o,c)}}function kv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fa(i)}catch(c){Ve(o,o.return,c)}}}function Av(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fa(i)}catch(c){Ve(o,o.return,c)}}function xA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new xv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new xv),o;default:throw Error(r(435,i.tag))}}function _u(i,o){var c=xA(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var m=RA.bind(null,i,d);d.then(m,m)}})}function hn(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],y=i,w=o,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(zi(T.type)){it=T.stateNode,dn=!1;break e}break;case 5:it=T.stateNode,dn=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,dn=!0;break e}T=T.return}if(it===null)throw Error(r(160));_v(y,w,m),it=null,dn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Cv(o,i),o=o.sibling}var sr=null;function Cv(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hn(o,i),pn(i),d&4&&(Oi(3,i,i.return),ul(3,i),Oi(5,i,i.return));break;case 1:hn(o,i),pn(i),d&512&&(Tt||c===null||vr(c,c.return)),d&64&&Wr&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=sr;if(hn(o,i),pn(i),d&512&&(Tt||c===null||vr(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":y=m.getElementsByTagName("title")[0],(!y||y[le]||y[St]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(d),m.head.insertBefore(y,m.querySelector("head > title"))),qt(y,d,c),y[St]=i,Oe(y),d=y;break e;case"link":var w=CS("link","href",m).get(d+(c.href||""));if(w){for(var T=0;T<w.length;T++)if(y=w[T],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(T,1);break t}}y=m.createElement(d),qt(y,d,c),m.head.appendChild(y);break;case"meta":if(w=CS("meta","content",m).get(d+(c.content||""))){for(T=0;T<w.length;T++)if(y=w[T],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(T,1);break t}}y=m.createElement(d),qt(y,d,c),m.head.appendChild(y);break;default:throw Error(r(468,d))}y[St]=i,Oe(y),d=y}i.stateNode=d}else OS(m,i.type,i.stateNode);else i.stateNode=AS(m,d,i.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?OS(m,i.type,i.stateNode):AS(m,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Sp(i,i.memoizedProps,c.memoizedProps)}break;case 27:hn(o,i),pn(i),d&512&&(Tt||c===null||vr(c,c.return)),c!==null&&d&4&&Sp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(hn(o,i),pn(i),d&512&&(Tt||c===null||vr(c,c.return)),i.flags&32){m=i.stateNode;try{pa(m,"")}catch(se){Ve(i,i.return,se)}}d&4&&i.stateNode!=null&&(m=i.memoizedProps,Sp(i,m,c!==null?c.memoizedProps:m)),d&1024&&(Ep=!0);break;case 6:if(hn(o,i),pn(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(se){Ve(i,i.return,se)}}break;case 3:if(Hu=null,m=sr,sr=Uu(o.containerInfo),hn(o,i),sr=m,pn(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Fa(o.containerInfo)}catch(se){Ve(i,i.return,se)}Ep&&(Ep=!1,Ov(i));break;case 4:d=sr,sr=Uu(i.stateNode.containerInfo),hn(o,i),pn(i),sr=d;break;case 12:hn(o,i),pn(i);break;case 31:hn(o,i),pn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 13:hn(o,i),pn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Au=Bt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 22:m=i.memoizedState!==null;var A=c!==null&&c.memoizedState!==null,I=Wr,V=Tt;if(Wr=I||m,Tt=V||A,hn(o,i),Tt=V,Wr=I,pn(i),d&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(c===null||A||Wr||Tt||Ns(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){A=c=o;try{if(y=A.stateNode,m)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=A.stateNode;var K=A.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(se){Ve(A,A.return,se)}}}else if(o.tag===6){if(c===null){A=o;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(se){Ve(A,A.return,se)}}}else if(o.tag===18){if(c===null){A=o;try{var $=A.stateNode;m?bS($,!0):bS(A.stateNode,!1)}catch(se){Ve(A,A.return,se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,_u(i,c))));break;case 19:hn(o,i),pn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 30:break;case 21:break;default:hn(o,i),pn(i)}}function pn(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(Sv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var m=c.stateNode,y=wp(i);Tu(i,y,m);break;case 5:var w=c.stateNode;c.flags&32&&(pa(w,""),c.flags&=-33);var T=wp(i);Tu(i,T,w);break;case 3:case 4:var A=c.stateNode.containerInfo,I=wp(i);xp(i,I,A);break;default:throw Error(r(161))}}catch(V){Ve(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Ov(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Ov(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Xr(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Ev(i,o.alternate,o),o=o.sibling}function Ns(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Oi(4,o,o.return),Ns(o);break;case 1:vr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&bv(o,o.return,c),Ns(o);break;case 27:Sl(o.stateNode);case 26:case 5:vr(o,o.return),Ns(o);break;case 22:o.memoizedState===null&&Ns(o);break;case 30:Ns(o);break;default:Ns(o)}i=i.sibling}}function Qr(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,m=i,y=o,w=y.flags;switch(y.tag){case 0:case 11:case 15:Qr(m,y,c),ul(4,y);break;case 1:if(Qr(m,y,c),d=y,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(I){Ve(d,d.return,I)}if(d=y,m=d.updateQueue,m!==null){var T=d.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)a0(A[m],T)}catch(I){Ve(d,d.return,I)}}c&&w&64&&yv(y),fl(y,y.return);break;case 27:wv(y);case 26:case 5:Qr(m,y,c),c&&d===null&&w&4&&vv(y),fl(y,y.return);break;case 12:Qr(m,y,c);break;case 31:Qr(m,y,c),c&&w&4&&kv(m,y);break;case 13:Qr(m,y,c),c&&w&4&&Av(m,y);break;case 22:y.memoizedState===null&&Qr(m,y,c),fl(y,y.return);break;case 30:break;default:Qr(m,y,c)}o=o.sibling}}function Tp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Xo(c))}function _p(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Xo(i))}function ar(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Mv(i,o,c,d),o=o.sibling}function Mv(i,o,c,d){var m=o.flags;switch(o.tag){case 0:case 11:case 15:ar(i,o,c,d),m&2048&&ul(9,o);break;case 1:ar(i,o,c,d);break;case 3:ar(i,o,c,d),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Xo(i)));break;case 12:if(m&2048){ar(i,o,c,d),i=o.stateNode;try{var y=o.memoizedProps,w=y.id,T=y.onPostCommit;typeof T=="function"&&T(w,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){Ve(o,o.return,A)}}else ar(i,o,c,d);break;case 31:ar(i,o,c,d);break;case 13:ar(i,o,c,d);break;case 23:break;case 22:y=o.stateNode,w=o.alternate,o.memoizedState!==null?y._visibility&2?ar(i,o,c,d):dl(i,o):y._visibility&2?ar(i,o,c,d):(y._visibility|=2,La(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Tp(w,o);break;case 24:ar(i,o,c,d),m&2048&&_p(o.alternate,o);break;default:ar(i,o,c,d)}}function La(i,o,c,d,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=i,w=o,T=c,A=d,I=w.flags;switch(w.tag){case 0:case 11:case 15:La(y,w,T,A,m),ul(8,w);break;case 23:break;case 22:var V=w.stateNode;w.memoizedState!==null?V._visibility&2?La(y,w,T,A,m):dl(y,w):(V._visibility|=2,La(y,w,T,A,m)),m&&I&2048&&Tp(w.alternate,w);break;case 24:La(y,w,T,A,m),m&&I&2048&&_p(w.alternate,w);break;default:La(y,w,T,A,m)}o=o.sibling}}function dl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,m=d.flags;switch(d.tag){case 22:dl(c,d),m&2048&&Tp(d.alternate,d);break;case 24:dl(c,d),m&2048&&_p(d.alternate,d);break;default:dl(c,d)}o=o.sibling}}var hl=8192;function ja(i,o,c){if(i.subtreeFlags&hl)for(i=i.child;i!==null;)Rv(i,o,c),i=i.sibling}function Rv(i,o,c){switch(i.tag){case 26:ja(i,o,c),i.flags&hl&&i.memoizedState!==null&&lC(c,sr,i.memoizedState,i.memoizedProps);break;case 5:ja(i,o,c);break;case 3:case 4:var d=sr;sr=Uu(i.stateNode.containerInfo),ja(i,o,c),sr=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=hl,hl=16777216,ja(i,o,c),hl=d):ja(i,o,c));break;default:ja(i,o,c)}}function Nv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function pl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Lt=d,Lv(d,i)}Nv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dv(i),i=i.sibling}function Dv(i){switch(i.tag){case 0:case 11:case 15:pl(i),i.flags&2048&&Oi(9,i,i.return);break;case 3:pl(i);break;case 12:pl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ku(i)):pl(i);break;default:pl(i)}}function ku(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Lt=d,Lv(d,i)}Nv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Oi(8,o,o.return),ku(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ku(o));break;default:ku(o)}i=i.sibling}}function Lv(i,o){for(;Lt!==null;){var c=Lt;switch(c.tag){case 0:case 11:case 15:Oi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Xo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Lt=d;else e:for(c=i;Lt!==null;){d=Lt;var m=d.sibling,y=d.return;if(Tv(d),d===c){Lt=null;break e}if(m!==null){m.return=y,Lt=m;break e}Lt=y}}}var EA={getCacheForType:function(i){var o=Ht(wt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return Ht(wt).controller.signal}},TA=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ye=null,Re=null,De=0,qe=0,kn=null,Mi=!1,za=!1,kp=!1,Zr=0,ft=0,Ri=0,Ds=0,Ap=0,An=0,Ia=0,ml=null,mn=null,Cp=!1,Au=0,jv=0,Cu=1/0,Ou=null,Ni=null,Ot=0,Di=null,Ba=null,ei=0,Op=0,Mp=null,zv=null,gl=0,Rp=null;function Cn(){return(Ue&2)!==0&&De!==0?De&-De:q.T!==null?Ip():zo()}function Iv(){if(An===0)if((De&536870912)===0||je){var i=jr;jr<<=1,(jr&3932160)===0&&(jr=262144),An=i}else An=536870912;return i=Tn.current,i!==null&&(i.flags|=32),An}function gn(i,o,c){(i===Ye&&(qe===2||qe===9)||i.cancelPendingCommit!==null)&&(Ua(i,0),Li(i,De,An,!1)),bi(i,c),((Ue&2)===0||i!==Ye)&&(i===Ye&&((Ue&2)===0&&(Ds|=c),ft===4&&Li(i,De,An,!1)),Sr(i))}function Bv(i,o,c){if((Ue&6)!==0)throw Error(r(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||ys(i,o),m=d?AA(i,o):Dp(i,o,!0),y=d;do{if(m===0){za&&!d&&Li(i,o,0,!1);break}else{if(c=i.current.alternate,y&&!_A(c)){m=Dp(i,o,!1),y=!1;continue}if(m===2){if(y=o,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var T=i;m=ml;var A=T.current.memoizedState.isDehydrated;if(A&&(Ua(T,w).flags|=256),w=Dp(T,w,!1),w!==2){if(kp&&!A){T.errorRecoveryDisabledLanes|=y,Ds|=y,m=4;break e}y=mn,mn=m,y!==null&&(mn===null?mn=y:mn.push.apply(mn,y))}m=w}if(y=!1,m!==2)continue}}if(m===1){Ua(i,0),Li(i,o,0,!0);break}e:{switch(d=i,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Li(d,o,An,!Mi);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(m=Au+300-Bt(),10<m)){if(Li(d,o,An,!Mi),fa(d,0,!0)!==0)break e;ei=o,d.timeoutHandle=mS(Uv.bind(null,d,c,mn,Ou,Cp,o,An,Ds,Ia,Mi,y,"Throttled",-0,0),m);break e}Uv(d,c,mn,Ou,Cp,o,An,Ds,Ia,Mi,y,null,-0,0)}}break}while(!0);Sr(i)}function Uv(i,o,c,d,m,y,w,T,A,I,V,K,H,$){if(i.timeoutHandle=-1,K=o.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ur},Rv(o,y,K);var se=(y&62914560)===y?Au-Bt():(y&4194048)===y?jv-Bt():0;if(se=cC(K,se),se!==null){ei=y,i.cancelPendingCommit=se(Kv.bind(null,i,o,y,c,d,m,w,T,A,V,K,null,H,$)),Li(i,y,w,!I);return}}Kv(i,o,y,c,d,m,w,T,A)}function _A(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],y=m.getSnapshot;m=m.value;try{if(!xn(y(),m))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Li(i,o,c,d){o&=~Ap,o&=~Ds,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var m=o;0<m;){var y=31-vt(m),w=1<<y;d[y]=-1,m&=~w}c!==0&&Lo(i,c,o)}function Mu(){return(Ue&6)===0?(yl(0),!1):!0}function Np(){if(Re!==null){if(qe===0)var i=Re.return;else i=Re,qr=Ts=null,Jh(i),Oa=null,Zo=0,i=Re;for(;i!==null;)gv(i.alternate,i),i=i.return;Re=null}}function Ua(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,FA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ei=0,Np(),Ye=i,Re=c=Hr(i.current,null),De=o,qe=0,kn=null,Mi=!1,za=ys(i,o),kp=!1,Ia=An=Ap=Ds=Ri=ft=0,mn=ml=null,Cp=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var m=31-vt(d),y=1<<m;o|=i[m],d&=~y}return Zr=o,Xc(),c}function Pv(i,o){Ee=null,q.H=ol,o===Ca||o===su?(o=n0(),qe=3):o===zh?(o=n0(),qe=4):qe=o===up?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,kn=o,Re===null&&(ft=1,vu(i,Pn(o,i.current)))}function Hv(){var i=Tn.current;return i===null?!0:(De&4194048)===De?Vn===null:(De&62914560)===De||(De&536870912)!==0?i===Vn:!1}function $v(){var i=q.H;return q.H=ol,i===null?ol:i}function qv(){var i=q.A;return q.A=EA,i}function Ru(){ft=4,Mi||(De&4194048)!==De&&Tn.current!==null||(za=!0),(Ri&134217727)===0&&(Ds&134217727)===0||Ye===null||Li(Ye,De,An,!1)}function Dp(i,o,c){var d=Ue;Ue|=2;var m=$v(),y=qv();(Ye!==i||De!==o)&&(Ou=null,Ua(i,o)),o=!1;var w=ft;e:do try{if(qe!==0&&Re!==null){var T=Re,A=kn;switch(qe){case 8:Np(),w=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(o=!0);var I=qe;if(qe=0,kn=null,Pa(i,T,A,I),c&&za){w=0;break e}break;default:I=qe,qe=0,kn=null,Pa(i,T,A,I)}}kA(),w=ft;break}catch(V){Pv(i,V)}while(!0);return o&&i.shellSuspendCounter++,qr=Ts=null,Ue=d,q.H=m,q.A=y,Re===null&&(Ye=null,De=0,Xc()),w}function kA(){for(;Re!==null;)Vv(Re)}function AA(i,o){var c=Ue;Ue|=2;var d=$v(),m=qv();Ye!==i||De!==o?(Ou=null,Cu=Bt()+500,Ua(i,o)):za=ys(i,o);e:do try{if(qe!==0&&Re!==null){o=Re;var y=kn;t:switch(qe){case 1:qe=0,kn=null,Pa(i,o,y,1);break;case 2:case 9:if(e0(y)){qe=0,kn=null,Fv(o);break}o=function(){qe!==2&&qe!==9||Ye!==i||(qe=7),Sr(i)},y.then(o,o);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:e0(y)?(qe=0,kn=null,Fv(o)):(qe=0,kn=null,Pa(i,o,y,7));break;case 5:var w=null;switch(Re.tag){case 26:w=Re.memoizedState;case 5:case 27:var T=Re;if(w?MS(w):T.stateNode.complete){qe=0,kn=null;var A=T.sibling;if(A!==null)Re=A;else{var I=T.return;I!==null?(Re=I,Nu(I)):Re=null}break t}}qe=0,kn=null,Pa(i,o,y,5);break;case 6:qe=0,kn=null,Pa(i,o,y,6);break;case 8:Np(),ft=6;break e;default:throw Error(r(462))}}CA();break}catch(V){Pv(i,V)}while(!0);return qr=Ts=null,q.H=d,q.A=m,Ue=c,Re!==null?0:(Ye=null,De=0,Xc(),ft)}function CA(){for(;Re!==null&&!Dc();)Vv(Re)}function Vv(i){var o=pv(i.alternate,i,Zr);i.memoizedProps=i.pendingProps,o===null?Nu(i):Re=o}function Fv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=lv(c,o,o.pendingProps,o.type,void 0,De);break;case 11:o=lv(c,o,o.pendingProps,o.type.render,o.ref,De);break;case 5:Jh(o);default:gv(c,o),o=Re=qb(o,Zr),o=pv(c,o,Zr)}i.memoizedProps=i.pendingProps,o===null?Nu(i):Re=o}function Pa(i,o,c,d){qr=Ts=null,Jh(o),Oa=null,Zo=0;var m=o.return;try{if(gA(i,m,o,c,De)){ft=1,vu(i,Pn(c,i.current)),Re=null;return}}catch(y){if(m!==null)throw Re=m,y;ft=1,vu(i,Pn(c,i.current)),Re=null;return}o.flags&32768?(je||d===1?i=!0:za||(De&536870912)!==0?i=!1:(Mi=i=!0,(d===2||d===9||d===3||d===6)&&(d=Tn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Gv(o,i)):Nu(o)}function Nu(i){var o=i;do{if((o.flags&32768)!==0){Gv(o,Mi);return}i=o.return;var c=vA(o.alternate,o,Zr);if(c!==null){Re=c;return}if(o=o.sibling,o!==null){Re=o;return}Re=o=i}while(o!==null);ft===0&&(ft=5)}function Gv(i,o){do{var c=SA(i.alternate,i);if(c!==null){c.flags&=32767,Re=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Re=i;return}Re=i=c}while(i!==null);ft=6,Re=null}function Kv(i,o,c,d,m,y,w,T,A){i.cancelPendingCommit=null;do Du();while(Ot!==0);if((Ue&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=wh,Do(i,c,y,w,T,A),i===Ye&&(Re=Ye=null,De=0),Ba=o,Di=i,ei=c,Op=y,Mp=m,zv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,NA(yi,function(){return Qv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,m=ee.p,ee.p=2,w=Ue,Ue|=4;try{wA(i,o,c)}finally{Ue=w,ee.p=m,q.T=d}}Ot=1,Jv(),Wv(),Yv()}}function Jv(){if(Ot===1){Ot=0;var i=Di,o=Ba,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var d=ee.p;ee.p=2;var m=Ue;Ue|=4;try{Cv(o,i);var y=Fp,w=Lb(i.containerInfo),T=y.focusedElem,A=y.selectionRange;if(w!==T&&T&&T.ownerDocument&&Db(T.ownerDocument.documentElement,T)){if(A!==null&&gh(T)){var I=A.start,V=A.end;if(V===void 0&&(V=I),"selectionStart"in T)T.selectionStart=I,T.selectionEnd=Math.min(V,T.value.length);else{var K=T.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var $=H.getSelection(),se=T.textContent.length,ye=Math.min(A.start,se),Je=A.end===void 0?ye:Math.min(A.end,se);!$.extend&&ye>Je&&(w=Je,Je=ye,ye=w);var L=Nb(T,ye),N=Nb(T,Je);if(L&&N&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==N.node||$.focusOffset!==N.offset)){var z=K.createRange();z.setStart(L.node,L.offset),$.removeAllRanges(),ye>Je?($.addRange(z),$.extend(N.node,N.offset)):(z.setEnd(N.node,N.offset),$.addRange(z))}}}}for(K=[],$=T;$=$.parentNode;)$.nodeType===1&&K.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<K.length;T++){var G=K[T];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Fu=!!Vp,Fp=Vp=null}finally{Ue=m,ee.p=d,q.T=c}}i.current=o,Ot=2}}function Wv(){if(Ot===2){Ot=0;var i=Di,o=Ba,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var d=ee.p;ee.p=2;var m=Ue;Ue|=4;try{Ev(i,o.alternate,o)}finally{Ue=m,ee.p=d,q.T=c}}Ot=3}}function Yv(){if(Ot===4||Ot===3){Ot=0,Qd();var i=Di,o=Ba,c=ei,d=zv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ot=5:(Ot=0,Ba=Di=null,Xv(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ni=null),rr(c),o=o.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(mr,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=q.T,m=ee.p,ee.p=2,q.T=null;try{for(var y=i.onRecoverableError,w=0;w<d.length;w++){var T=d[w];y(T.value,{componentStack:T.stack})}}finally{q.T=o,ee.p=m}}(ei&3)!==0&&Du(),Sr(i),m=i.pendingLanes,(c&261930)!==0&&(m&42)!==0?i===Rp?gl++:(gl=0,Rp=i):gl=0,yl(0)}}function Xv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Xo(o)))}function Du(){return Jv(),Wv(),Yv(),Qv()}function Qv(){if(Ot!==5)return!1;var i=Di,o=Op;Op=0;var c=rr(ei),d=q.T,m=ee.p;try{ee.p=32>c?32:c,q.T=null,c=Mp,Mp=null;var y=Di,w=ei;if(Ot=0,Ba=Di=null,ei=0,(Ue&6)!==0)throw Error(r(331));var T=Ue;if(Ue|=4,Dv(y.current),Mv(y,y.current,w,c),Ue=T,yl(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(mr,y)}catch{}return!0}finally{ee.p=m,q.T=d,Xv(i,o)}}function Zv(i,o,c){o=Pn(c,o),o=cp(i.stateNode,o,2),i=ki(i,o,2),i!==null&&(bi(i,2),Sr(i))}function Ve(i,o,c){if(i.tag===3)Zv(i,i,c);else for(;o!==null;){if(o.tag===3){Zv(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ni===null||!Ni.has(d))){i=Pn(c,i),c=ev(2),d=ki(o,c,2),d!==null&&(tv(c,d,o,i),bi(d,2),Sr(d));break}}o=o.return}}function Lp(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new TA;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(c)||(kp=!0,m.add(c),i=OA.bind(null,i,o,c),o.then(i,i))}function OA(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Ye===i&&(De&c)===c&&(ft===4||ft===3&&(De&62914560)===De&&300>Bt()-Au?(Ue&2)===0&&Ua(i,0):Ap|=c,Ia===De&&(Ia=0)),Sr(i)}function eS(i,o){o===0&&(o=zr()),i=ws(i,o),i!==null&&(bi(i,o),Sr(i))}function MA(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),eS(i,c)}function RA(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),eS(i,c)}function NA(i,o){return gi(i,o)}var Lu=null,Ha=null,jp=!1,ju=!1,zp=!1,ji=0;function Sr(i){i!==Ha&&i.next===null&&(Ha===null?Lu=Ha=i:Ha=Ha.next=i),ju=!0,jp||(jp=!0,LA())}function yl(i,o){if(!zp&&ju){zp=!0;do for(var c=!1,d=Lu;d!==null;){if(i!==0){var m=d.pendingLanes;if(m===0)var y=0;else{var w=d.suspendedLanes,T=d.pingedLanes;y=(1<<31-vt(42|i)+1)-1,y&=m&~(w&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,iS(d,y))}else y=De,y=fa(d,d===Ye?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||ys(d,y)||(c=!0,iS(d,y));d=d.next}while(c);zp=!1}}function DA(){tS()}function tS(){ju=jp=!1;var i=0;ji!==0&&VA()&&(i=ji);for(var o=Bt(),c=null,d=Lu;d!==null;){var m=d.next,y=nS(d,o);y===0?(d.next=null,c===null?Lu=m:c.next=m,m===null&&(Ha=c)):(c=d,(i!==0||(y&3)!==0)&&(ju=!0)),d=m}Ot!==0&&Ot!==5||yl(i),ji!==0&&(ji=0)}function nS(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-vt(y),T=1<<w,A=m[w];A===-1?((T&c)===0||(T&d)!==0)&&(m[w]=mt(T,o)):A<=o&&(i.expiredLanes|=T),y&=~T}if(o=Ye,c=De,c=fa(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(qe===2||qe===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&ca(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ys(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&ca(d),rr(c)){case 2:case 8:c=Sn;break;case 32:c=yi;break;case 268435456:c=Co;break;default:c=yi}return d=rS.bind(null,i),c=gi(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&ca(d),i.callbackPriority=2,i.callbackNode=null,2}function rS(i,o){if(Ot!==0&&Ot!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Du()&&i.callbackNode!==c)return null;var d=De;return d=fa(i,i===Ye?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Bv(i,d,o),nS(i,Bt()),i.callbackNode!=null&&i.callbackNode===c?rS.bind(null,i):null)}function iS(i,o){if(Du())return null;Bv(i,o,!0)}function LA(){GA(function(){(Ue&6)!==0?gi(Dr,DA):tS()})}function Ip(){if(ji===0){var i=ka;i===0&&(i=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),ji=i}return ji}function sS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qc(""+i)}function aS(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function jA(i,o,c,d,m){if(o==="submit"&&c&&c.stateNode===m){var y=sS((m[rt]||null).action),w=d.submitter;w&&(o=(o=w[rt]||null)?sS(o.formAction):w.getAttribute("formAction"),o!==null&&(y=o,w=null));var T=new Kc("action","action",null,d,m);i.push({event:T,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ji!==0){var A=w?aS(m,w):new FormData(m);rp(c,{pending:!0,data:A,method:m.method,action:y},null,A)}}else typeof y=="function"&&(T.preventDefault(),A=w?aS(m,w):new FormData(m),rp(c,{pending:!0,data:A,method:m.method,action:y},y,A))},currentTarget:m}]})}}for(var Bp=0;Bp<Sh.length;Bp++){var Up=Sh[Bp],zA=Up.toLowerCase(),IA=Up[0].toUpperCase()+Up.slice(1);ir(zA,"on"+IA)}ir(Ib,"onAnimationEnd"),ir(Bb,"onAnimationIteration"),ir(Ub,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(Zk,"onTransitionRun"),ir(eA,"onTransitionStart"),ir(tA,"onTransitionCancel"),ir(Pb,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function oS(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],m=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var w=d.length-1;0<=w;w--){var T=d[w],A=T.instance,I=T.currentTarget;if(T=T.listener,A!==y&&m.isPropagationStopped())break e;y=T,m.currentTarget=I;try{y(m)}catch(V){Yc(V)}m.currentTarget=null,y=A}else for(w=0;w<d.length;w++){if(T=d[w],A=T.instance,I=T.currentTarget,T=T.listener,A!==y&&m.isPropagationStopped())break e;y=T,m.currentTarget=I;try{y(m)}catch(V){Yc(V)}m.currentTarget=null,y=A}}}}function Ne(i,o){var c=o[da];c===void 0&&(c=o[da]=new Set);var d=i+"__bubble";c.has(d)||(lS(o,i,2,!1),c.add(d))}function Pp(i,o,c){var d=0;o&&(d|=4),lS(c,i,d,o)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Hp(i){if(!i[zu]){i[zu]=!0,Ut.forEach(function(c){c!=="selectionchange"&&(BA.has(c)||Pp(c,!1,i),Pp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[zu]||(o[zu]=!0,Pp("selectionchange",!1,o))}}function lS(i,o,c,d){switch(IS(o)){case 2:var m=dC;break;case 8:m=hC;break;default:m=nm}c=m.bind(null,o,c,i),m=void 0,!oh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,c,{capture:!0,passive:m}):i.addEventListener(o,c,!0):m!==void 0?i.addEventListener(o,c,{passive:m}):i.addEventListener(o,c,!1)}function $p(i,o,c,d,m){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var T=d.stateNode.containerInfo;if(T===m)break;if(w===4)for(w=d.return;w!==null;){var A=w.tag;if((A===3||A===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;T!==null;){if(w=X(T),w===null)return;if(A=w.tag,A===5||A===6||A===26||A===27){d=y=w;continue e}T=T.parentNode}}d=d.return}hb(function(){var I=y,V=sh(c),K=[];e:{var H=Hb.get(i);if(H!==void 0){var $=Kc,se=i;switch(i){case"keypress":if(Fc(c)===0)break e;case"keydown":case"keyup":$=Rk;break;case"focusin":se="focus",$=fh;break;case"focusout":se="blur",$=fh;break;case"beforeblur":case"afterblur":$=fh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=vk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Lk;break;case Ib:case Bb:case Ub:$=xk;break;case Pb:$=zk;break;case"scroll":case"scrollend":$=yk;break;case"wheel":$=Bk;break;case"copy":case"cut":case"paste":$=Tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=bb;break;case"toggle":case"beforetoggle":$=Pk}var ye=(o&4)!==0,Je=!ye&&(i==="scroll"||i==="scrollend"),L=ye?H!==null?H+"Capture":null:H;ye=[];for(var N=I,z;N!==null;){var G=N;if(z=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||z===null||L===null||(G=Po(N,L),G!=null&&ye.push(vl(N,G,z))),Je)break;N=N.return}0<ye.length&&(H=new $(H,se,null,c,V),K.push({event:H,listeners:ye}))}}if((o&7)===0){e:{if(H=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",H&&c!==ih&&(se=c.relatedTarget||c.fromElement)&&(X(se)||se[Ir]))break e;if(($||H)&&(H=V.window===V?V:(H=V.ownerDocument)?H.defaultView||H.parentWindow:window,$?(se=c.relatedTarget||c.toElement,$=I,se=se?X(se):null,se!==null&&(Je=a(se),ye=se.tag,se!==Je||ye!==5&&ye!==27&&ye!==6)&&(se=null)):($=null,se=I),$!==se)){if(ye=gb,G="onMouseLeave",L="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(ye=bb,G="onPointerLeave",L="onPointerEnter",N="pointer"),Je=$==null?H:$e($),z=se==null?H:$e(se),H=new ye(G,N+"leave",$,c,V),H.target=Je,H.relatedTarget=z,G=null,X(V)===I&&(ye=new ye(L,N+"enter",se,c,V),ye.target=z,ye.relatedTarget=Je,G=ye),Je=G,$&&se)t:{for(ye=UA,L=$,N=se,z=0,G=L;G;G=ye(G))z++;G=0;for(var pe=N;pe;pe=ye(pe))G++;for(;0<z-G;)L=ye(L),z--;for(;0<G-z;)N=ye(N),G--;for(;z--;){if(L===N||N!==null&&L===N.alternate){ye=L;break t}L=ye(L),N=ye(N)}ye=null}else ye=null;$!==null&&cS(K,H,$,ye,!1),se!==null&&Je!==null&&cS(K,Je,se,ye,!0)}}e:{if(H=I?$e(I):window,$=H.nodeName&&H.nodeName.toLowerCase(),$==="select"||$==="input"&&H.type==="file")var Ie=kb;else if(Tb(H))if(Ab)Ie=Yk;else{Ie=Jk;var ce=Kk}else $=H.nodeName,!$||$.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?I&&rh(I.elementType)&&(Ie=kb):Ie=Wk;if(Ie&&(Ie=Ie(i,I))){_b(K,Ie,c,V);break e}ce&&ce(i,H,I),i==="focusout"&&I&&H.type==="number"&&I.memoizedProps.value!=null&&nh(H,"number",H.value)}switch(ce=I?$e(I):window,i){case"focusin":(Tb(ce)||ce.contentEditable==="true")&&(ba=ce,yh=I,Jo=null);break;case"focusout":Jo=yh=ba=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,jb(K,c,V);break;case"selectionchange":if(Qk)break;case"keydown":case"keyup":jb(K,c,V)}var _e;if(hh)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ya?xb(i,c)&&(Le="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Le="onCompositionStart");Le&&(vb&&c.locale!=="ko"&&(ya||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ya&&(_e=pb()):(vi=V,lh="value"in vi?vi.value:vi.textContent,ya=!0)),ce=Iu(I,Le),0<ce.length&&(Le=new yb(Le,i,null,c,V),K.push({event:Le,listeners:ce}),_e?Le.data=_e:(_e=Eb(c),_e!==null&&(Le.data=_e)))),(_e=$k?qk(i,c):Vk(i,c))&&(Le=Iu(I,"onBeforeInput"),0<Le.length&&(ce=new yb("onBeforeInput","beforeinput",null,c,V),K.push({event:ce,listeners:Le}),ce.data=_e)),jA(K,i,I,c,V)}oS(K,o)})}function vl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Iu(i,o){for(var c=o+"Capture",d=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Po(i,c),m!=null&&d.unshift(vl(i,m,y)),m=Po(i,o),m!=null&&d.push(vl(i,m,y))),i.tag===3)return d;i=i.return}return[]}function UA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function cS(i,o,c,d,m){for(var y=o._reactName,w=[];c!==null&&c!==d;){var T=c,A=T.alternate,I=T.stateNode;if(T=T.tag,A!==null&&A===d)break;T!==5&&T!==26&&T!==27||I===null||(A=I,m?(I=Po(c,y),I!=null&&w.unshift(vl(c,I,A))):m||(I=Po(c,y),I!=null&&w.push(vl(c,I,A)))),c=c.return}w.length!==0&&i.push({event:o,listeners:w})}var PA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function uS(i){return(typeof i=="string"?i:""+i).replace(PA,`
`).replace(HA,"")}function fS(i,o){return o=uS(o),uS(i)===o}function Ke(i,o,c,d,m,y){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||pa(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&pa(i,""+d);break;case"className":Hc(i,"class",d);break;case"tabIndex":Hc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Hc(i,c,d);break;case"style":fb(i,d,y);break;case"data":if(o!=="object"){Hc(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=qc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&Ke(i,o,"name",m.name,m,null),Ke(i,o,"formEncType",m.formEncType,m,null),Ke(i,o,"formMethod",m.formMethod,m,null),Ke(i,o,"formTarget",m.formTarget,m,null)):(Ke(i,o,"encType",m.encType,m,null),Ke(i,o,"method",m.method,m,null),Ke(i,o,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=qc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Ur);break;case"onScroll":d!=null&&Ne("scroll",i);break;case"onScrollEnd":d!=null&&Ne("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=qc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":Ne("beforetoggle",i),Ne("toggle",i),Pc(i,"popover",d);break;case"xlinkActuate":Br(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Br(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Br(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Br(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Br(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Br(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Br(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Br(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Br(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Pc(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=mk.get(c)||c,Pc(i,c,d))}}function qp(i,o,c,d,m,y){switch(c){case"style":fb(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?pa(i,d):(typeof d=="number"||typeof d=="bigint")&&pa(i,""+d);break;case"onScroll":d!=null&&Ne("scroll",i);break;case"onScrollEnd":d!=null&&Ne("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),o=c.slice(2,m?c.length-7:void 0),y=i[rt]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(o,y,m),typeof d=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,m);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Pc(i,c,d)}}}function qt(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",i),Ne("load",i);var d=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var w=c[y];if(w!=null)switch(y){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Ke(i,o,y,w,c,null)}}m&&Ke(i,o,"srcSet",c.srcSet,c,null),d&&Ke(i,o,"src",c.src,c,null);return;case"input":Ne("invalid",i);var T=y=w=m=null,A=null,I=null;for(d in c)if(c.hasOwnProperty(d)){var V=c[d];if(V!=null)switch(d){case"name":m=V;break;case"type":w=V;break;case"checked":A=V;break;case"defaultChecked":I=V;break;case"value":y=V;break;case"defaultValue":T=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:Ke(i,o,d,V,c,null)}}ob(i,y,T,A,I,w,m,!1);return;case"select":Ne("invalid",i),d=w=y=null;for(m in c)if(c.hasOwnProperty(m)&&(T=c[m],T!=null))switch(m){case"value":y=T;break;case"defaultValue":w=T;break;case"multiple":d=T;default:Ke(i,o,m,T,c,null)}o=y,c=w,i.multiple=!!d,o!=null?ha(i,!!d,o,!1):c!=null&&ha(i,!!d,c,!0);return;case"textarea":Ne("invalid",i),y=m=d=null;for(w in c)if(c.hasOwnProperty(w)&&(T=c[w],T!=null))switch(w){case"value":d=T;break;case"defaultValue":m=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Ke(i,o,w,T,c,null)}cb(i,d,m,y);return;case"option":for(A in c)if(c.hasOwnProperty(A)&&(d=c[A],d!=null))switch(A){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ke(i,o,A,d,c,null)}return;case"dialog":Ne("beforetoggle",i),Ne("toggle",i),Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":Ne("load",i);break;case"video":case"audio":for(d=0;d<bl.length;d++)Ne(bl[d],i);break;case"image":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"embed":case"source":case"link":Ne("error",i),Ne("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in c)if(c.hasOwnProperty(I)&&(d=c[I],d!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Ke(i,o,I,d,c,null)}return;default:if(rh(o)){for(V in c)c.hasOwnProperty(V)&&(d=c[V],d!==void 0&&qp(i,o,V,d,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(d=c[T],d!=null&&Ke(i,o,T,d,c,null))}function $A(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,w=null,T=null,A=null,I=null,V=null;for($ in c){var K=c[$];if(c.hasOwnProperty($)&&K!=null)switch($){case"checked":break;case"value":break;case"defaultValue":A=K;default:d.hasOwnProperty($)||Ke(i,o,$,null,d,K)}}for(var H in d){var $=d[H];if(K=c[H],d.hasOwnProperty(H)&&($!=null||K!=null))switch(H){case"type":y=$;break;case"name":m=$;break;case"checked":I=$;break;case"defaultChecked":V=$;break;case"value":w=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,o));break;default:$!==K&&Ke(i,o,H,$,d,K)}}th(i,w,T,A,I,V,y,m);return;case"select":$=w=T=H=null;for(y in c)if(A=c[y],c.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":$=A;default:d.hasOwnProperty(y)||Ke(i,o,y,null,d,A)}for(m in d)if(y=d[m],A=c[m],d.hasOwnProperty(m)&&(y!=null||A!=null))switch(m){case"value":H=y;break;case"defaultValue":T=y;break;case"multiple":w=y;default:y!==A&&Ke(i,o,m,y,d,A)}o=T,c=w,d=$,H!=null?ha(i,!!c,H,!1):!!d!=!!c&&(o!=null?ha(i,!!c,o,!0):ha(i,!!c,c?[]:"",!1));return;case"textarea":$=H=null;for(T in c)if(m=c[T],c.hasOwnProperty(T)&&m!=null&&!d.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ke(i,o,T,null,d,m)}for(w in d)if(m=d[w],y=c[w],d.hasOwnProperty(w)&&(m!=null||y!=null))switch(w){case"value":H=m;break;case"defaultValue":$=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Ke(i,o,w,m,d,y)}lb(i,H,$);return;case"option":for(var se in c)if(H=c[se],c.hasOwnProperty(se)&&H!=null&&!d.hasOwnProperty(se))switch(se){case"selected":i.selected=!1;break;default:Ke(i,o,se,null,d,H)}for(A in d)if(H=d[A],$=c[A],d.hasOwnProperty(A)&&H!==$&&(H!=null||$!=null))switch(A){case"selected":i.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ke(i,o,A,H,d,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in c)H=c[ye],c.hasOwnProperty(ye)&&H!=null&&!d.hasOwnProperty(ye)&&Ke(i,o,ye,null,d,H);for(I in d)if(H=d[I],$=c[I],d.hasOwnProperty(I)&&H!==$&&(H!=null||$!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,o));break;default:Ke(i,o,I,H,d,$)}return;default:if(rh(o)){for(var Je in c)H=c[Je],c.hasOwnProperty(Je)&&H!==void 0&&!d.hasOwnProperty(Je)&&qp(i,o,Je,void 0,d,H);for(V in d)H=d[V],$=c[V],!d.hasOwnProperty(V)||H===$||H===void 0&&$===void 0||qp(i,o,V,H,d,$);return}}for(var L in c)H=c[L],c.hasOwnProperty(L)&&H!=null&&!d.hasOwnProperty(L)&&Ke(i,o,L,null,d,H);for(K in d)H=d[K],$=c[K],!d.hasOwnProperty(K)||H===$||H==null&&$==null||Ke(i,o,K,H,d,$)}function dS(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var m=c[d],y=m.transferSize,w=m.initiatorType,T=m.duration;if(y&&T&&dS(w)){for(w=0,T=m.responseEnd,d+=1;d<c.length;d++){var A=c[d],I=A.startTime;if(I>T)break;var V=A.transferSize,K=A.initiatorType;V&&dS(K)&&(A=A.responseEnd,w+=V*(A<T?1:(T-I)/(A-I)))}if(--d,o+=8*(y+w)/(m.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Vp=null,Fp=null;function Bu(i){return i.nodeType===9?i:i.ownerDocument}function hS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pS(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Gp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kp=null;function VA(){var i=window.event;return i&&i.type==="popstate"?i===Kp?!1:(Kp=i,!0):(Kp=null,!1)}var mS=typeof setTimeout=="function"?setTimeout:void 0,FA=typeof clearTimeout=="function"?clearTimeout:void 0,gS=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof gS<"u"?function(i){return gS.resolve(null).then(i).catch(KA)}:mS;function KA(i){setTimeout(function(){throw i})}function zi(i){return i==="head"}function yS(i,o){var c=o,d=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(m),Fa(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Sl(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Sl(c);for(var y=c.firstChild;y;){var w=y.nextSibling,T=y.nodeName;y[le]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=w}}else c==="body"&&Sl(i.ownerDocument.body);c=m}while(c);Fa(o)}function bS(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function Jp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Jp(c),R(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function JA(i,o,c,d){for(;i.nodeType===1;){var m=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[le])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Fn(i.nextSibling),i===null)break}return null}function WA(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Fn(i.nextSibling),i===null))return null;return i}function vS(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Fn(i.nextSibling),i===null))return null;return i}function Wp(i){return i.data==="$?"||i.data==="$~"}function Yp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function YA(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Fn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Xp=null;function SS(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Fn(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function wS(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function xS(i,o,c){switch(o=Bu(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Sl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);R(i)}var Gn=new Map,ES=new Set;function Uu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ti=ee.d;ee.d={f:XA,r:QA,D:ZA,C:eC,L:tC,m:nC,X:iC,S:rC,M:sC};function XA(){var i=ti.f(),o=Mu();return i||o}function QA(i){var o=re(i);o!==null&&o.tag===5&&o.type==="form"?P0(o):ti.r(i)}var $a=typeof document>"u"?null:document;function TS(i,o,c){var d=$a;if(d&&typeof o=="string"&&o){var m=Bn(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),ES.has(m)||(ES.add(m),i={rel:i,crossOrigin:c,href:o},d.querySelector(m)===null&&(o=d.createElement("link"),qt(o,"link",i),Oe(o),d.head.appendChild(o)))}}function ZA(i){ti.D(i),TS("dns-prefetch",i,null)}function eC(i,o){ti.C(i,o),TS("preconnect",i,o)}function tC(i,o,c){ti.L(i,o,c);var d=$a;if(d&&i&&o){var m='link[rel="preload"][as="'+Bn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Bn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Bn(c.imageSizes)+'"]')):m+='[href="'+Bn(i)+'"]';var y=m;switch(o){case"style":y=qa(i);break;case"script":y=Va(i)}Gn.has(y)||(i=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Gn.set(y,i),d.querySelector(m)!==null||o==="style"&&d.querySelector(wl(y))||o==="script"&&d.querySelector(xl(y))||(o=d.createElement("link"),qt(o,"link",i),Oe(o),d.head.appendChild(o)))}}function nC(i,o){ti.m(i,o);var c=$a;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Bn(d)+'"][href="'+Bn(i)+'"]',y=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Va(i)}if(!Gn.has(y)&&(i=g({rel:"modulepreload",href:i},o),Gn.set(y,i),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(xl(y)))return}d=c.createElement("link"),qt(d,"link",i),Oe(d),c.head.appendChild(d)}}}function rC(i,o,c){ti.S(i,o,c);var d=$a;if(d&&i){var m=st(d).hoistableStyles,y=qa(i);o=o||"default";var w=m.get(y);if(!w){var T={loading:0,preload:null};if(w=d.querySelector(wl(y)))T.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Gn.get(y))&&Qp(i,c);var A=w=d.createElement("link");Oe(A),qt(A,"link",i),A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),A.addEventListener("load",function(){T.loading|=1}),A.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Pu(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:T},m.set(y,w)}}}function iC(i,o){ti.X(i,o);var c=$a;if(c&&i){var d=st(c).hoistableScripts,m=Va(i),y=d.get(m);y||(y=c.querySelector(xl(m)),y||(i=g({src:i,async:!0},o),(o=Gn.get(m))&&Zp(i,o),y=c.createElement("script"),Oe(y),qt(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function sC(i,o){ti.M(i,o);var c=$a;if(c&&i){var d=st(c).hoistableScripts,m=Va(i),y=d.get(m);y||(y=c.querySelector(xl(m)),y||(i=g({src:i,async:!0,type:"module"},o),(o=Gn.get(m))&&Zp(i,o),y=c.createElement("script"),Oe(y),qt(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function _S(i,o,c,d){var m=(m=xe.current)?Uu(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=qa(c.href),c=st(m).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=qa(c.href);var y=st(m).hoistableStyles,w=y.get(i);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=m.querySelector(wl(i)))&&!y._p&&(w.instance=y,w.state.loading=5),Gn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Gn.set(i,c),y||aC(m,i,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Va(c),c=st(m).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function qa(i){return'href="'+Bn(i)+'"'}function wl(i){return'link[rel="stylesheet"]['+i+"]"}function kS(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function aC(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),qt(o,"link",c),Oe(o),i.head.appendChild(o))}function Va(i){return'[src="'+Bn(i)+'"]'}function xl(i){return"script[async]"+i}function AS(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+Bn(c.href)+'"]');if(d)return o.instance=d,Oe(d),d;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Oe(d),qt(d,"style",m),Pu(d,c.precedence,i),o.instance=d;case"stylesheet":m=qa(c.href);var y=i.querySelector(wl(m));if(y)return o.state.loading|=4,o.instance=y,Oe(y),y;d=kS(c),(m=Gn.get(m))&&Qp(d,m),y=(i.ownerDocument||i).createElement("link"),Oe(y);var w=y;return w._p=new Promise(function(T,A){w.onload=T,w.onerror=A}),qt(y,"link",d),o.state.loading|=4,Pu(y,c.precedence,i),o.instance=y;case"script":return y=Va(c.src),(m=i.querySelector(xl(y)))?(o.instance=m,Oe(m),m):(d=c,(m=Gn.get(y))&&(d=g({},c),Zp(d,m)),i=i.ownerDocument||i,m=i.createElement("script"),Oe(m),qt(m,"link",d),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Pu(d,c.precedence,i));return o.instance}function Pu(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,y=m,w=0;w<d.length;w++){var T=d[w];if(T.dataset.precedence===o)y=T;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Qp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Zp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Hu=null;function CS(i,o,c){if(Hu===null){var d=new Map,m=Hu=new Map;m.set(c,d)}else m=Hu,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),m=0;m<c.length;m++){var y=c[m];if(!(y[le]||y[St]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(o)||"";w=i+w;var T=d.get(w);T?T.push(y):d.set(w,[y])}}return d}function OS(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function oC(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function MS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function lC(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=qa(d.href),y=o.querySelector(wl(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=$u.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=y,Oe(y);return}y=o.ownerDocument||o,d=kS(d),(m=Gn.get(m))&&Qp(d,m),y=y.createElement("link"),Oe(y);var w=y;w._p=new Promise(function(T,A){w.onload=T,w.onerror=A}),qt(y,"link",d),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=$u.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var em=0;function cC(i,o){return i.stylesheets&&i.count===0&&Vu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Vu(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+o);0<i.imgBytes&&em===0&&(em=62500*qA());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Vu(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>em?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function $u(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qu=null;function Vu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qu=new Map,o.forEach(uC,i),qu=null,$u.call(i))}function uC(i,o){if(!(o.state.loading&4)){var c=qu.get(i);if(c)var d=c.get(null);else{c=new Map,qu.set(i,c);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var w=m[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}m=o.instance,w=m.getAttribute("data-precedence"),y=c.get(w)||d,y===d&&c.set(null,m),c.set(w,m),this.count++,d=$u.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var El={$$typeof:O,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function fC(i,o,c,d,m,y,w,T,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=No(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.hiddenUpdates=No(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function RS(i,o,c,d,m,y,w,T,A,I,V,K){return i=new fC(i,o,c,w,A,I,V,K,T),o=1,y===!0&&(o|=24),y=En(3,null,null,o),i.current=y,y.stateNode=i,o=Dh(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:o},Ih(y),i}function NS(i){return i?(i=wa,i):wa}function DS(i,o,c,d,m,y){m=NS(m),d.context===null?d.context=m:d.pendingContext=m,d=_i(o),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=ki(i,d,o),c!==null&&(gn(c,i,o),tl(c,i,o))}function LS(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function tm(i,o){LS(i,o),(i=i.alternate)&&LS(i,o)}function jS(i){if(i.tag===13||i.tag===31){var o=ws(i,67108864);o!==null&&gn(o,i,67108864),tm(i,67108864)}}function zS(i){if(i.tag===13||i.tag===31){var o=Cn();o=cn(o);var c=ws(i,o);c!==null&&gn(c,i,o),tm(i,o)}}var Fu=!0;function dC(i,o,c,d){var m=q.T;q.T=null;var y=ee.p;try{ee.p=2,nm(i,o,c,d)}finally{ee.p=y,q.T=m}}function hC(i,o,c,d){var m=q.T;q.T=null;var y=ee.p;try{ee.p=8,nm(i,o,c,d)}finally{ee.p=y,q.T=m}}function nm(i,o,c,d){if(Fu){var m=rm(d);if(m===null)$p(i,o,d,Gu,c),BS(i,d);else if(mC(m,i,o,c,d))d.stopPropagation();else if(BS(i,d),o&4&&-1<pC.indexOf(i)){for(;m!==null;){var y=re(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=wn(y.pendingLanes);if(w!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var A=1<<31-vt(w);T.entanglements[1]|=A,w&=~A}Sr(y),(Ue&6)===0&&(Cu=Bt()+500,yl(0))}}break;case 31:case 13:T=ws(y,2),T!==null&&gn(T,y,2),Mu(),tm(y,2)}if(y=rm(d),y===null&&$p(i,o,d,Gu,c),y===m)break;m=y}m!==null&&d.stopPropagation()}else $p(i,o,d,null,c)}}function rm(i){return i=sh(i),im(i)}var Gu=null;function im(i){if(Gu=null,i=X(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Gu=i,null}function IS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gs()){case Dr:return 2;case Sn:return 8;case yi:case Lc:return 32;case Co:return 268435456;default:return 32}default:return 32}}var sm=!1,Ii=null,Bi=null,Ui=null,Tl=new Map,_l=new Map,Pi=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BS(i,o){switch(i){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Tl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(o.pointerId)}}function kl(i,o,c,d,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},o!==null&&(o=re(o),o!==null&&jS(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function mC(i,o,c,d,m){switch(o){case"focusin":return Ii=kl(Ii,i,o,c,d,m),!0;case"dragenter":return Bi=kl(Bi,i,o,c,d,m),!0;case"mouseover":return Ui=kl(Ui,i,o,c,d,m),!0;case"pointerover":var y=m.pointerId;return Tl.set(y,kl(Tl.get(y)||null,i,o,c,d,m)),!0;case"gotpointercapture":return y=m.pointerId,_l.set(y,kl(_l.get(y)||null,i,o,c,d,m)),!0}return!1}function US(i){var o=X(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,Io(i.priority,function(){zS(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,Io(i.priority,function(){zS(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ku(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=rm(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);ih=d,c.target.dispatchEvent(d),ih=null}else return o=re(c),o!==null&&jS(o),i.blockedOn=c,!1;o.shift()}return!0}function PS(i,o,c){Ku(i)&&c.delete(o)}function gC(){sm=!1,Ii!==null&&Ku(Ii)&&(Ii=null),Bi!==null&&Ku(Bi)&&(Bi=null),Ui!==null&&Ku(Ui)&&(Ui=null),Tl.forEach(PS),_l.forEach(PS)}function Ju(i,o){i.blockedOn===o&&(i.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gC)))}var Wu=null;function HS(i){Wu!==i&&(Wu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wu===i&&(Wu=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],m=i[o+2];if(typeof d!="function"){if(im(d||c)===null)continue;break}var y=re(c);y!==null&&(i.splice(o,3),o-=3,rp(y,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function Fa(i){function o(A){return Ju(A,i)}Ii!==null&&Ju(Ii,i),Bi!==null&&Ju(Bi,i),Ui!==null&&Ju(Ui,i),Tl.forEach(o),_l.forEach(o);for(var c=0;c<Pi.length;c++){var d=Pi[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Pi.length&&(c=Pi[0],c.blockedOn===null);)US(c),c.blockedOn===null&&Pi.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],y=c[d+1],w=m[rt]||null;if(typeof y=="function")w||HS(c);else if(w){var T=null;if(y&&y.hasAttribute("formAction")){if(m=y,w=y[rt]||null)T=w.formAction;else if(im(m)!==null)continue}else T=w.action;typeof T=="function"?c[d+1]=T:(c.splice(d,3),d-=3),HS(c)}}}function $S(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function am(i){this._internalRoot=i}Yu.prototype.render=am.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Cn();DS(c,d,i,o,null,null)},Yu.prototype.unmount=am.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;DS(i.current,2,null,i,null,null),Mu(),o[Ir]=null}};function Yu(i){this._internalRoot=i}Yu.prototype.unstable_scheduleHydration=function(i){if(i){var o=zo();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Pi.length&&o!==0&&o<Pi[c].priority;c++);Pi.splice(c,0,i),c===0&&US(i)}};var qS=e.version;if(qS!=="19.2.3")throw Error(r(527,qS,"19.2.3"));ee.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var yC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{mr=Xu.inject(yC),Nt=Xu}catch{}}return Cl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,d="",m=Y0,y=X0,w=Q0;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=RS(i,1,!1,null,null,c,d,null,m,y,w,$S),i[Ir]=o.current,Hp(i),new am(o)},Cl.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var d=!1,m="",y=Y0,w=X0,T=Q0,A=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.formState!==void 0&&(A=c.formState)),o=RS(i,1,!0,o,c??null,d,m,A,y,w,T,$S),o.context=NS(null),c=o.current,d=Cn(),d=cn(d),m=_i(d),m.callback=null,ki(c,m,d),c=d,o.current.lanes=c,bi(o,c),Sr(o),i[Ir]=o.current,Hp(i),new Yu(o)},Cl.version="19.2.3",Cl}var ZS;function kC(){if(ZS)return cm.exports;ZS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cm.exports=_C(),cm.exports}var AC=kC();const CC=ly(AC);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ew="popstate";function OC(n={}){function e(s,a){let{pathname:l="/",search:u="",hash:f=""}=ra(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),fg("",{pathname:l,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let f=s.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof a=="string"?a:sc(a))}function r(s,a){Zn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return RC(e,t,r,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Zn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MC(){return Math.random().toString(36).substring(2,10)}function tw(n,e){return{usr:n.state,key:n.key,idx:e}}function fg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ra(e):e,state:t,key:e&&e.key||r||MC()}}function sc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ra(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function RC(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u="POP",f=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){u="POP";let E=p(),_=E==null?null:E-h;h=E,f&&f({action:u,location:x.location,delta:_})}function b(E,_){u="PUSH";let C=fg(x.location,E,_);t&&t(C,E),h=p()+1;let O=tw(C,h),B=x.createHref(C);try{l.pushState(O,"",B)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(B)}a&&f&&f({action:u,location:x.location,delta:1})}function v(E,_){u="REPLACE";let C=fg(x.location,E,_);t&&t(C,E),h=p();let O=tw(C,h),B=x.createHref(C);l.replaceState(O,"",B),a&&f&&f({action:u,location:x.location,delta:0})}function S(E){return NC(E)}let x={get action(){return u},get location(){return n(s,l)},listen(E){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(ew,g),f=E,()=>{s.removeEventListener(ew,g),f=null}},createHref(E){return e(s,E)},createURL:S,encodeLocation(E){let _=S(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:b,replace:v,go(E){return l.go(E)}};return x}function NC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ot(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:sc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function CE(n,e,t="/"){return DC(n,e,t,!1)}function DC(n,e,t,r){let s=typeof e=="string"?ra(e):e,a=di(s.pathname||"/",t);if(a==null)return null;let l=OE(n);LC(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=FC(a);u=qC(l[f],h,r)}return u}function OE(n,e=[],t=[],r="",s=!1){let a=(l,u,f=s,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&f)return;ot(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=ci([r,p.relativePath]),b=t.concat(p);l.children&&l.children.length>0&&(ot(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),OE(l.children,e,b,g,f)),!(l.path==null&&!l.index)&&e.push({path:g,score:HC(g,l.index),routesMeta:b})};return n.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,u);else for(let h of ME(l.path))a(l,u,!0,h)}),e}function ME(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=ME(r.join("/")),u=[];return u.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&u.push(...l),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function LC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$C(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jC=/^:[\w-]+$/,zC=3,IC=2,BC=1,UC=10,PC=-2,nw=n=>n==="*";function HC(n,e){let t=n.split("/"),r=t.length;return t.some(nw)&&(r+=PC),e&&(r+=IC),t.filter(s=>!nw(s)).reduce((s,a)=>s+(jC.test(a)?zC:a===""?BC:UC),r)}function $C(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function qC(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Lf({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),b=f.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Lf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:ci([a,g.pathname]),pathnameBase:WC(ci([a,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(a=ci([a,g.pathnameBase]))}return l}function Lf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=VC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},b)=>{if(p==="*"){let S=u[b]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const v=u[b];return g&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:n}}function VC(n,e=!1,t=!0){Zn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function FC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function di(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var RE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GC=n=>RE.test(n);function KC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ra(n):n,a;if(t)if(GC(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=rw(t.substring(1),"/"):a=rw(t,e)}else a=e;return{pathname:a,search:YC(r),hash:XC(s)}}function rw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function hm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NE(n){let e=JC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function DE(n,e,t,r=!1){let s;typeof n=="string"?s=ra(n):(s={...n},ot(!s.pathname||!s.pathname.includes("?"),hm("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),hm("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),hm("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),g-=1;s.pathname=b.join("/")}u=g>=0?e[g]:"/"}let f=KC(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var ci=n=>n.join("/").replace(/\/\/+/g,"/"),WC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,QC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ZC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function eO(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var LE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jE(n,e){let t=n;if(typeof t!="string"||!RE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(LE)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),u=di(l.pathname,e);l.origin===a.origin&&u!=null?t=u+l.search+l.hash:s=!0}catch{Zn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zE=["POST","PUT","PATCH","DELETE"];new Set(zE);var tO=["GET",...zE];new Set(tO);var Eo=D.createContext(null);Eo.displayName="DataRouter";var Md=D.createContext(null);Md.displayName="DataRouterState";var nO=D.createContext(!1),IE=D.createContext({isTransitioning:!1});IE.displayName="ViewTransition";var rO=D.createContext(new Map);rO.displayName="Fetchers";var iO=D.createContext(null);iO.displayName="Await";var tr=D.createContext(null);tr.displayName="Navigation";var _c=D.createContext(null);_c.displayName="Location";var Cr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Cr.displayName="Route";var cy=D.createContext(null);cy.displayName="RouteError";var BE="REACT_ROUTER_ERROR",sO="REDIRECT",aO="ROUTE_ERROR_RESPONSE";function oO(n){if(n.startsWith(`${BE}:${sO}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function lO(n){if(n.startsWith(`${BE}:${aO}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new QC(e.status,e.statusText,e.data)}catch{}}function cO(n,{relative:e}={}){ot(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=D.useContext(tr),{hash:s,pathname:a,search:l}=Ac(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:ci([t,a])),r.createHref({pathname:u,search:l,hash:s})}function kc(){return D.useContext(_c)!=null}function Or(){return ot(kc(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(_c).location}var UE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PE(n){D.useContext(tr).static||D.useLayoutEffect(n)}function ia(){let{isDataRoute:n}=D.useContext(Cr);return n?EO():uO()}function uO(){ot(kc(),"useNavigate() may be used only in the context of a <Router> component.");let n=D.useContext(Eo),{basename:e,navigator:t}=D.useContext(tr),{matches:r}=D.useContext(Cr),{pathname:s}=Or(),a=JSON.stringify(NE(r)),l=D.useRef(!1);return PE(()=>{l.current=!0}),D.useCallback((f,h={})=>{if(Zn(l.current,UE),!l.current)return;if(typeof f=="number"){t.go(f);return}let p=DE(f,JSON.parse(a),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ci([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,s,n])}D.createContext(null);function fO(){let{matches:n}=D.useContext(Cr),e=n[n.length-1];return e?e.params:{}}function Ac(n,{relative:e}={}){let{matches:t}=D.useContext(Cr),{pathname:r}=Or(),s=JSON.stringify(NE(t));return D.useMemo(()=>DE(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function dO(n,e){return HE(n,e)}function HE(n,e,t,r,s){var C;ot(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(tr),{matches:l}=D.useContext(Cr),u=l[l.length-1],f=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let O=g&&g.path||"";qE(h,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let b=Or(),v;if(e){let O=typeof e=="string"?ra(e):e;ot(p==="/"||((C=O.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),v=O}else v=b;let S=v.pathname||"/",x=S;if(p!=="/"){let O=p.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let E=CE(n,{pathname:x});Zn(g||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Zn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=yO(E&&E.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:ci([p,a.encodeLocation?a.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:ci([p,a.encodeLocation?a.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,t,r,s);return e&&_?D.createElement(_c.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function hO(){let n=xO(),e=ZC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:s},t):null,l)}var pO=D.createElement(hO,null),$E=class extends D.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=lO(n.digest);t&&(n=t)}let e=n!==void 0?D.createElement(Cr.Provider,{value:this.props.routeContext},D.createElement(cy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?D.createElement(mO,{error:n},e):e}};$E.contextType=nO;var pm=new WeakMap;function mO({children:n,error:e}){let{basename:t}=D.useContext(tr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=oO(e.digest);if(r){let s=pm.get(e);if(s)throw s;let a=jE(r.location,t);if(LE&&!pm.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw pm.set(e,l),l}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function gO({routeContext:n,match:e,children:t}){let r=D.useContext(Eo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Cr.Provider,{value:n},t)}function yO(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,f=-1;if(t)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:b,errors:v}=t,S=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||S){u=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let h=t&&r?(p,g)=>{var b,v;r(p,{location:t.location,params:((v=(b=t.matches)==null?void 0:b[0])==null?void 0:v.params)??{},unstable_pattern:eO(t.matches),errorInfo:g})}:void 0;return a.reduceRight((p,g,b)=>{let v,S=!1,x=null,E=null;t&&(v=l&&g.route.id?l[g.route.id]:void 0,x=g.route.errorElement||pO,u&&(f<0&&b===0?(qE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):f===b&&(S=!0,E=g.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,b+1)),C=()=>{let O;return v?O=x:S?O=E:g.route.Component?O=D.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,D.createElement(gO,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:t!=null},children:O})};return t&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?D.createElement($E,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:h}):C()},null)}function uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bO(n){let e=D.useContext(Eo);return ot(e,uy(n)),e}function vO(n){let e=D.useContext(Md);return ot(e,uy(n)),e}function SO(n){let e=D.useContext(Cr);return ot(e,uy(n)),e}function fy(n){let e=SO(n),t=e.matches[e.matches.length-1];return ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function wO(){return fy("useRouteId")}function xO(){var r;let n=D.useContext(cy),e=vO("useRouteError"),t=fy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function EO(){let{router:n}=bO("useNavigate"),e=fy("useNavigate"),t=D.useRef(!1);return PE(()=>{t.current=!0}),D.useCallback(async(s,a={})=>{Zn(t.current,UE),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var iw={};function qE(n,e,t){!e&&!iw[n]&&(iw[n]=!0,Zn(!1,t))}D.memo(TO);function TO({routes:n,future:e,state:t,onError:r}){return HE(n,void 0,t,r,e)}function wr(n){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _O({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){ot(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);typeof t=="string"&&(t=ra(t));let{pathname:h="/",search:p="",hash:g="",state:b=null,key:v="default"}=t,S=D.useMemo(()=>{let x=di(h,u);return x==null?null:{location:{pathname:x,search:p,hash:g,state:b,key:v},navigationType:r}},[u,h,p,g,b,v,r]);return Zn(S!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:D.createElement(tr.Provider,{value:f},D.createElement(_c.Provider,{children:e,value:S}))}function kO({children:n,location:e}){return dO(dg(n),e)}function dg(n,e=[]){let t=[];return D.Children.forEach(n,(r,s)=>{if(!D.isValidElement(r))return;let a=[...e,s];if(r.type===D.Fragment){t.push.apply(t,dg(r.props.children,a));return}ot(r.type===wr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=dg(r.props.children,a)),t.push(l)}),t}var _f="get",kf="application/x-www-form-urlencoded";function Rd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function AO(n){return Rd(n)&&n.tagName.toLowerCase()==="button"}function CO(n){return Rd(n)&&n.tagName.toLowerCase()==="form"}function OO(n){return Rd(n)&&n.tagName.toLowerCase()==="input"}function MO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function RO(n,e){return n.button===0&&(!e||e==="_self")&&!MO(n)}var Qu=null;function NO(){if(Qu===null)try{new FormData(document.createElement("form"),0),Qu=!1}catch{Qu=!0}return Qu}var DO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mm(n){return n!=null&&!DO.has(n)?(Zn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kf}"`),null):n}function LO(n,e){let t,r,s,a,l;if(CO(n)){let u=n.getAttribute("action");r=u?di(u,e):null,t=n.getAttribute("method")||_f,s=mm(n.getAttribute("enctype"))||kf,a=new FormData(n)}else if(AO(n)||OO(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||u.getAttribute("action");if(r=f?di(f,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||_f,s=mm(n.getAttribute("formenctype"))||mm(u.getAttribute("enctype"))||kf,a=new FormData(u,n),!NO()){let{name:h,type:p,value:g}=n;if(p==="image"){let b=h?`${h}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else h&&a.append(h,g)}}else{if(Rd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_f,r=null,s=kf,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jO(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&di(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function zO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function BO(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await zO(a,t);return l.links?l.links():[]}return[]}));return $O(r.flat(1).filter(IO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function sw(n,e,t,r,s,a){let l=(f,h)=>t[h]?f.route.id!==t[h].route.id:!0,u=(f,h)=>{var p;return t[h].pathname!==f.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,h)=>l(f,h)||u(f,h)):a==="data"?e.filter((f,h)=>{var g;let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function UO(n,e,{includeHydrateFallback:t}={}){return PO(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function PO(n){return[...new Set(n)]}function HO(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function $O(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(HO(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function VE(){let n=D.useContext(Eo);return dy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function qO(){let n=D.useContext(Md);return dy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hy=D.createContext(void 0);hy.displayName="FrameworkContext";function FE(){let n=D.useContext(hy);return dy(n,"You must render this element inside a <HydratedRouter> element"),n}function VO(n,e){let t=D.useContext(hy),[r,s]=D.useState(!1),[a,l]=D.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,b=D.useRef(null);D.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let x=_=>{_.forEach(C=>{l(C.isIntersecting)})},E=new IntersectionObserver(x,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[n]),D.useEffect(()=>{if(r){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{s(!0)},S=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,b,{}]:[a,b,{onFocus:Ol(u,v),onBlur:Ol(f,S),onMouseEnter:Ol(h,v),onMouseLeave:Ol(p,S),onTouchStart:Ol(g,v)}]:[!1,b,{}]}function Ol(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function FO({page:n,...e}){let{router:t}=VE(),r=D.useMemo(()=>CE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?D.createElement(KO,{page:n,matches:r,...e}):null}function GO(n){let{manifest:e,routeModules:t}=FE(),[r,s]=D.useState([]);return D.useEffect(()=>{let a=!1;return BO(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function KO({page:n,matches:e,...t}){let r=Or(),{future:s,manifest:a,routeModules:l}=FE(),{basename:u}=VE(),{loaderData:f,matches:h}=qO(),p=D.useMemo(()=>sw(n,e,h,a,r,"data"),[n,e,h,a,r]),g=D.useMemo(()=>sw(n,e,h,a,r,"assets"),[n,e,h,a,r]),b=D.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,E=!1;if(e.forEach(C=>{var B;let O=a.routes[C.route.id];!O||!O.hasLoader||(!p.some(j=>j.route.id===C.route.id)&&C.route.id in f&&((B=l[C.route.id])!=null&&B.shouldRevalidate)||O.hasClientLoader?E=!0:x.add(C.route.id))}),x.size===0)return[];let _=jO(n,u,s.unstable_trailingSlashAwareDataRequests,"data");return E&&x.size>0&&_.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[u,s.unstable_trailingSlashAwareDataRequests,f,r,a,p,e,n,l]),v=D.useMemo(()=>UO(g,a),[g,a]),S=GO(g);return D.createElement(D.Fragment,null,b.map(x=>D.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>D.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),S.map(({key:x,link:E})=>D.createElement("link",{key:x,nonce:t.nonce,...E})))}function JO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WO&&(window.__reactRouterVersion="7.12.0")}catch{}function YO({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=D.useRef();s.current==null&&(s.current=OC({window:r,v5Compat:!0}));let a=s.current,[l,u]=D.useState({action:a.action,location:a.location}),f=D.useCallback(h=>{t===!1?u(h):D.startTransition(()=>u(h))},[t]);return D.useLayoutEffect(()=>a.listen(f),[a,f]),D.createElement(_O,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var GE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,is=D.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:u,target:f,to:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:b,...v},S){let{basename:x,unstable_useTransitions:E}=D.useContext(tr),_=typeof h=="string"&&GE.test(h),C=jE(h,x);h=C.to;let O=cO(h,{relative:s}),[B,j,P]=VO(r,v),U=eM(h,{replace:l,state:u,target:f,preventScrollReset:p,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:b,unstable_useTransitions:E});function F(de){e&&e(de),de.defaultPrevented||U(de)}let W=D.createElement("a",{...v,...P,href:C.absoluteURL||O,onClick:C.isExternal||a?e:F,ref:JO(S,j),target:f,"data-discover":!_&&t==="render"?"true":void 0});return B&&!_?D.createElement(D.Fragment,null,W,D.createElement(FO,{page:O})):W});is.displayName="Link";var XO=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:u,children:f,...h},p){let g=Ac(l,{relative:h.relative}),b=Or(),v=D.useContext(Md),{navigator:S,basename:x}=D.useContext(tr),E=v!=null&&sM(g)&&u===!0,_=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,C=b.pathname,O=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(C=C.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&x&&(O=di(O,x)||O);const B=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let j=C===_||!s&&C.startsWith(_)&&C.charAt(B)==="/",P=O!=null&&(O===_||!s&&O.startsWith(_)&&O.charAt(_.length)==="/"),U={isActive:j,isPending:P,isTransitioning:E},F=j?e:void 0,W;typeof r=="function"?W=r(U):W=[r,j?"active":null,P?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let de=typeof a=="function"?a(U):a;return D.createElement(is,{...h,"aria-current":F,className:W,ref:p,style:de,to:l,viewTransition:u},typeof f=="function"?f(U):f)});XO.displayName="NavLink";var QO=D.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=_f,action:u,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:b,...v},S)=>{let{unstable_useTransitions:x}=D.useContext(tr),E=rM(),_=iM(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&GE.test(u),B=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let P=j.nativeEvent.submitter,U=(P==null?void 0:P.getAttribute("formmethod"))||l,F=()=>E(P||j.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:a,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:b});x&&t!==!1?D.startTransition(()=>F()):F()};return D.createElement("form",{ref:S,method:C,action:_,onSubmit:r?f:B,...v,"data-discover":!O&&n==="render"?"true":void 0})});QO.displayName="Form";function ZO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KE(n){let e=D.useContext(Eo);return ot(e,ZO(n)),e}function eM(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let h=ia(),p=Or(),g=Ac(n,{relative:a});return D.useCallback(b=>{if(RO(b,e)){b.preventDefault();let v=t!==void 0?t:sc(p)===sc(g),S=()=>h(n,{replace:v,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u});f?D.startTransition(()=>S()):S()}},[p,h,g,t,r,e,n,s,a,l,u,f])}var tM=0,nM=()=>`__${String(++tM)}__`;function rM(){let{router:n}=KE("useSubmit"),{basename:e}=D.useContext(tr),t=wO(),r=n.fetch,s=n.navigate;return D.useCallback(async(a,l={})=>{let{action:u,method:f,encType:h,formData:p,body:g}=LO(a,e);if(l.navigate===!1){let b=l.fetcherKey||nM();await r(b,t,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function iM(n,{relative:e}={}){let{basename:t}=D.useContext(tr),r=D.useContext(Cr);ot(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Ac(n||".",{relative:e})},l=Or();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ci([t,a.pathname])),sc(a)}function sM(n,{relative:e}={}){let t=D.useContext(IE);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=KE("useViewTransitionState"),s=Ac(n,{relative:e});if(!t.isTransitioning)return!1;let a=di(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=di(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Lf(s.pathname,l)!=null||Lf(s.pathname,a)!=null}var aM=AE();const oM=ly(aM),aw=8,Zu=10,ef=80,lM=({index:n,heights:e,onHeightsChange:t,hoverColor:r})=>{const[s,a]=D.useState(!1),[l,u]=D.useState(!1),f=D.useRef(0),h=D.useRef([0,0]),p=D.useCallback(g=>{g.preventDefault(),a(!0),f.current=g.clientY,h.current=[...e]},[e]);return D.useEffect(()=>{if(!s)return;const g=v=>{const S=window.innerHeight;if(S<=0)return;const x=(v.clientY-f.current)/S*100,E=h.current,_=E[n],C=E[n+1],O=_+C;let B=Math.max(Zu,Math.min(ef,_+x)),j=O-B;j<Zu?(j=Zu,B=O-Zu):j>ef&&(j=ef,B=O-ef);const P=[...E];P[n]=B,P[n+1]=j,t(P)},b=()=>a(!1);return window.addEventListener("mousemove",g),window.addEventListener("mouseup",b),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",b)}},[s,n,t]),k.jsx("div",{role:"separator","aria-orientation":"horizontal",onMouseDown:p,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:"shrink-0 border-t border-paletteBorder cursor-row-resize select-none flex items-center justify-center transition-colors",style:{height:aw,minHeight:aw,backgroundColor:(l||s)&&r?r:void 0}})},cM=({rows:n,heights:e,onHeightsChange:t,sectionColors:r,className:s=""})=>k.jsx("div",{className:`flex flex-col gap-0 h-full overflow-hidden ${s}`,children:n.map((a,l)=>{const u=e[l]??100/n.length,f=n.length===1;return k.jsxs(bn.Fragment,{children:[k.jsx("div",{className:"shrink-0 overflow-hidden min-h-0",style:f?{height:"100%",minHeight:0}:{flex:`0 0 ${u}%`},children:a}),l<n.length-1&&k.jsx(lM,{index:l,heights:e,onHeightsChange:t,hoverColor:r==null?void 0:r[l]})]},l)})}),uM=48,gm=({className:n,rows:e,heights:t,onHeightsChange:r,sectionColors:s,topOffset:a=0})=>k.jsxs("div",{className:`flex flex-col shrink-0 h-full ${n}`,children:[a>0&&k.jsx("div",{style:{height:a},"aria-hidden":!0}),k.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:k.jsx(cM,{rows:e,heights:t,onHeightsChange:r,sectionColors:s})})]}),fM=({leftRows:n,middleRows:e,rightRows:t,leftHeights:r,middleHeights:s,rightHeights:a,onLeftHeightsChange:l,onMiddleHeightsChange:u,onRightHeightsChange:f,leftColors:h,middleColors:p,rightColors:g})=>k.jsxs("div",{className:"h-screen w-full flex overflow-hidden bg-bgMain text-textPrimary",children:[k.jsx(gm,{className:"w-[20%] min-w-[160px] bg-bgMain border-r border-paletteBorder",rows:n,heights:r,onHeightsChange:l,sectionColors:h,topOffset:uM}),k.jsx(gm,{className:"w-[40%] border-r border-paletteBorder",rows:e,heights:s,onHeightsChange:u,sectionColors:p}),k.jsx(gm,{className:"w-[40%]",rows:t,heights:a,onHeightsChange:f,sectionColors:g})]}),jf=({title:n,preview:e,to:t,hoverColor:r,className:s="",draggable:a=!0})=>{const[l,u]=D.useState(!1),f=`#${t.startsWith("/")?t:`/${t}`}`;return k.jsxs("a",{href:f,draggable:a,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:`block w-full h-full text-left overflow-hidden bg-bgMain relative group ${s}`,children:[k.jsx("div",{className:"absolute top-0 left-0 pl-6 pt-4 pr-4 pb-4 z-10",children:k.jsxs("span",{className:"relative inline-block pt-0 pb-1.5 pl-0 pr-3",children:[r&&l&&k.jsx("div",{className:"absolute inset-0 rounded-none",style:{backgroundColor:r}}),k.jsx("span",{className:"relative font-mono text-sm uppercase tracking-wider group-hover:underline underline-offset-2",children:n})]})}),k.jsx("div",{className:"absolute inset-0 pt-16",children:e})]})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:JE,setPrototypeOf:ow,isFrozen:dM,getPrototypeOf:hM,getOwnPropertyDescriptor:pM}=Object;let{freeze:sn,seal:er,create:hg}=Object,{apply:pg,construct:mg}=typeof Reflect<"u"&&Reflect;sn||(sn=function(e){return e});er||(er=function(e){return e});pg||(pg=function(e,t){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];return e.apply(t,s)});mg||(mg=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return new e(...r)});const tf=an(Array.prototype.forEach),mM=an(Array.prototype.lastIndexOf),lw=an(Array.prototype.pop),Ml=an(Array.prototype.push),gM=an(Array.prototype.splice),Af=an(String.prototype.toLowerCase),ym=an(String.prototype.toString),bm=an(String.prototype.match),Rl=an(String.prototype.replace),yM=an(String.prototype.indexOf),bM=an(String.prototype.trim),lr=an(Object.prototype.hasOwnProperty),nn=an(RegExp.prototype.test),Nl=vM(TypeError);function an(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return pg(n,e,r)}}function vM(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return mg(n,t)}}function Me(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Af;ow&&ow(n,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const a=t(s);a!==s&&(dM(e)||(e[r]=a),s=a)}n[s]=!0}return n}function SM(n){for(let e=0;e<n.length;e++)lr(n,e)||(n[e]=null);return n}function xr(n){const e=hg(null);for(const[t,r]of JE(n))lr(n,t)&&(Array.isArray(r)?e[t]=SM(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=xr(r):e[t]=r);return e}function Dl(n,e){for(;n!==null;){const r=pM(n,e);if(r){if(r.get)return an(r.get);if(typeof r.value=="function")return an(r.value)}n=hM(n)}function t(){return null}return t}const cw=sn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vm=sn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Sm=sn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wM=sn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wm=sn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xM=sn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),uw=sn(["#text"]),fw=sn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xm=sn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dw=sn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nf=sn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),EM=er(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TM=er(/<%[\w\W]*|[\w\W]*%>/gm),_M=er(/\$\{[\w\W]*/gm),kM=er(/^data-[\-\w.\u00B7-\uFFFF]+$/),AM=er(/^aria-[\-\w]+$/),WE=er(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CM=er(/^(?:\w+script|data):/i),OM=er(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YE=er(/^html$/i),MM=er(/^[a-z][.\w]*(-[.\w]+)+$/i);var hw=Object.freeze({__proto__:null,ARIA_ATTR:AM,ATTR_WHITESPACE:OM,CUSTOM_ELEMENT:MM,DATA_ATTR:kM,DOCTYPE_NAME:YE,ERB_EXPR:TM,IS_ALLOWED_URI:WE,IS_SCRIPT_OR_DATA:CM,MUSTACHE_EXPR:EM,TMPLIT_EXPR:_M});const Ll={element:1,text:3,progressingInstruction:7,comment:8,document:9},RM=function(){return typeof window>"u"?null:window},NM=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(r=t.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return e.createPolicy(a,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},pw=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function XE(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RM();const e=le=>XE(le);if(e.version="3.3.1",e.removed=[],!n||!n.document||n.document.nodeType!==Ll.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:l,Node:u,Element:f,NodeFilter:h,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:b,trustedTypes:v}=n,S=f.prototype,x=Dl(S,"cloneNode"),E=Dl(S,"remove"),_=Dl(S,"nextSibling"),C=Dl(S,"childNodes"),O=Dl(S,"parentNode");if(typeof l=="function"){const le=t.createElement("template");le.content&&le.content.ownerDocument&&(t=le.content.ownerDocument)}let B,j="";const{implementation:P,createNodeIterator:U,createDocumentFragment:F,getElementsByTagName:W}=t,{importNode:de}=r;let oe=pw();e.isSupported=typeof JE=="function"&&typeof O=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ke,ERB_EXPR:te,TMPLIT_EXPR:he,DATA_ATTR:Te,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:ee,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:Pe}=hw;let{IS_ALLOWED_URI:He}=hw,M=null;const J=Me({},[...cw,...vm,...Sm,...wm,...uw]);let Z=null;const ie=Me({},[...fw,...xm,...dw,...nf]);let ae=Object.seal(hg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,ze=null;const ct=Object.seal(hg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let nt=!0,Mr=!0,ps=!1,la=!0,Rr=!1,Ln=!0,nr=!1,ms=!1,Ao=!1,Nr=!1,mi=!1,gi=!1,ca=!0,Dc=!1;const Qd="user-content-";let Bt=!0,gs=!1,Dr={},Sn=null;const yi=Me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Lc=null;const Co=Me({},["audio","video","img","source","image","track"]);let Oo=null;const jc=Me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mr="http://www.w3.org/1998/Math/MathML",Nt="http://www.w3.org/2000/svg",Dt="http://www.w3.org/1999/xhtml";let vt=Dt,Mo=!1,Ro=null;const Zd=Me({},[mr,Nt,Dt],ym);let Lr=Me({},["mi","mo","mn","ms","mtext"]),jr=Me({},["annotation-xml"]);const ua=Me({},["title","style","font","a","script"]);let wn=null;const fa=["application/xhtml+xml","text/html"],ys="text/html";let mt=null,zr=null;const No=t.createElement("form"),bi=function(R){return R instanceof RegExp||R instanceof Function},Do=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(zr&&zr===R)){if((!R||typeof R!="object")&&(R={}),R=xr(R),wn=fa.indexOf(R.PARSER_MEDIA_TYPE)===-1?ys:R.PARSER_MEDIA_TYPE,mt=wn==="application/xhtml+xml"?ym:Af,M=lr(R,"ALLOWED_TAGS")?Me({},R.ALLOWED_TAGS,mt):J,Z=lr(R,"ALLOWED_ATTR")?Me({},R.ALLOWED_ATTR,mt):ie,Ro=lr(R,"ALLOWED_NAMESPACES")?Me({},R.ALLOWED_NAMESPACES,ym):Zd,Oo=lr(R,"ADD_URI_SAFE_ATTR")?Me(xr(jc),R.ADD_URI_SAFE_ATTR,mt):jc,Lc=lr(R,"ADD_DATA_URI_TAGS")?Me(xr(Co),R.ADD_DATA_URI_TAGS,mt):Co,Sn=lr(R,"FORBID_CONTENTS")?Me({},R.FORBID_CONTENTS,mt):yi,xe=lr(R,"FORBID_TAGS")?Me({},R.FORBID_TAGS,mt):xr({}),ze=lr(R,"FORBID_ATTR")?Me({},R.FORBID_ATTR,mt):xr({}),Dr=lr(R,"USE_PROFILES")?R.USE_PROFILES:!1,nt=R.ALLOW_ARIA_ATTR!==!1,Mr=R.ALLOW_DATA_ATTR!==!1,ps=R.ALLOW_UNKNOWN_PROTOCOLS||!1,la=R.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Rr=R.SAFE_FOR_TEMPLATES||!1,Ln=R.SAFE_FOR_XML!==!1,nr=R.WHOLE_DOCUMENT||!1,Nr=R.RETURN_DOM||!1,mi=R.RETURN_DOM_FRAGMENT||!1,gi=R.RETURN_TRUSTED_TYPE||!1,Ao=R.FORCE_BODY||!1,ca=R.SANITIZE_DOM!==!1,Dc=R.SANITIZE_NAMED_PROPS||!1,Bt=R.KEEP_CONTENT!==!1,gs=R.IN_PLACE||!1,He=R.ALLOWED_URI_REGEXP||WE,vt=R.NAMESPACE||Dt,Lr=R.MATHML_TEXT_INTEGRATION_POINTS||Lr,jr=R.HTML_INTEGRATION_POINTS||jr,ae=R.CUSTOM_ELEMENT_HANDLING||{},R.CUSTOM_ELEMENT_HANDLING&&bi(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&bi(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Rr&&(Mr=!1),mi&&(Nr=!0),Dr&&(M=Me({},uw),Z=[],Dr.html===!0&&(Me(M,cw),Me(Z,fw)),Dr.svg===!0&&(Me(M,vm),Me(Z,xm),Me(Z,nf)),Dr.svgFilters===!0&&(Me(M,Sm),Me(Z,xm),Me(Z,nf)),Dr.mathMl===!0&&(Me(M,wm),Me(Z,dw),Me(Z,nf))),R.ADD_TAGS&&(typeof R.ADD_TAGS=="function"?ct.tagCheck=R.ADD_TAGS:(M===J&&(M=xr(M)),Me(M,R.ADD_TAGS,mt))),R.ADD_ATTR&&(typeof R.ADD_ATTR=="function"?ct.attributeCheck=R.ADD_ATTR:(Z===ie&&(Z=xr(Z)),Me(Z,R.ADD_ATTR,mt))),R.ADD_URI_SAFE_ATTR&&Me(Oo,R.ADD_URI_SAFE_ATTR,mt),R.FORBID_CONTENTS&&(Sn===yi&&(Sn=xr(Sn)),Me(Sn,R.FORBID_CONTENTS,mt)),R.ADD_FORBID_CONTENTS&&(Sn===yi&&(Sn=xr(Sn)),Me(Sn,R.ADD_FORBID_CONTENTS,mt)),Bt&&(M["#text"]=!0),nr&&Me(M,["html","head","body"]),M.table&&(Me(M,["tbody"]),delete xe.tbody),R.TRUSTED_TYPES_POLICY){if(typeof R.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof R.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');B=R.TRUSTED_TYPES_POLICY,j=B.createHTML("")}else B===void 0&&(B=NM(v,s)),B!==null&&typeof j=="string"&&(j=B.createHTML(""));sn&&sn(R),zr=R}},Lo=Me({},[...vm,...Sm,...wM]),jo=Me({},[...wm,...xM]),zc=function(R){let X=O(R);(!X||!X.tagName)&&(X={namespaceURI:vt,tagName:"template"});const re=Af(R.tagName),$e=Af(X.tagName);return Ro[R.namespaceURI]?R.namespaceURI===Nt?X.namespaceURI===Dt?re==="svg":X.namespaceURI===mr?re==="svg"&&($e==="annotation-xml"||Lr[$e]):!!Lo[re]:R.namespaceURI===mr?X.namespaceURI===Dt?re==="math":X.namespaceURI===Nt?re==="math"&&jr[$e]:!!jo[re]:R.namespaceURI===Dt?X.namespaceURI===Nt&&!jr[$e]||X.namespaceURI===mr&&!Lr[$e]?!1:!jo[re]&&(ua[re]||!Lo[re]):!!(wn==="application/xhtml+xml"&&Ro[R.namespaceURI]):!1},cn=function(R){Ml(e.removed,{element:R});try{O(R).removeChild(R)}catch{E(R)}},rr=function(R,X){try{Ml(e.removed,{attribute:X.getAttributeNode(R),from:X})}catch{Ml(e.removed,{attribute:null,from:X})}if(X.removeAttribute(R),R==="is")if(Nr||mi)try{cn(X)}catch{}else try{X.setAttribute(R,"")}catch{}},zo=function(R){let X=null,re=null;if(Ao)R="<remove></remove>"+R;else{const Oe=bm(R,/^[\r\n\t ]+/);re=Oe&&Oe[0]}wn==="application/xhtml+xml"&&vt===Dt&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");const $e=B?B.createHTML(R):R;if(vt===Dt)try{X=new b().parseFromString($e,wn)}catch{}if(!X||!X.documentElement){X=P.createDocument(vt,"template",null);try{X.documentElement.innerHTML=Mo?j:$e}catch{}}const st=X.body||X.documentElement;return R&&re&&st.insertBefore(t.createTextNode(re),st.childNodes[0]||null),vt===Dt?W.call(X,nr?"html":"body")[0]:nr?X.documentElement:st},Io=function(R){return U.call(R.ownerDocument||R,R,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},jn=function(R){return R instanceof g&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof p)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"||typeof R.hasChildNodes!="function")},St=function(R){return typeof u=="function"&&R instanceof u};function rt(le,R,X){tf(le,re=>{re.call(e,R,X,zr)})}const Ir=function(R){let X=null;if(rt(oe.beforeSanitizeElements,R,null),jn(R))return cn(R),!0;const re=mt(R.nodeName);if(rt(oe.uponSanitizeElement,R,{tagName:re,allowedTags:M}),Ln&&R.hasChildNodes()&&!St(R.firstElementChild)&&nn(/<[/\w!]/g,R.innerHTML)&&nn(/<[/\w!]/g,R.textContent)||R.nodeType===Ll.progressingInstruction||Ln&&R.nodeType===Ll.comment&&nn(/<[/\w]/g,R.data))return cn(R),!0;if(!(ct.tagCheck instanceof Function&&ct.tagCheck(re))&&(!M[re]||xe[re])){if(!xe[re]&&Ic(re)&&(ae.tagNameCheck instanceof RegExp&&nn(ae.tagNameCheck,re)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(re)))return!1;if(Bt&&!Sn[re]){const $e=O(R)||R.parentNode,st=C(R)||R.childNodes;if(st&&$e){const Oe=st.length;for(let Ut=Oe-1;Ut>=0;--Ut){const zn=x(st[Ut],!0);zn.__removalCount=(R.__removalCount||0)+1,$e.insertBefore(zn,_(R))}}}return cn(R),!0}return R instanceof f&&!zc(R)||(re==="noscript"||re==="noembed"||re==="noframes")&&nn(/<\/no(script|embed|frames)/i,R.innerHTML)?(cn(R),!0):(Rr&&R.nodeType===Ll.text&&(X=R.textContent,tf([ke,te,he],$e=>{X=Rl(X,$e," ")}),R.textContent!==X&&(Ml(e.removed,{element:R.cloneNode()}),R.textContent=X)),rt(oe.afterSanitizeElements,R,null),!1)},da=function(R,X,re){if(ca&&(X==="id"||X==="name")&&(re in t||re in No))return!1;if(!(Mr&&!ze[X]&&nn(Te,X))){if(!(nt&&nn(q,X))){if(!(ct.attributeCheck instanceof Function&&ct.attributeCheck(X,R))){if(!Z[X]||ze[X]){if(!(Ic(R)&&(ae.tagNameCheck instanceof RegExp&&nn(ae.tagNameCheck,R)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(R))&&(ae.attributeNameCheck instanceof RegExp&&nn(ae.attributeNameCheck,X)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(X,R))||X==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&nn(ae.tagNameCheck,re)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(re))))return!1}else if(!Oo[X]){if(!nn(He,Rl(re,ge,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&R!=="script"&&yM(re,"data:")===0&&Lc[R])){if(!(ps&&!nn(ee,Rl(re,ge,"")))){if(re)return!1}}}}}}}return!0},Ic=function(R){return R!=="annotation-xml"&&bm(R,Pe)},Bc=function(R){rt(oe.beforeSanitizeAttributes,R,null);const{attributes:X}=R;if(!X||jn(R))return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z,forceKeepAttr:void 0};let $e=X.length;for(;$e--;){const st=X[$e],{name:Oe,namespaceURI:Ut,value:zn}=st,un=mt(Oe),gr=zn;let Ct=Oe==="value"?gr:bM(gr);if(re.attrName=un,re.attrValue=Ct,re.keepAttr=!0,re.forceKeepAttr=void 0,rt(oe.uponSanitizeAttribute,R,re),Ct=re.attrValue,Dc&&(un==="id"||un==="name")&&(rr(Oe,R),Ct=Qd+Ct),Ln&&nn(/((--!?|])>)|<\/(style|title|textarea)/i,Ct)){rr(Oe,R);continue}if(un==="attributename"&&bm(Ct,"href")){rr(Oe,R);continue}if(re.forceKeepAttr)continue;if(!re.keepAttr){rr(Oe,R);continue}if(!la&&nn(/\/>/i,Ct)){rr(Oe,R);continue}Rr&&tf([ke,te,he],Uo=>{Ct=Rl(Ct,Uo," ")});const Bo=mt(R.nodeName);if(!da(Bo,un,Ct)){rr(Oe,R);continue}if(B&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!Ut)switch(v.getAttributeType(Bo,un)){case"TrustedHTML":{Ct=B.createHTML(Ct);break}case"TrustedScriptURL":{Ct=B.createScriptURL(Ct);break}}if(Ct!==gr)try{Ut?R.setAttributeNS(Ut,Oe,Ct):R.setAttribute(Oe,Ct),jn(R)?cn(R):lw(e.removed)}catch{rr(Oe,R)}}rt(oe.afterSanitizeAttributes,R,null)},Uc=function le(R){let X=null;const re=Io(R);for(rt(oe.beforeSanitizeShadowDOM,R,null);X=re.nextNode();)rt(oe.uponSanitizeShadowNode,X,null),Ir(X),Bc(X),X.content instanceof a&&le(X.content);rt(oe.afterSanitizeShadowDOM,R,null)};return e.sanitize=function(le){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,re=null,$e=null,st=null;if(Mo=!le,Mo&&(le="<!-->"),typeof le!="string"&&!St(le))if(typeof le.toString=="function"){if(le=le.toString(),typeof le!="string")throw Nl("dirty is not a string, aborting")}else throw Nl("toString is not a function");if(!e.isSupported)return le;if(ms||Do(R),e.removed=[],typeof le=="string"&&(gs=!1),gs){if(le.nodeName){const zn=mt(le.nodeName);if(!M[zn]||xe[zn])throw Nl("root node is forbidden and cannot be sanitized in-place")}}else if(le instanceof u)X=zo("<!---->"),re=X.ownerDocument.importNode(le,!0),re.nodeType===Ll.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?X=re:X.appendChild(re);else{if(!Nr&&!Rr&&!nr&&le.indexOf("<")===-1)return B&&gi?B.createHTML(le):le;if(X=zo(le),!X)return Nr?null:gi?j:""}X&&Ao&&cn(X.firstChild);const Oe=Io(gs?le:X);for(;$e=Oe.nextNode();)Ir($e),Bc($e),$e.content instanceof a&&Uc($e.content);if(gs)return le;if(Nr){if(mi)for(st=F.call(X.ownerDocument);X.firstChild;)st.appendChild(X.firstChild);else st=X;return(Z.shadowroot||Z.shadowrootmode)&&(st=de.call(r,st,!0)),st}let Ut=nr?X.outerHTML:X.innerHTML;return nr&&M["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&nn(YE,X.ownerDocument.doctype.name)&&(Ut="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+Ut),Rr&&tf([ke,te,he],zn=>{Ut=Rl(Ut,zn," ")}),B&&gi?B.createHTML(Ut):Ut},e.setConfig=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Do(le),ms=!0},e.clearConfig=function(){zr=null,ms=!1},e.isValidAttribute=function(le,R,X){zr||Do({});const re=mt(le),$e=mt(R);return da(re,$e,X)},e.addHook=function(le,R){typeof R=="function"&&Ml(oe[le],R)},e.removeHook=function(le,R){if(R!==void 0){const X=mM(oe[le],R);return X===-1?void 0:gM(oe[le],X,1)[0]}return lw(oe[le])},e.removeHooks=function(le){oe[le]=[]},e.removeAllHooks=function(){oe=pw()},e}var DM=XE();const LM=["p","h1","h2","h3","blockquote","strong","em","u","a","br","span"],jM=["href","target","rel","style"];function zM(n){return n!=null&&n.trim()?DM.sanitize(n,{ALLOWED_TAGS:LM,ALLOWED_ATTR:jM,ADD_ATTR:["target","rel"]}):""}function gg(n){return n!=null&&n.trim()?/<[a-z][\s\S]*>/i.test(n)?n:n.split(/\n\n+/).map(t=>t.trim()).filter(Boolean).map(t=>`<p>${IM(t)}</p>`).join("")||"<p></p>":"<p></p>"}function IM(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function BM(n){return n!=null&&n.trim()?/<[a-z][\s\S]*>/i.test(n)?n:gg(n):""}const py=({html:n,className:e,style:t})=>{const r=BM(n),s=zM(r);return s?k.jsx("div",{className:`${e??""} [&_p]:min-h-[1.5em]`,style:t,dangerouslySetInnerHTML:{__html:s}}):null},UM=24,PM=({text:n})=>{const e=D.useRef(null),[t,r]=D.useState(1);D.useEffect(()=>{const l=e.current;if(!l)return;const u=new ResizeObserver(f=>{for(const h of f){const{height:p}=h.contentRect,g=Math.max(1,Math.floor(p/UM));r(g)}});return u.observe(l),()=>u.disconnect()},[]);const a=!((n==null?void 0:n.trim())||"");return k.jsx("div",{ref:e,className:"h-full w-full overflow-hidden pl-6 pr-4 mt-4",children:a?k.jsx("p",{className:"text-sm text-textSecondary leading-relaxed",children:"Introduction"}):k.jsx(py,{html:n,className:"text-base leading-relaxed text-textPrimary",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:t,overflow:"hidden"}})})},Nd={accent:"#66FFCC"},HM=768,yg={aboutMe:`Silvia (b 1999) is a London-based fine art photographer whose work interrogates the fluid boundaries between the tangible and the perceived. A graduate of Central Saint Martins, she has pivoted from the structural rigour of fashion towards a more ephemeral exploration of the 'shifted concept'  capturing the weight of a glance within a fleeting moment.

Her practice is deeply rooted in travel and the quiet observation of nature and still life. By isolating objects from their traditional contexts, Silvia creates unreal spaces where philosophical enquiry and visual subtlety converge. For her, the camera is not a tool for documentation, but a medium for leaping between states of being.`,projects:[{id:"twice",title:"TWICE",description:`Twice is a series of diptych film photographs exploring the fragility of memory and the quiet dissonances embedded in everyday life.

Heraclitus observed that no one steps into the same river twice  not because the river changes, but because both the river and the person are always becoming something else. Memory operates similarly. We return to it expecting repetition and find instead a thing subtly altered, a detail misplaced, a feeling that no longer quite fits the image it belongs to.

Each photograph in this series pairs two frames that appear, at first glance, identical. They are not. The differences between them  sometimes stark, sometimes barely perceptible  enact the unreliability of recollection itself. Within individual images, too, there are misfits: objects and moments that resist the coherence of the scenes they inhabit, held in place by some invisible thread rather than any clear logic.

Shot on film, the series embraces the medium's own relationship with time and imperfection  its grain, its slight unpredictability  as formal extensions of the theme. Memory, like film, is a chemical process. It changes with exposure.`,imageUrl:"",gallery:[],year:"2025"}]},$M="silvia_admin",ho="sphnsx_admin_authenticated",qM=1440*60*1e3;function VM(){if(typeof localStorage>"u")return null;const n=localStorage.getItem(ho);return n||sessionStorage.getItem(ho)}function FM(n){try{localStorage.setItem(ho,n)}catch{}try{sessionStorage.setItem(ho,n)}catch{}}function Em(){try{localStorage.removeItem(ho),sessionStorage.removeItem(ho)}catch{}}const QE=D.createContext(null);function GM({children:n}){const[e,t]=D.useState(!1);D.useEffect(()=>{const a=VM();if(a)try{const{timestamp:l}=JSON.parse(a);Date.now()-l<qM?t(!0):Em()}catch{Em()}},[]);const r=D.useCallback(a=>{const l=a===$M;return l&&(t(!0),FM(JSON.stringify({timestamp:Date.now()}))),l},[]),s=D.useCallback(()=>{Em(),t(!1)},[]);return k.jsx(QE.Provider,{value:{isAdmin:e,login:r,logout:s},children:n})}function sa(){const n=D.useContext(QE);if(!n)throw new Error("useAdminAuth must be used within AdminAuthProvider");return n}function Dd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function KM(n,e,t,r){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{h(r.next(p))}catch(g){l(g)}}function f(p){try{h(r.throw(p))}catch(g){l(g)}}function h(p){p.done?a(p.value):s(p.value).then(u,f)}h((r=r.apply(n,e||[])).next())})}const JM=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class my extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class WM extends my{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mw extends my{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gw extends my{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(bg||(bg={}));class YM{constructor(e,{headers:t={},customFetch:r,region:s=bg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=JM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return KM(this,arguments,void 0,function*(t,r={}){var s;let a,l;try{const{headers:u,method:f,body:h,signal:p,timeout:g}=r;let b={},{region:v}=r;v||(v=this.region);const S=new URL(`${this.url}/${t}`);v&&v!=="any"&&(b["x-region"]=v,S.searchParams.set("forceFunctionRegion",v));let x;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(b["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(b["Content-Type"]="application/json",x=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?x=JSON.stringify(h):x=h;let E=p;g&&(l=new AbortController,a=setTimeout(()=>l.abort(),g),p?(E=l.signal,p.addEventListener("abort",()=>l.abort())):E=l.signal);const _=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),u),body:x,signal:E}).catch(j=>{throw new WM(j)}),C=_.headers.get("x-relay-error");if(C&&C==="true")throw new mw(_);if(!_.ok)throw new gw(_);let O=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),B;return O==="application/json"?B=yield _.json():O==="application/octet-stream"||O==="application/pdf"?B=yield _.blob():O==="text/event-stream"?B=_:O==="multipart/form-data"?B=yield _.formData():B=yield _.text(),{data:B,error:null,response:_}}catch(u){return{data:null,error:u,response:u instanceof gw||u instanceof mw?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var XM=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},QM=class{constructor(n){var e,t,r;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(r=n.urlLengthLimit)!==null&&r!==void 0?r:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,f=null,h=a.status,p=a.statusText;if(a.ok){var g,b;if(t.method!=="HEAD"){var v;const _=await a.text();_===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((v=t.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=_:u=JSON.parse(_))}const x=(g=t.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),E=(b=a.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");x&&E&&E.length>1&&(f=parseInt(E[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var S;const x=await a.text();try{l=JSON.parse(x),Array.isArray(l)&&a.status===404&&(u=[],l=null,h=200,p="OK")}catch{a.status===404&&x===""?(h=204,p="No Content"):l={message:x}}if(l&&t.isMaybeSingle&&(!(l==null||(S=l.details)===null||S===void 0)&&S.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&t.shouldThrowOnError)throw new XM(l)}return{error:l,data:u,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var l;let u="",f="",h="";const p=a==null?void 0:a.cause;if(p){var g,b,v,S;const _=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",C=(b=p==null?void 0:p.code)!==null&&b!==void 0?b:"";u=`${(v=a==null?void 0:a.name)!==null&&v!==void 0?v:"FetchError"}: ${a==null?void 0:a.message}`,u+=`

Caused by: ${(S=p==null?void 0:p.name)!==null&&S!==void 0?S:"Error"}: ${_}`,C&&(u+=` (${C})`),p!=null&&p.stack&&(u+=`
${p.stack}`)}else{var x;u=(x=a==null?void 0:a.stack)!==null&&x!==void 0?x:""}const E=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(h="",f="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(f+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",f="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(f+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:u,hint:f,code:h},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},ZM=class extends QM{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(a,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var l;const u=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${f}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const yw=new RegExp("[,()]");var eo=class extends ZM{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&yw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&yw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${a}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},eR=class{constructor(n,{headers:e={},schema:t,fetch:r,urlLengthLimit:s=8e3}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:r}=e??{},s=t?"HEAD":"GET";let a=!1;const l=(n??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join(""),{url:u,headers:f}=this.cloneRequestState();return u.searchParams.set("select",l),r&&f.append("Prefer",`count=${r}`),new eo({method:s,url:u,headers:f,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const s="POST",{url:a,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),t||l.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);a.searchParams.set("columns",f.join(","))}}return new eo({method:s,url:a,headers:l,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){var a;const l="POST",{url:u,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&f.append("Prefer",`count=${r}`),s||f.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);u.searchParams.set("columns",p.join(","))}}return new eo({method:l,url:u,headers:f,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:e}={}){var t;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new eo({method:r,url:s,headers:a,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var e;const t="DELETE",{url:r,headers:s}=this.cloneRequestState();return n&&s.append("Prefer",`count=${n}`),new eo({method:t,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function ac(n){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(n)}function tR(n,e){if(ac(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nR(n){var e=tR(n,"string");return ac(e)=="symbol"?e:e+""}function rR(n,e,t){return(e=nR(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function rf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bw(Object(t),!0).forEach(function(r){rR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var iR=class ZE{constructor(e,{headers:t={},schema:r,fetch:s,timeout:a,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.urlLengthLimit=l;const u=s??globalThis.fetch;a!==void 0&&a>0?this.fetch=(f,h)=>{const p=new AbortController,g=setTimeout(()=>p.abort(),a),b=h==null?void 0:h.signal;if(b){if(b.aborted)return clearTimeout(g),u(f,h);const v=()=>{clearTimeout(g),p.abort()};return b.addEventListener("abort",v,{once:!0}),u(f,rf(rf({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(g),b.removeEventListener("abort",v)})}return u(f,rf(rf({},h),{},{signal:p.signal})).finally(()=>clearTimeout(g))}:this.fetch=u}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new eR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new ZE(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var l;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),g=r&&Object.values(t).some(p);g?(u="POST",h=t):r||s?(u=r?"HEAD":"GET",Object.entries(t).filter(([v,S])=>S!==void 0).map(([v,S])=>[v,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([v,S])=>{f.searchParams.append(v,S)})):(u="POST",h=t);const b=new Headers(this.headers);return g?b.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&b.set("Prefer",`count=${a}`),new eo({method:u,url:f,headers:b,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class sR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const r=t.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const aR="2.97.0",oR=`realtime-js/${aR}`,lR="1.0.0",e1="2.0.0",vw=e1,vg=1e4,cR=1e3,uR=100;var Vi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vi||(Vi={}));var Mt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Mt||(Mt={}));var ur;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ur||(ur={}));var Sg;(function(n){n.websocket="websocket"})(Sg||(Sg={}));var Us;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Us||(Us={}));class fR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,r){var s,a;const l=e.topic,u=(s=e.ref)!==null&&s!==void 0?s:"",f=(a=e.join_ref)!==null&&a!==void 0?a:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(p).length===0?"":JSON.stringify(p);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+l.length+h.length+g.length,v=new ArrayBuffer(this.HEADER_LENGTH+b);let S=new DataView(v),x=0;S.setUint8(x++,this.KINDS.userBroadcastPush),S.setUint8(x++,f.length),S.setUint8(x++,u.length),S.setUint8(x++,l.length),S.setUint8(x++,h.length),S.setUint8(x++,g.length),S.setUint8(x++,t),Array.from(f,_=>S.setUint8(x++,_.charCodeAt(0))),Array.from(u,_=>S.setUint8(x++,_.charCodeAt(0))),Array.from(l,_=>S.setUint8(x++,_.charCodeAt(0))),Array.from(h,_=>S.setUint8(x++,_.charCodeAt(0))),Array.from(g,_=>S.setUint8(x++,_.charCodeAt(0)));var E=new Uint8Array(v.byteLength+r.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(r),v.byteLength),E.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,a,l,u,f]=r;return t({join_ref:s,ref:a,topic:l,event:u,payload:f})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),a=t.getUint8(2),l=t.getUint8(3),u=t.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+s));f=f+s;const p=r.decode(e.slice(f,f+a));f=f+a;const g=r.decode(e.slice(f,f+l));f=f+l;const b=e.slice(f,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,S={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(S.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class t1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Qe||(Qe={}));const Sw=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=dR(l,n,e,s),a),{}):{}},dR=(n,e,t,r)=>{const s=e.find(u=>u.name===n),a=s==null?void 0:s.type,l=t[n];return a&&!r.includes(a)?n1(a,l):wg(l)},n1=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return gR(e,t)}switch(n){case Qe.bool:return hR(e);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return pR(e);case Qe.json:case Qe.jsonb:return mR(e);case Qe.timestamp:return yR(e);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return wg(e);default:return wg(e)}},wg=n=>n,hR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},pR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},mR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},gR=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>n1(e,u))}return n},yR=n=>typeof n=="string"?n.replace(" ","T"):n,r1=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Tm{constructor(e,t,r={},s=vg){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ww;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ww||(ww={}));class Gl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,s,a,l),this.pendingDiffs.forEach(f=>{this.state=Gl.syncDiff(this.state,f,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gl.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const a=this.cloneDeep(e),l=this.transformState(t),u={},f={};return this.map(a,(h,p)=>{l[h]||(f[h]=p)}),this.map(l,(h,p)=>{const g=a[h];if(g){const b=p.map(E=>E.presence_ref),v=g.map(E=>E.presence_ref),S=p.filter(E=>v.indexOf(E.presence_ref)<0),x=g.filter(E=>b.indexOf(E.presence_ref)<0);S.length>0&&(u[h]=S),x.length>0&&(f[h]=x)}else u[h]=p}),this.syncDiff(a,{joins:u,leaves:f},r,s)}static syncDiff(e,t,r,s){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const g=e[u].map(v=>v.presence_ref),b=p.filter(v=>g.indexOf(v.presence_ref)<0);e[u].unshift(...b)}r(u,p,f)}),this.map(l,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,s(u,h,f),h.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xw||(xw={}));var Kl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Kl||(Kl={}));var ai;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ai||(ai={}));class ao{constructor(e,t={config:{}},r){var s,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Tm(this,ur.join,this.params,this.timeout),this.rejoinTimer=new t1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ur.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Gl(this),this.broadcastEndpointURL=r1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Kl.PRESENCE]&&this.bindings[Kl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},b={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(ai.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(ai.CLOSED)),this.updateJoinPayload(Object.assign({config:b},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e==null||e(ai.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,E=(S=x==null?void 0:x.length)!==null&&S!==void 0?S:0,_=[];for(let C=0;C<E;C++){const O=x[C],{filter:{event:B,schema:j,table:P,filter:U}}=O,F=v&&v[C];if(F&&F.event===B&&ao.isFilterValueEqual(F.schema,j)&&ao.isFilterValueEqual(F.table,P)&&ao.isFilterValueEqual(F.filter,U))_.push(Object.assign(Object.assign({},O),{id:F.id}));else{this.unsubscribe(),this.state=Mt.errored,e==null||e(ai.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ai.SUBSCRIBED);return}}).receive("error",v=>{this.state=Mt.errored,e==null||e(ai.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ai.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Mt.joined&&e===Kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,f;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ur.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Tm(this,ur.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Tm(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uR){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,a;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=ur;if(r&&[u,f,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let b=this._onMessage(l,t,r);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var S,x,E;return((S=v.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(x=v.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(b,r)):(a=this.bindings[l])===null||a===void 0||a.filter(v=>{var S,x,E,_,C,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const B=v.id,j=(S=v.filter)===null||S===void 0?void 0:S.event;return B&&((x=t.ids)===null||x===void 0?void 0:x.includes(B))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const B=(C=(_=v==null?void 0:v.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return B==="*"||B===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:x,table:E,commit_timestamp:_,type:C,errors:O}=S;b=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:_,eventType:C,new:{},old:{},errors:O}),this._getPayloadRecords(S))}v.callback(b,r)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ao.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ur.close,{},e)}_onError(e){this._on(ur.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Sw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Sw(e.columns,e.old_record)),t}}const _m=()=>{},sf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bR=[1e3,2e3,5e3,1e4],vR=1e4,SR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wR{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vg,this.transport=null,this.heartbeatIntervalMs=sf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_m,this.ref=0,this.reconnectTimer=null,this.vsn=vw,this.logger=_m,this.conn=null,this.sendBuffer=[],this.serializer=new fR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Sg.websocket}`,this.httpEndpoint=r1(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return Us.Connecting;case Vi.open:return Us.Open;case Vi.closing:return Us.Closing;default:return Us.Closed}}isConnected(){return this.connectionState()===Us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new ao(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:s,ref:a}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${t} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(cR,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},sf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:l}=t,u=l?`(${l})`:"",f=a.status||"";this.log("receive",`${f} ${r} ${s} ${u}`.trim(),a),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,a,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vi.open||this.conn.readyState===Vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ur.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([SR],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:oR};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(ur.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new t1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,a,l,u,f,h,p,g,b,v;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:vg,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:sf.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:_m,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:vw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(S=>bR[S-1]||vR),this.vsn){case lR:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((S,x)=>x(JSON.stringify(S))),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:((S,x)=>x(JSON.parse(S)));break;case e1:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var oc=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xR(n,e,t){const r=new URL(e,n);if(t)for(const[s,a]of Object.entries(t))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function ER(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function TR(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:a,headers:l}){const u=xR(n.baseUrl,r,s),f=await ER(n.auth),h=await e(u,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...f,...l},body:a?JSON.stringify(a):void 0}),p=await h.text(),g=(h.headers.get("content-type")||"").includes("application/json"),b=g&&p?JSON.parse(p):p;if(!h.ok){const v=g?b:void 0,S=v==null?void 0:v.error;throw new oc((S==null?void 0:S.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:v})}return{status:h.status,headers:h.headers,data:b}}}}function af(n){return n.join("")}var _R=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:af(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${af(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${af(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${af(n.namespace)}`}),!0}catch(e){if(e instanceof oc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof oc&&t.status===409)return;throw t}}};function Ga(n){return n.join("")}var kR=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ga(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof oc&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof oc&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},AR=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=TR({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new _R(this.client,e),this.tableOps=new kR(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Ld=class extends Error{constructor(n,e="storage",t,r){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=r}};function jd(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var of=class extends Ld{constructor(n,e,t,r="storage"){super(n,r,e,t),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},i1=class extends Ld{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const CR=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),OR=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xg=n=>{if(Array.isArray(n))return n.map(t=>xg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=xg(r)}),e},MR=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function lc(n){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(n)}function RR(n,e){if(lc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NR(n){var e=RR(n,"string");return lc(e)=="symbol"?e:e+""}function DR(n,e,t){return(e=NR(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ew(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function be(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ew(Object(t),!0).forEach(function(r){DR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ew(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Tw=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},LR=async(n,e,t,r)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n,a=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";e(new of(Tw(l),a,u,r))}).catch(()=>{if(r==="vectors"){const l=a+"";e(new of(s.statusText||`HTTP ${a} error`,a,l,r))}else{const l=a+"";e(new of(s.statusText||`HTTP ${a} error`,a,l,r))}});else{const l=a+"";e(new of(s.statusText||`HTTP ${a} error`,a,l,r))}}else e(new i1(Tw(n),n,r))},jR=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||n==="HEAD"||!r?be(be({},s),t):(OR(r)?(s.headers=be({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),be(be({},s),t))};async function jl(n,e,t,r,s,a,l){return new Promise((u,f)=>{n(t,jR(e,r,s,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>LR(h,f,r,l))})}function s1(n="storage"){return{get:async(e,t,r,s)=>jl(e,"GET",t,r,s,void 0,n),post:async(e,t,r,s,a)=>jl(e,"POST",t,s,a,r,n),put:async(e,t,r,s,a)=>jl(e,"PUT",t,s,a,r,n),head:async(e,t,r,s)=>jl(e,"HEAD",t,be(be({},r),{},{noResolveJson:!0}),s,void 0,n),remove:async(e,t,r,s,a)=>jl(e,"DELETE",t,s,a,r,n)}}const zR=s1("storage"),{get:cc,post:cr,put:Eg,head:IR,remove:gy}=zR,Mn=s1("vectors");var To=class{constructor(n,e={},t,r="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=CR(t),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=be(be({},this.headers),{},{[n]:e}),this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jd(t))return{data:null,error:t};throw t}}},BR=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(jd(e))return{data:null,error:e};throw e}}};let a1;a1=Symbol.toStringTag;var UR=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[a1]="BlobDownloadBuilder",this.promise=null}asStream(){return new BR(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(jd(e))return{data:null,error:e};throw e}}};const PR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_w={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var HR=class extends To{constructor(n,e={},t,r){super(n,e,r,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,r){var s=this;return s.handleOperation(async()=>{let a;const l=be(be({},_w),r);let u=be(be({},s.headers),n==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",s.encodeMetadata(f)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),f&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(f))):(a=t,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(f))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=be(be({},u),r.headers));const h=s._removeEmptyFolders(e),p=s._getFinalPath(h),g=await(n=="PUT"?Eg:cr)(s.fetch,`${s.url}/object/${p}`,a,be({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:g.Id,fullPath:g.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var s=this;const a=s._removeEmptyFolders(n),l=s._getFinalPath(a),u=new URL(s.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),s.handleOperation(async()=>{let f;const h=be({upsert:_w.upsert},r),p=be(be({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&t instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",t)):typeof FormData<"u"&&t instanceof FormData?(f=t,f.append("cacheControl",h.cacheControl)):(f=t,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:a,fullPath:(await Eg(s.fetch,u.toString(),f,{headers:p})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let r=t._getFinalPath(n);const s=be({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const a=await cr(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(t.url+a.url),u=l.searchParams.get("token");if(!u)throw new Ld("No token returned by API");return{signedUrl:l.toString(),path:n,token:u}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;return r.handleOperation(async()=>await cr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}))}async copy(n,e,t){var r=this;return r.handleOperation(async()=>({path:(await cr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(n,e,t){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(n),a=await cr(r.fetch,`${r.url}/object/sign/${s}`,be({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)}})}async createSignedUrls(n,e,t){var r=this;return r.handleOperation(async()=>{const s=await cr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s.map(l=>be(be({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null}))})}download(n,e,t){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",l=this._getFinalPath(n),u=()=>cc(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0},t);return new UR(u,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>xg(await cc(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await IR(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(jd(r)&&r instanceof i1){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${u}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await gy(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var r=this;return r.handleOperation(async()=>{const s=be(be(be({},PR),e),{},{prefix:n||""});return await cr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const r=be({},n);return await cr(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const $R="2.97.0",Cc={"X-Client-Info":`storage-js/${$R}`};var qR=class extends To{constructor(n,e={},t,r){const s=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),l=be(be({},Cc),e);super(a,l,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await cc(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await cc(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await cr(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await Eg(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await cr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await gy(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},VR=class extends To{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=be(be({},Cc),e);super(r,s,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await cr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await cc(e.fetch,s,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await gy(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!MR(n))throw new Ld("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new AR({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(s,a){const l=s[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}},FR=class extends To{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=be(be({},Cc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await Mn.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await Mn.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},GR=class extends To{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=be(be({},Cc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},KR=class extends To{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=be(be({},Cc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Mn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},JR=class extends KR{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new WR(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},WR=class extends FR{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new YR(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},YR=class extends GR{constructor(n,e,t,r,s){super(n,e,s),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},XR=class extends qR{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new HR(this.url,this.headers,n,this.fetch)}get vectors(){return new JR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new VR(this.url+"/iceberg",this.headers,this.fetch)}};const o1="2.97.0",to=30*1e3,Tg=3,km=Tg*to,QR="http://localhost:9999",ZR="supabase.auth.token",eN={"X-Client-Info":`gotrue-js/${o1}`},_g="X-Supabase-Api-Version",l1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nN=600*1e3;class uc extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ue(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class rN extends uc{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function iN(n){return ue(n)&&n.name==="AuthApiError"}class Ps extends uc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class hi extends uc{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class On extends hi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Am(n){return ue(n)&&n.name==="AuthSessionMissingError"}class Ka extends hi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lf extends hi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cf extends hi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sN(n){return ue(n)&&n.name==="AuthImplicitGrantRedirectError"}class kw extends hi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class aN extends hi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class kg extends hi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Cm(n){return ue(n)&&n.name==="AuthRetryableFetchError"}class Aw extends hi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ag extends hi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cw=` 	
\r=`.split(""),oN=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Cw.length;e+=1)n[Cw[e].charCodeAt(0)]=-2;for(let e=0;e<zf.length;e+=1)n[zf[e].charCodeAt(0)]=e;return n})();function Ow(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(zf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(zf[r]),e.queuedBits-=6}}function c1(n,e,t){const r=oN[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Mw(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{uN(l,r,t)};for(let l=0;l<n.length;l+=1)c1(n.charCodeAt(l),s,a);return e.join("")}function lN(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function cN(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}lN(r,e)}}function uN(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function co(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)c1(n.charCodeAt(s),t,r);return new Uint8Array(e)}function fN(n){const e=[];return cN(n,t=>e.push(t)),new Uint8Array(e)}function $s(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Ow(s,t,r)),Ow(null,t,r),e.join("")}function dN(n){return Math.round(Date.now()/1e3)+n}function hN(){return Symbol("auth-callback")}const Ft=()=>typeof window<"u"&&typeof document<"u",Ls={tested:!1,writable:!1},u1=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ls.tested)return Ls.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ls.tested=!0,Ls.writable=!0}catch{Ls.tested=!0,Ls.writable=!1}return Ls.writable};function pN(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const f1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),mN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",no=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},js=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Vt=async(n,e)=>{await n.removeItem(e)};class zd{constructor(){this.promise=new zd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}zd.promiseConstructor=Promise;function uf(n){const e=n.split(".");if(e.length!==3)throw new Ag("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!tN.test(e[r]))throw new Ag("JWT not in base64url format");return{header:JSON.parse(Mw(e[0])),payload:JSON.parse(Mw(e[1])),signature:co(e[2]),raw:{header:e[0],payload:e[1]}}}async function gN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function yN(n,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function bN(n){return("0"+n.toString(16)).substr(-2)}function vN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let a=0;a<56;a++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,bN).join("")}async function SN(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function wN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await SN(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ja(n,e,t=!1){const r=vN();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await no(n,`${e}-code-verifier`,s);const a=await wN(r);return[a,r===a?"plain":"s256"]}const xN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EN(n){const e=n.headers.get(_g);if(!e||!e.match(xN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function TN(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function _N(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wa(n){if(!kN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Om(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AN(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function Rw(n){return JSON.parse(JSON.stringify(n))}const Bs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),CN=[502,503,504];async function Nw(n){var e;if(!mN(n))throw new kg(Bs(n),0);if(CN.includes(n.status))throw new kg(Bs(n),n.status);let t;try{t=await n.json()}catch(a){throw new Ps(Bs(a),a)}let r;const s=EN(n);if(s&&s.getTime()>=l1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Aw(Bs(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new On}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Aw(Bs(t),n.status,t.weak_password.reasons);throw new rN(Bs(t),n.status||500,r)}const ON=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function ve(n,e,t,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[_g]||(a[_g]=l1["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await MN(n,e,t+u,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function MN(n,e,t,r,s,a){const l=ON(e,r,s,a);let u;try{u=await n(t,Object.assign({},l))}catch(f){throw console.error(f),new kg(Bs(f),0)}if(u.ok||await Nw(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await Nw(f)}}function or(n){var e;let t=null;DN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=dN(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Dw(n){const e=or(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ji(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function RN(n){return{data:n,error:null}}function NN(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:a}=n,l=Dd(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:a},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function Lw(n){return n}function DN(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mm=["global","local","others"];class LN{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=f1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Mm[0]){if(Mm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mm.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ji})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Dd(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NN,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ue(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ji})}catch(t){if(ue(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,a,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Lw});if(p.error)throw p.error;const g=await p.json(),b=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=x}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Wa(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ji})}catch(t){if(ue(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Wa(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ji})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Wa(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ji})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Wa(e.userId);try{const{data:t,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ue(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Wa(e.userId),Wa(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ue(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,a,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Lw});if(p.error)throw p.error;const g=await p.json(),b=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=x}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ue(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ue(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ue(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ue(t))return{data:null,error:t};throw t}}}function jw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Ya={debug:!!(globalThis&&u1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zw extends d1{}async function jN(n,e,t){Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;e>0&&setTimeout(()=>{r.abort(),Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new zw(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ya.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new zw(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${e}ms`):s}}function zN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function h1(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function IN(n){return parseInt(n,16)}function BN(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function UN(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:f,resources:h,scheme:p,uri:g,version:b}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const v=h1(n.address),S=p?`${p}://${r}`:r,x=n.statement?`${n.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${v}

${x}`;let _=`URI: ${g}
Version: ${b}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),f&&(_+=`
Request ID: ${f}`),h){let C=`
Resources:`;for(const O of h){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);C+=`
- ${O}`}_+=C}return`${E}
${_}`}class _t extends Error{constructor({message:e,code:t,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class If extends _t{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function PN({error:n,options:e}){var t,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(p1(l)){if(a.rp.id!==l)return new _t({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function HN({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(p1(r)){if(t.rpId!==r)return new _t({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class $N{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qN=new $N;function VN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Dd(n,["challenge","user","excludeCredentials"]),a=co(e).buffer,l=Object.assign(Object.assign({},t),{id:co(t.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:co(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function FN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Dd(n,["challenge","allowCredentials"]),s=co(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:co(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function GN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:$s(new Uint8Array(n.response.attestationObject)),clientDataJSON:$s(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function KN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:$s(new Uint8Array(s.authenticatorData)),clientDataJSON:$s(new Uint8Array(s.clientDataJSON)),signature:$s(new Uint8Array(s.signature)),userHandle:s.userHandle?$s(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function p1(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Iw(){var n,e;return!!(Ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function JN(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new If("Browser returned unexpected credential type",e)}:{data:null,error:new If("Empty credential response",e)}}catch(e){return{data:null,error:PN({error:e,options:n})}}}async function WN(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new If("Browser returned unexpected credential type",e)}:{data:null,error:new If("Empty credential response",e)}}catch(e){return{data:null,error:HN({error:e,options:n})}}}const YN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},XN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bf(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(t(l))r[a]=l;else if(e(l)){const u=r[a];e(u)?r[a]=Bf(u,l):r[a]=Bf(l)}else r[a]=l}return r}function QN(n,e){return Bf(YN,n,e||{})}function ZN(n,e){return Bf(XN,n,e||{})}class eD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},a){var l;try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:f};const h=s??qN.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const g=r;if(g)p.name=`${p.id}:${g}`;else{const v=(await this.client.getUser()).data.user,S=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${S}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=QN(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:b}=await JN({publicKey:p,signal:h});return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}case"request":{const p=ZN(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:b}=await WN(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new Ps("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!t)return{data:null,error:new uc("rpId is required for WebAuthn authentication")};try{if(!Iw())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:f}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:r,credential_response:f.credential_response}})}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new Ps("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!t)return{data:null,error:new uc("rpId is required for WebAuthn registration")};try{if(!Iw())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:a});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new Ps("Unexpected error in register",l)}}}}zN();const tD={url:QR,storageKey:ZR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Bw(n,e,t){return await t()}const Xa={};class fc{get jwks(){var e,t;return(t=(e=Xa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Xa[this.storageKey]=Object.assign(Object.assign({},Xa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Xa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xa[this.storageKey]=Object.assign(Object.assign({},Xa[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},tD),e);if(this.storageKey=a.storageKey,this.instanceID=(t=fc.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,fc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ft()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new LN({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=f1(a.fetch),this.lock=a.lock||Bw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Ft()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=jN:this.lock=Bw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new eD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:u1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=jw(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}a.skipAutoInitialize||this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${o1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(Ft()&&(t=pN(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Ft()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),sN(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ue(t)?this._returnResult({error:t}):this._returnResult({error:new Ps("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:or}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,s;try{let a;if("email"in e){const{email:p,password:g,options:b}=e;let v=null,S=null;this.flowType==="pkce"&&([v,S]=await Ja(this.storage,this.storageKey)),a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:p,password:g,data:(t=b==null?void 0:b.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:v,code_challenge_method:S},xform:or})}else if("phone"in e){const{phone:p,password:g,options:b}=e;a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(s=b==null?void 0:b.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:or})}else throw new lf("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await Vt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:u}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Dw})}else if("phone"in e){const{phone:a,password:l,options:u}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Dw})}else throw new lf("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Ka;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,a,l,u,f,h,p,g,b;let v,S;if("message"in e)v=e.message,S=e.signature;else{const{chain:x,wallet:E,statement:_,options:C}=e;let O;if(Ft())if(typeof E=="object")O=E;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")O=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const B=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href),j=await O.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=h1(j[0]);let U=(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const W=await O.request({method:"eth_chainId"});U=IN(W)}const F={domain:B.host,address:P,statement:_,uri:B.href,version:"1",chainId:U,nonce:(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=C==null?void 0:C.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=UN(F),S=await O.request({method:"personal_sign",params:[BN(v),P]})}try{const{data:x,error:E}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:S},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:or});if(E)throw E;if(!x||!x.session||!x.user){const _=new Ka;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:E})}catch(x){if(ue(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,r,s,a,l,u,f,h,p,g,b,v;let S,x;if("message"in e)S=e.message,x=e.signature;else{const{chain:E,wallet:_,statement:C,options:O}=e;let B;if(Ft())if(typeof _=="object")B=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))B=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=_}const j=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in B&&B.signIn){const P=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),C?{statement:C}:null));let U;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")U=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)U=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)S=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),x=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${j.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=O==null?void 0:O.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O==null?void 0:O.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O==null?void 0:O.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((g=(p=O==null?void 0:O.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...O.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const P=await B.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=P}}try{const{data:E,error:_}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:$s(x)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:or});if(_)throw _;if(!E||!E.session||!E.user){const C=new Ka;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:_})}catch(E){if(ue(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const t=await js(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new aN;const{data:a,error:l}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await Vt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new Ka;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:a,nonce:l}=e,u=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:or}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new Ka;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(t){if(ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,a,l;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ja(this.storage,this.storageKey));const{error:g}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new lf("You must provide either an email or phone number.")}catch(u){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,r;try{let s,a;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:or});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,a,l;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Ja(this.storage,this.storageKey));const h=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:RN});return!((a=h.data)===null||a===void 0)&&a.url&&Ft()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new On;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:l}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:l,error:u}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new lf("You must provide either an email or phone number and a type")}catch(t){if(ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<km:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await js(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Om()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=AN(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ji}):await this._useSession(async t=>{var r,s,a;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new On}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ji})})}catch(t){if(ue(t))return Am(t)&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new On;const l=s.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Ja(this.storage,this.storageKey));const{data:h,error:p}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:Ji});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new On;const t=Date.now()/1e3;let r=t,s=!0,a=null;const{payload:l}=uf(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(ue(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new On;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ft())throw new cf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new kw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cf("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kw("No code detected.");const{data:C,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:f,token_type:h}=e;if(!a||!u||!l||!h)throw new cf("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let b=p+g;f&&(b=parseInt(f));const v=b-p;v*1e3<=to&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const S=b-g;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,p);const{data:x,error:E}=await this._getUser(a);if(E)throw E;const _={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:g,expires_at:b,refresh_token:l,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(r){if(ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a&&!Am(a))return this._returnResult({error:a});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(iN(u)&&(u.status===404||u.status===401||u.status===403)||Am(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=hN(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:a},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ja(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async a=>{var l,u,f,h,p;const{data:g,error:b}=a;if(b)throw b;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Ft()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ue(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:a}}=t;if(s)throw s;const{options:l,provider:u,token:f,access_token:h,nonce:p}=e,g=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:or}),{data:b,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Ka}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:v}))}catch(s){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:a,error:l}=t;if(l)throw l;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await yN(async s=>(s>0&&await gN(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(s,a)=>{const l=200*Math.pow(2,s);return a&&Cm(a)&&Date.now()+l-r<to})}catch(r){if(this._debug(t,"error",r),ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ft()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await js(this.storage,this.storageKey);if(s&&this.userStorage){let l=await js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await no(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Om()}else if(s&&!s.user&&!s.user){const l=await js(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Vt(this.storage,this.storageKey+"-user"),await no(this.storage,this.storageKey,s)):s.user=Om()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<km;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${km}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Cm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new zd;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new On;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),ue(a)){const l={data:null,error:a};return Cm(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(f){a.push(f)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Vt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await no(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const a=Rw(s);await no(this.storage,this.storageKey,a)}else{const s=Rw(t);await no(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vt(this.storage,this.storageKey),await Vt(this.storage,this.storageKey+"-code-verifier"),await Vt(this.storage,this.storageKey+"-user"),this.userStorage&&await Vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),to);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/to);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${to}ms, refresh threshold is ${Tg} ticks`),s<=Tg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ja(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;return a?this._returnResult({data:null,error:a}):await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?GN(e.webauthn.credential_response):KN(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:VN(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:FN(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,r,s,a;if(e)try{const{payload:v}=uf(e);let S=null;v.aal&&(S=v.aal);let x=S;const{data:{user:E},error:_}=await this.getUser(e);if(_)return this._returnResult({data:null,error:_});((r=(t=E==null?void 0:E.factors)===null||t===void 0?void 0:t.filter(B=>B.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(x="aal2");const O=v.amr||[];return{data:{currentLevel:S,nextLevel:x,currentAuthenticationMethods:O},error:null}}catch(v){if(ue(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=uf(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(v=>v.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const b=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new On})})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new On});const l=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Ft()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new On});const l=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Ft()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new On})})}catch(e){if(ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new On})})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+nN>s)return r;const{data:a,error:l}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:S}=await this.getSession();if(S||!v.session)return this._returnResult({data:null,error:S});r=v.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:f}}=uf(r);t!=null&&t.allowExpired||TN(a.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:a,header:s,signature:l},error:null}}const p=_N(s.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,l,fN(`${u}.${f}`)))throw new Ag("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}}fc.nextInstanceID={};const nD=fc,rD="2.97.0";let Pl="";typeof Deno<"u"?Pl="deno":typeof document<"u"?Pl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pl="react-native":Pl="node";const iD={"X-Client-Info":`supabase-js-${Pl}/${rD}`},sD={headers:iD},aD={schema:"public"},oD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lD={};function dc(n){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(n)}function cD(n,e){if(dc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uD(n){var e=cD(n,"string");return dc(e)=="symbol"?e:e+""}function fD(n,e,t){return(e=uD(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ht(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Uw(Object(t),!0).forEach(function(r){fD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Uw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const dD=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),hD=()=>Headers,pD=(n,e,t)=>{const r=dD(t),s=hD();return async(a,l)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:n;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(a,ht(ht({},l),{},{headers:h}))}};function mD(n){return n.endsWith("/")?n:n+"/"}function gD(n,e){var t,r;const{db:s,auth:a,realtime:l,global:u}=n,{db:f,auth:h,realtime:p,global:g}=e,b={db:ht(ht({},f),s),auth:ht(ht({},h),a),realtime:ht(ht({},p),l),storage:{},global:ht(ht(ht({},g),u),{},{headers:ht(ht({},(t=g==null?void 0:g.headers)!==null&&t!==void 0?t:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function yD(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var bD=class extends nD{constructor(n){super(n)}},vD=class{constructor(n,e,t){var r,s;this.supabaseUrl=n,this.supabaseKey=e;const a=yD(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:aD,realtime:lD,auth:ht(ht({},oD),{},{storageKey:l}),global:sD},f=gD(t??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=pD(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new iR(new URL("rest/v1",a).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch,timeout:f.db.timeout,urlLengthLimit:f.db.urlLengthLimit}),this.storage=new XR(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new YM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,storageKey:a,flowType:l,lock:u,debug:f,throwOnError:h},p,g){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bD({url:this.authUrl.href,headers:ht(ht({},b),p),storageKey:a,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,flowType:l,lock:u,debug:f,throwOnError:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new wR(this.realtimeUrl.href,ht(ht({},n),{},{params:ht(ht({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const SD=(n,e,t)=>new vD(n,e,t);function wD(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}wD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Cg="https://ojuwylmuhjarmjvoknjv.supabase.co".trim()||"",Og="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9qdXd5bG11aGphcm1qdm9rbmp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4ODUwMTYsImV4cCI6MjA4NzQ2MTAxNn0.6BEQZywX0dah2EAjkC1IRsKrVugtzQXBDNxb8kPBnDU".trim()||"",m1="portfolio",g1=1;let Rm=null;function _o(){return!Cg||!Og?null:(Rm||(Rm=SD(Cg,Og)),Rm)}function Uf(){return!!(Cg&&Og)}async function xD(){const n=_o();if(!n)return null;try{const{data:e,error:t}=await n.from(m1).select("data").eq("id",g1).maybeSingle();if(t||!(e!=null&&e.data))return null;const r=e.data;if(r&&Array.isArray(r.projects))return r}catch{}return null}async function ED(n){const e=_o();if(!e)return;const{data:{user:t}}=await e.auth.getUser();t&&await e.from(m1).upsert({id:g1,data:n},{onConflict:"id"})}async function TD(n,e){const t=_o();if(!t)return{error:"Supabase not configured"};const{error:r}=await t.auth.signInWithPassword({email:n,password:e});return{error:(r==null?void 0:r.message)??null}}async function _D(){const n=_o();n&&await n.auth.signOut()}function kD(n){const e=_o();if(!e)return()=>{};const{data:{subscription:t}}=e.auth.onAuthStateChange((r,s)=>{n((s==null?void 0:s.user)??null)});return()=>t.unsubscribe()}async function AD(){const n=_o();if(!n)return null;const{data:{user:e}}=await n.auth.getUser();return e}const po="silvia_jiang_portfolio_v1",CD="sphnsx_portfolio",mo="portfolio",y1="data",Mg="sphnsx_portfolio_v1",OD=3800,Pf=typeof import.meta<"u"&&"https://sphnsx.com/portfolio.json".trim()||void 0;let Qt=null;async function MD(){if(!Pf||typeof fetch>"u")return null;try{const n=await fetch(Pf,{cache:"no-store"});if(fetch("http://127.0.0.1:7244/ingest/d73bb932-4ac7-45e1-8337-35cb70e602f8",{method:"POST",headers:{"Content-Type":"application/json","X-Debug-Session-Id":"1d77cc"},body:JSON.stringify({sessionId:"1d77cc",location:"storageService.ts:fetchFromRemote",message:"remote response",data:{ok:n.ok,status:n.status},timestamp:Date.now(),hypothesisId:"H2"})}).catch(()=>{}),!n.ok)return null;const e=await n.json();if(e&&Array.isArray(e.projects))return e}catch(n){fetch("http://127.0.0.1:7244/ingest/d73bb932-4ac7-45e1-8337-35cb70e602f8",{method:"POST",headers:{"Content-Type":"application/json","X-Debug-Session-Id":"1d77cc"},body:JSON.stringify({sessionId:"1d77cc",location:"storageService.ts:fetchFromRemote",message:"remote fetch error",data:{err:String(n==null?void 0:n.message)},timestamp:Date.now(),hypothesisId:"H2"})}).catch(()=>{})}return null}function b1(){if(typeof document>"u"||!document.cookie)return null;const n=document.cookie.split(";").map(e=>e.trim()).find(e=>e.startsWith(Mg+"="));if(!n)return null;try{const e=decodeURIComponent(n.slice(Mg.length+1)),t=JSON.parse(e);if(t&&Array.isArray(t.projects))return t}catch{}return null}function RD(n){if(typeof document>"u")return;const e=JSON.stringify(n),t=encodeURIComponent(e);if(!(t.length>OD))try{document.cookie=Mg+"="+t+"; path=/; max-age=31536000; SameSite=Lax"}catch{}}function v1(){return new Promise((n,e)=>{const t=indexedDB.open(CD,1);t.onerror=()=>e(t.error),t.onsuccess=()=>n(t.result),t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(mo)||r.createObjectStore(mo,{keyPath:"key"})}})}async function ND(){const n=await v1();return new Promise((e,t)=>{const a=n.transaction(mo,"readonly").objectStore(mo).get(y1);a.onerror=()=>{n.close(),t(a.error)},a.onsuccess=()=>{n.close();const l=a.result;if(l!=null&&l.value)try{const u=JSON.parse(l.value);u&&Array.isArray(u.projects)&&e(u)}catch{}e(null)}})}const DD=()=>{if(Qt!==null)return Qt;try{const e=typeof localStorage<"u"?localStorage.getItem(po):null;if(e){const t=JSON.parse(e);if(t&&Array.isArray(t.projects))return Qt=t,Qt}}catch{}try{const e=typeof sessionStorage<"u"?sessionStorage.getItem(po):null;if(e){const t=JSON.parse(e);if(t&&Array.isArray(t.projects))return Qt=t,Qt}}catch{}const n=b1();return n?(Qt=n,Qt):yg};async function ss(){var r;if(fetch("http://127.0.0.1:7244/ingest/d73bb932-4ac7-45e1-8337-35cb70e602f8",{method:"POST",headers:{"Content-Type":"application/json","X-Debug-Session-Id":"1d77cc"},body:JSON.stringify({sessionId:"1d77cc",location:"storageService.ts:getPortfolioDataAsync",message:"async load config",data:{remoteConfigured:!!Pf},timestamp:Date.now(),hypothesisId:"H1"})}).catch(()=>{}),Uf()){const s=await xD();if(s)return Qt=s,fr(s).catch(()=>{}),s}if(Pf){const s=await MD();if(fetch("http://127.0.0.1:7244/ingest/d73bb932-4ac7-45e1-8337-35cb70e602f8",{method:"POST",headers:{"Content-Type":"application/json","X-Debug-Session-Id":"1d77cc"},body:JSON.stringify({sessionId:"1d77cc",location:"storageService.ts:getPortfolioDataAsync",message:"remote result",data:{hasData:!!s,projectsCount:(r=s==null?void 0:s.projects)==null?void 0:r.length},timestamp:Date.now(),hypothesisId:"H2"})}).catch(()=>{}),s)return Qt=s,fr(s).catch(()=>{}),s}try{const s=await ND();if(s)return Qt=s,fr(s).catch(()=>{}),s}catch{}const n=typeof localStorage<"u"?localStorage.getItem(po):null;if(n)try{const s=JSON.parse(n);if(s&&Array.isArray(s.projects))return Qt=s,fr(s).catch(()=>{}),s}catch{}const e=typeof sessionStorage<"u"?sessionStorage.getItem(po):null;if(e)try{const s=JSON.parse(e);if(s&&Array.isArray(s.projects))return Qt=s,fr(s).catch(()=>{}),s}catch{}const t=b1();return t?(Qt=t,fr(t).catch(()=>{}),t):(fetch("http://127.0.0.1:7244/ingest/d73bb932-4ac7-45e1-8337-35cb70e602f8",{method:"POST",headers:{"Content-Type":"application/json","X-Debug-Session-Id":"1d77cc"},body:JSON.stringify({sessionId:"1d77cc",location:"storageService.ts:getPortfolioDataAsync",message:"fallback to INITIAL_DATA",data:{},timestamp:Date.now(),hypothesisId:"H5"})}).catch(()=>{}),Qt=yg,yg)}function fr(n){return Qt=n,v1().then(e=>new Promise((t,r)=>{const l=e.transaction(mo,"readwrite").objectStore(mo).put({key:y1,value:JSON.stringify(n)});l.onerror=()=>{e.close(),r(l.error)},l.onsuccess=()=>{e.close();let u=!1;try{typeof localStorage<"u"&&(localStorage.setItem(po,JSON.stringify(n)),u=!0)}catch(f){typeof console<"u"&&console.warn&&console.warn("Portfolio localStorage write failed (storage may be full or restricted):",f)}try{typeof sessionStorage<"u"&&sessionStorage.setItem(po,JSON.stringify(n))}catch{}RD(n),Uf()&&ED(n).catch(()=>{}),t()}}))}async function LD(n){const e=await ss();e.aboutMe=n,await fr(e)}async function jD(n){const e=await ss();e.projects.unshift(n),await fr(e)}async function zD(n,e){const t=await ss(),r=t.projects.findIndex(s=>s.id===n);r!==-1&&(t.projects[r]={...e,id:n},await fr(t))}async function ID(n){const e=await ss();e.projects=e.projects.filter(t=>t.id!==n),await fr(e)}async function BD(n){const e=await ss(),t=new Map(e.projects.map(a=>[a.id,a])),r=n.map(a=>t.get(a)).filter(a=>a!=null),s=e.projects.filter(a=>!n.includes(a.id));e.projects=[...r,...s],await fr(e)}async function UD(){const n=await ss();return JSON.stringify(n,null,2)}const Pw=`(max-width: ${HM-1}px)`;function cs(){const[n,e]=D.useState(()=>typeof window<"u"?window.matchMedia(Pw).matches:!1);return D.useEffect(()=>{const t=window.matchMedia(Pw),r=s=>e(s.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[]),n}const Cf={left:"sphnsx_left_heights",middle:"sphnsx_middle_heights",right:"sphnsx_right_heights"},Nm=Nd.accent;function Hw(n){const e=parseInt(n.year.trim(),10);return Number.isNaN(e)?-1:e}function $w(n){const e=100/n;return Array(n).fill(0).map((t,r)=>r===n-1?100-e*(n-1):e)}function ff(n,e){const t=n.map(s=>1/(s||1));if(e){const s=t.length?t.reduce((a,l)=>a+l,0)/t.length:1;t.push(s)}const r=t.reduce((s,a)=>s+a,0);return t.map(s=>s/r*100)}function zs(n,e,t){try{const r=JSON.parse(localStorage.getItem(Cf.left)??"null"),s=JSON.parse(localStorage.getItem(Cf.middle)??"null"),a=JSON.parse(localStorage.getItem(Cf.right)??"null");if(Array.isArray(r)&&r.length===n&&Array.isArray(s)&&s.length===e&&Array.isArray(a)&&a.length===t)return{left:r,middle:s,right:a}}catch{}return null}function Dm(n,e){try{localStorage.setItem(Cf[n],JSON.stringify(e))}catch{}}const df=({project:n,hoverColor:e,dragDisabled:t})=>k.jsx(jf,{to:`/project/${n.id}`,title:n.title,hoverColor:e,draggable:!t,preview:n.imageUrl?k.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-contain",onContextMenu:r=>r.preventDefault(),onDragStart:r=>r.preventDefault(),style:{pointerEvents:"none"}}):k.jsx("div",{className:"w-full h-full bg-bgMain","aria-hidden":!0})}),qw=({projectId:n,children:e,onReorder:t})=>{const r=l=>{l.dataTransfer.setData("text/plain",n),l.dataTransfer.effectAllowed="move"},s=l=>{l.preventDefault(),l.dataTransfer.dropEffect="move"},a=l=>{l.preventDefault();const u=l.dataTransfer.getData("text/plain");u&&u!==n&&t(u,n)};return k.jsx("div",{className:"h-full w-full",draggable:!0,onDragStart:r,onDragOver:s,onDrop:a,children:e})},Vw=({hoverColor:n})=>k.jsx(jf,{to:"/project/new",title:"Add project",hoverColor:n,preview:k.jsx("div",{className:"pl-6 pr-4 mt-4",children:k.jsx("span",{className:"font-mono text-xs text-textSecondary uppercase tracking-wider",children:"New project"})})},"add-project"),PD=({project:n})=>{const e=`/project/${n.id}`,t=()=>{const s=e?`#${e}`:"#/";window.location.hash=s,window.location.reload()},r=s=>{s.preventDefault(),s.stopPropagation(),t()};return k.jsxs("div",{role:"link",tabIndex:0,className:"block py-4 px-4 border-b border-paletteBorder bg-bgMain hover:opacity-90 transition-opacity cursor-pointer",onClick:r,onTouchEnd:s=>{s.preventDefault(),t()},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),t())},children:[k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textSecondary",children:n.year}),k.jsx("h3",{className:"font-mono text-lg uppercase tracking-wider text-textPrimary mt-1",children:n.title}),n.imageUrl?k.jsx("img",{src:n.imageUrl,alt:"",className:"mt-3 w-full max-h-48 object-contain bg-bgMain",onContextMenu:s=>s.preventDefault()}):null]})},HD=({projectsByYear:n})=>k.jsx("div",{className:"min-h-screen h-screen w-full flex flex-col overflow-hidden bg-bgMain text-textPrimary",children:k.jsx("div",{className:"overflow-y-auto pt-12 pb-8 bg-bgMain",style:{position:"fixed",top:"3rem",left:0,right:0,bottom:0,zIndex:1},children:k.jsx("div",{className:"flex flex-col",children:n.map(e=>k.jsx("div",{children:k.jsx(PD,{project:e})},e.id))})})}),$D=({data:n,onRefresh:e})=>{const t=cs(),{isAdmin:r}=sa(),s=Math.ceil(n.projects.length/2),a=n.projects.slice(0,s),l=n.projects.slice(s),u=r&&a.length<=l.length,f=2,h=a.length+(u?1:0),p=l.length+(u?0:1),{leftColors:g,middleColors:b,rightColors:v}=D.useMemo(()=>({leftColors:Array.from({length:f},()=>Nm),middleColors:Array.from({length:h},()=>Nm),rightColors:Array.from({length:p},()=>Nm)}),[f,h,p]);D.useMemo(()=>zs(f,h,p),[f,h,p]);const[S,x]=D.useState(()=>{const te=zs(f,h,p);return(te==null?void 0:te.left)??$w(f)}),[E,_]=D.useState(()=>{const te=zs(f,h,p);return te!=null&&te.middle?te.middle:ff(a.map(he=>he.coverAspectRatio??1),u)}),[C,O]=D.useState(()=>{const te=zs(f,h,p);return te!=null&&te.right?te.right:ff(l.map(he=>he.coverAspectRatio??1),!u&&r)});D.useEffect(()=>{if(S.length!==f){const te=zs(f,h,p);x((te==null?void 0:te.left)??$w(f))}if(E.length!==h){const te=zs(f,h,p);_((te==null?void 0:te.middle)??ff(a.map(he=>he.coverAspectRatio??1),u))}if(C.length!==p){const te=zs(f,h,p);O((te==null?void 0:te.right)??ff(l.map(he=>he.coverAspectRatio??1),!u&&r))}},[f,h,p,a,l,u,r]);const B=D.useCallback(te=>{x(te),Dm("left",te)},[]),j=D.useCallback(te=>{_(te),Dm("middle",te)},[]),P=D.useCallback(te=>{O(te),Dm("right",te)},[]),U=D.useMemo(()=>a.map(te=>te.id).concat(l.map(te=>te.id)),[a,l]),F=D.useCallback(async(te,he)=>{const Te=U.filter(ee=>ee!==te),q=Te.indexOf(he);q!==-1&&(Te.splice(q,0,te),await BD(Te),e==null||e())},[U,e]),W=D.useMemo(()=>[k.jsx(jf,{to:"/about",title:"About me",hoverColor:g[0],preview:k.jsx(PM,{text:n.aboutMe})},"about"),k.jsx(jf,{to:"/contact",title:"Contact",hoverColor:g[1],preview:k.jsx("div",{className:"pl-6 pr-4 mt-4",children:k.jsx("span",{className:"font-mono text-xs text-textSecondary uppercase tracking-wider",children:"Get in touch"})})},"contact")],[n,g]),de=D.useMemo(()=>[...a.map((te,he)=>r?k.jsx(qw,{projectId:te.id,onReorder:F,children:k.jsx(df,{project:te,hoverColor:b[he],dragDisabled:!0})},te.id):k.jsx(df,{project:te,hoverColor:b[he]},te.id)),...u?[k.jsx(Vw,{hoverColor:b[a.length]},"add-project")]:[]],[n,a,b,u,r,F]),oe=D.useMemo(()=>[...l.map((te,he)=>r?k.jsx(qw,{projectId:te.id,onReorder:F,children:k.jsx(df,{project:te,hoverColor:v[he],dragDisabled:!0})},te.id):k.jsx(df,{project:te,hoverColor:v[he]},te.id)),...!u&&r?[k.jsx(Vw,{hoverColor:v[l.length]},"add-project")]:[]],[n,l,v,u,r,F]),ke=D.useMemo(()=>[...n.projects].sort((te,he)=>Hw(he)-Hw(te)),[n.projects]);return t?k.jsx(HD,{data:n,projectsByYear:ke}):k.jsx(fM,{leftRows:W,middleRows:de,rightRows:oe,leftHeights:S,middleHeights:E,rightHeights:C,leftColors:g,middleColors:b,rightColors:v,onLeftHeightsChange:B,onMiddleHeightsChange:j,onRightHeightsChange:P})},qD=({className:n=""})=>k.jsxs("svg",{className:n,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"square","aria-hidden":!0,children:[k.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),k.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),k.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),VD=()=>{const[n,e]=D.useState(!1),t=Or();return D.useEffect(()=>{e(!1)},[t.pathname]),k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"fixed top-0 left-0 z-[100] h-12 w-auto max-w-[33.333vw] flex items-center pl-4 rounded-sm transition-opacity duration-150",style:{backgroundColor:Nd.accent},children:[k.jsx("button",{type:"button","aria-label":"Open menu",onClick:()=>e(!0),className:"h-12 w-6 flex items-center justify-center text-textPrimary hover:opacity-80 transition-opacity shrink-0",children:k.jsx(qD,{})}),k.jsx(is,{to:"/",className:"font-mono text-base uppercase tracking-wider text-textPrimary flex-1 flex items-center justify-center min-w-0 px-4 hover:opacity-90 transition-opacity duration-150",children:"Home"})]}),n&&k.jsxs(k.Fragment,{children:[k.jsx("div",{role:"presentation",className:"fixed inset-0 z-[101] bg-black/40",onClick:()=>e(!1),"aria-hidden":!0}),k.jsxs("nav",{className:"fixed top-0 left-0 z-[102] w-64 h-full bg-bgMain border-r border-paletteBorder flex flex-col pt-14 pl-4 pr-4 pb-4","aria-label":"Main navigation",children:[k.jsx("a",{href:"#/about",className:"font-mono text-sm uppercase tracking-wider py-3 border-b border-paletteBorder text-textPrimary hover:underline block",onClick:()=>e(!1),children:"About me"}),k.jsx("a",{href:"#/contact",className:"font-mono text-sm uppercase tracking-wider py-3 border-b border-paletteBorder text-textPrimary hover:underline block",onClick:()=>e(!1),children:"Contact"})]})]})]})},Fw=()=>{const{login:n}=sa(),e=ia(),[t,r]=D.useState(""),s=a=>{a.preventDefault(),n(t)?e("/"):alert("Incorrect password.")};return k.jsx("div",{className:"min-h-screen bg-bgMain flex items-center justify-center px-6",children:k.jsxs("form",{onSubmit:s,className:"w-full max-w-sm",children:[k.jsx("h2",{className:"font-mono text-sm uppercase tracking-wider text-textPrimary mb-8",children:"Admin login"}),k.jsx("input",{type:"password",placeholder:"Password",className:"w-full py-3 border-b border-paletteBorder bg-transparent font-mono text-sm uppercase tracking-wider placeholder:text-textSecondary text-textPrimary focus:outline-none mb-8",value:t,onChange:a=>r(a.target.value)}),k.jsx("button",{type:"submit",className:"font-mono text-base uppercase tracking-wider text-textPrimary py-4 px-5 transition-opacity duration-150 hover:opacity-90 rounded-sm w-full",style:{backgroundColor:Nd.accent},children:"Log in"})]})})},FD=()=>{const[n,e]=D.useState(!1),[t,r]=D.useState(null),[s,a]=D.useState(""),[l,u]=D.useState(""),[f,h]=D.useState(!1),[p,g]=D.useState(null);D.useEffect(()=>{if(Uf())return AD().then(r),kD(r)},[]);const b=async()=>{e(!0);try{const x=await UD(),E=new Blob([x],{type:"application/json"}),_=URL.createObjectURL(E),C=document.createElement("a");C.href=_,C.download="portfolio.json",C.click(),URL.revokeObjectURL(_)}finally{e(!1)}},v=async x=>{x.preventDefault(),g(null),h(!0);const{error:E}=await TD(s,l);h(!1),E&&g(E)},S=()=>{_D(),a(""),u(""),g(null)};return k.jsxs("div",{className:"min-h-screen bg-bgMain pt-pageTop px-6 pb-12 max-w-2xl text-textPrimary",children:[k.jsx("h1",{className:"font-mono text-sm uppercase tracking-wider mb-6",children:"Deployment"}),Uf()&&k.jsxs("section",{className:"border border-paletteBorder p-6 space-y-4 rounded-sm mb-6",children:[k.jsx("h2",{className:"font-mono text-xs uppercase tracking-wider mb-2",children:"Live publish (automatic)"}),k.jsx("p",{className:"font-mono text-sm text-textSecondary",children:"When signed in, every save in Admin (projects, about, etc.) updates the live site. No download or file steps."}),t?k.jsxs("div",{className:"space-y-2",children:[k.jsx("p",{className:"font-mono text-sm text-textPrimary",children:"Signed in. Saves will update the live site."}),k.jsx("button",{type:"button",onClick:S,className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-4 py-2 bg-bgMain hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Sign out"})]}):k.jsxs("form",{onSubmit:v,className:"space-y-3",children:[k.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:x=>a(x.target.value),required:!0,className:"font-mono text-sm w-full border border-paletteBorder px-3 py-2 bg-bgMain rounded-sm"}),k.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:x=>u(x.target.value),required:!0,className:"font-mono text-sm w-full border border-paletteBorder px-3 py-2 bg-bgMain rounded-sm"}),p&&k.jsx("p",{className:"font-mono text-xs text-red-600",children:p}),k.jsx("button",{type:"submit",disabled:f,className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-4 py-2 bg-bgMain hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm disabled:opacity-50",children:f?"Signing in":"Sign in to enable live publish"})]})]}),k.jsxs("section",{className:"border border-paletteBorder p-6 space-y-4 rounded-sm mb-6",children:[k.jsx("h2",{className:"font-mono text-xs uppercase tracking-wider mb-2",children:"Manual publish (optional)"}),k.jsxs("p",{className:"font-mono text-sm text-textSecondary",children:["Or publish via a static file: download ",k.jsx("code",{className:"bg-bgSidebar px-1",children:"portfolio.json"}),", add to ",k.jsx("code",{className:"bg-bgSidebar px-1",children:"docs/"}),", build with ",k.jsx("code",{className:"bg-bgSidebar px-1",children:"VITE_PORTFOLIO_URL"}),", then deploy."]}),k.jsx("button",{type:"button",onClick:b,disabled:n,className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-4 py-2 bg-bgMain hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm disabled:opacity-50",children:n?"Preparing":"Download portfolio.json"})]}),k.jsxs("section",{className:"border border-paletteBorder p-6 space-y-4 rounded-sm mb-6",children:[k.jsx("h2",{className:"font-mono text-xs uppercase tracking-wider mb-2",children:"Domain setup"}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-mono text-xs uppercase tracking-wider mb-2",children:"1. Naked domain (A record)"}),k.jsx("p",{className:"font-mono text-sm",children:"Add an A record for your root domain (@) pointing to your host IP."})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-mono text-xs uppercase tracking-wider mb-2",children:"2. Redirect"}),k.jsx("p",{className:"font-mono text-sm",children:"Set domain forwarding from your root domain to https://www.yourdomain.com (301 redirect)."})]})]})]}),k.jsx("p",{className:"mt-6",children:k.jsx(is,{to:"/",className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-4 py-2 inline-block bg-bgMain hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Back to home"})})]})};function Rg(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r.naturalWidth/r.naturalHeight||1),r.onerror=()=>t(new Error("Image load failed")),r.src=n})}function oo(n,e=1600,t=.78){return new Promise((r,s)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{try{const l=document.createElement("canvas");let{width:u,height:f}=a;u>e&&(f=f*e/u,u=e),l.width=u,l.height=f;const h=l.getContext("2d");if(!h){r(n);return}h.drawImage(a,0,0,u,f),r(l.toDataURL("image/jpeg",t))}catch(l){s(l)}},a.onerror=()=>s(new Error("Image load failed")),a.src=n})}var Lm={exports:{}},jm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function GD(){if(Gw)return jm;Gw=1;var n=Tc();function e(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function u(g,b){var v=b(),S=r({inst:{value:v,getSnapshot:b}}),x=S[0].inst,E=S[1];return a(function(){x.value=v,x.getSnapshot=b,f(x)&&E({inst:x})},[g,v,b]),s(function(){return f(x)&&E({inst:x}),g(function(){f(x)&&E({inst:x})})},[g]),l(v),v}function f(g){var b=g.getSnapshot;g=g.value;try{var v=b();return!t(g,v)}catch{return!0}}function h(g,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return jm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,jm}var Kw;function S1(){return Kw||(Kw=1,Lm.exports=GD()),Lm.exports}var w1=S1();function Gt(n){this.content=n}Gt.prototype={constructor:Gt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),a=r.content.slice();return s==-1?a.push(t||n,e):(a[s+1]=e,t&&(a[s]=t)),new Gt(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Gt(t)},addToStart:function(n,e){return new Gt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Gt(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),a=r.find(n);return s.splice(a==-1?s.length:a,0,e,t),new Gt(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Gt.from(n),n.size?new Gt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Gt.from(n),n.size?new Gt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Gt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Gt.from=function(n){if(n instanceof Gt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Gt(e)};function x1(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),a=e.child(r);if(s==a){t+=s.nodeSize;continue}if(!s.sameMarkup(a))return t;if(s.isText&&s.text!=a.text){for(let l=0;s.text[l]==a.text[l];l++)t++;return t}if(s.content.size||a.content.size){let l=x1(s.content,a.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function E1(n,e,t,r){for(let s=n.childCount,a=e.childCount;;){if(s==0||a==0)return s==a?null:{a:t,b:r};let l=n.child(--s),u=e.child(--a),f=l.nodeSize;if(l==u){t-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=E1(l.content,u.content,t-1,r-1);if(h)return h}t-=f,r-=f}}class Y{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,a){for(let l=0,u=0;u<t;l++){let f=this.content[l],h=u+f.nodeSize;if(h>e&&r(f,s+u,a||null,l)!==!1&&f.content.size){let p=u+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let a="",l=!0;return this.nodesBetween(e,t,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,t-f):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:a+=r),a+=h},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),a=1);a<e.content.length;a++)s.push(e.content[a]);return new Y(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let a=0,l=0;l<t;a++){let u=this.content[a],f=l+u.nodeSize;f>e&&((l<e||f>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=f}return new Y(r,s)}cutByIndex(e,t){return e==t?Y.empty:e==0&&t==this.content.length?this:new Y(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),a=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new Y(s,a)}addToStart(e){return new Y([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Y(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return x1(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return E1(this,e,t,r)}findIndex(e){if(e==0)return hf(0,e);if(e==this.size)return hf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),a=r+s.nodeSize;if(a>=e)return a==e?hf(t+1,a):hf(t,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Y.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Y(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Y.empty;let t,r=0;for(let s=0;s<e.length;s++){let a=e[s];r+=a.nodeSize,s&&a.isText&&e[s-1].sameMarkup(a)?(t||(t=e.slice(0,s)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new Y(t||e,r)}static from(e){if(!e)return Y.empty;if(e instanceof Y)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Y([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Y.empty=new Y([],0);const zm={index:0,offset:0};function hf(n,e){return zm.index=n,zm.offset=e,zm}function Hf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Hf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Hf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Xe=class Ng{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let a=e[s];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,s));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(a)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Hf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ng.none;if(e instanceof Ng)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Xe.none=[];class $f extends Error{}class ne{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=_1(this.content,e+this.openStart,t);return r&&new ne(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ne(T1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ne.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ne(Y.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)s++;return new ne(e,r,s)}}ne.empty=new ne(Y.empty,0,0);function T1(n,e,t){let{index:r,offset:s}=n.findIndex(e),a=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||a.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,a.copy(T1(a.content,e-s-1,t-s-1)))}function _1(n,e,t,r){let{index:s,offset:a}=n.findIndex(e),l=n.maybeChild(s);if(a==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=_1(l.content,e-a-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function KD(n,e,t){if(t.openStart>n.depth)throw new $f("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new $f("Inconsistent open depths");return k1(n,e,t,0)}function k1(n,e,t,r){let s=n.index(r),a=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=k1(n,e,t,r+1);return a.copy(a.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return Js(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=JD(t,n);return Js(a,C1(n,l,u,e,r))}else return Js(a,qf(n,e,r))}function A1(n,e){if(!e.type.compatibleContent(n.type))throw new $f("Cannot join "+e.type.name+" onto "+n.type.name)}function Dg(n,e,t){let r=n.node(t);return A1(r,e.node(t)),r}function Ks(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Jl(n,e,t,r){let s=(e||n).node(t),a=0,l=e?e.index(t):s.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Ks(n.nodeAfter,r),a++));for(let u=a;u<l;u++)Ks(s.child(u),r);e&&e.depth==t&&e.textOffset&&Ks(e.nodeBefore,r)}function Js(n,e){return n.type.checkContent(e),n.copy(e)}function C1(n,e,t,r,s){let a=n.depth>s&&Dg(n,e,s+1),l=r.depth>s&&Dg(t,r,s+1),u=[];return Jl(null,n,s,u),a&&l&&e.index(s)==t.index(s)?(A1(a,l),Ks(Js(a,C1(n,e,t,r,s+1)),u)):(a&&Ks(Js(a,qf(n,e,s+1)),u),Jl(e,t,s,u),l&&Ks(Js(l,qf(t,r,s+1)),u)),Jl(r,null,s,u),new Y(u)}function qf(n,e,t){let r=[];if(Jl(null,n,t,r),n.depth>t){let s=Dg(n,e,t+1);Ks(Js(s,qf(n,e,t+1)),r)}return Jl(e,null,t,r),new Y(r)}function JD(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)s=e.node(a).copy(Y.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class hc{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)s+=r.child(a).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Xe.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let a=r.marks;for(var l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!s||!a[l].isInSet(s.marks))&&(a=a[l--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!s||!r[a].isInSet(s.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Vf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,a=t;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(a),h=a-f;if(r.push(l,u,s+f),!h||(l=l.child(u),l.isText))break;a=h-1,s+=f+1}return new hc(t,r,a)}static resolveCached(e,t){let r=Jw.get(e);if(r)for(let a=0;a<r.elts.length;a++){let l=r.elts[a];if(l.pos==t)return l}else Jw.set(e,r=new WD);let s=r.elts[r.i]=hc.resolve(e,t);return r.i=(r.i+1)%YD,s}}class WD{constructor(){this.elts=[],this.i=0}}const YD=12,Jw=new WeakMap;class Vf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const XD=Object.create(null);class pr{constructor(e,t,r,s=Xe.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||Y.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Hf(this.attrs,t||e.defaultAttrs||XD)&&Xe.sameSet(this.marks,r||Xe.none)}copy(e=null){return e==this.content?this:new pr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new pr(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ne.empty;let s=this.resolve(e),a=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,a.pos-u);return new ne(h,s.depth-l,a.depth-l)}replace(e,t,r){return KD(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return hc.resolveCached(this,e)}resolveNoCache(e){return hc.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,a=>(r.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),O1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Y.empty,s=0,a=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,a),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let f=s;f<a;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(e).matchType(r),l=a&&a.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Xe.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Xe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=Y.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,s,r);return a.type.checkAttrs(a.attrs),a}}pr.prototype.text=void 0;class Ff extends pr{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):O1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ff(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ff(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function O1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Qs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new QD(e,t);if(r.next==null)return Qs.empty;let s=M1(r);r.next&&r.err("Unexpected trailing text");let a=s2(i2(s));return a2(a,r),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let a=t;s&&a<r;a++)s=s.matchType(e.child(a).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function a(l,u){let f=l.matchFragment(e,r);if(f&&(!t||f.validEnd))return Y.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:g}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let b=a(g,u.concat(p));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),a=s.match;if(a.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<a.next.length;l++){let{type:u,next:f}=a.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let a=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)a+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return a}).join(`
`)}}Qs.empty=new Qs(!0);class QD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function M1(n){let e=[];do e.push(ZD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ZD(n){let e=[];do e.push(e2(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function e2(n){let e=r2(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=t2(n,e);else break;return e}function Ww(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function t2(n,e){let t=Ww(n),r=t;return n.eat(",")&&(n.next!="}"?r=Ww(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function n2(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let a in t){let l=t[a];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function r2(n){if(n.eat("(")){let e=M1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=n2(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function i2(n){let e=[[]];return s(a(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,f){let h={term:f,to:u};return e[l].push(h),h}function s(l,u){l.forEach(f=>f.to=u)}function a(l,u){if(l.type=="choice")return l.exprs.reduce((f,h)=>f.concat(a(h,u)),[]);if(l.type=="seq")for(let f=0;;f++){let h=a(l.exprs[f],u);if(f==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let f=t();return r(u,f),s(a(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=t();return s(a(l.expr,u),f),s(a(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(a(l.expr,u));if(l.type=="range"){let f=u;for(let h=0;h<l.min;h++){let p=t();s(a(l.expr,f),p),f=p}if(l.max==-1)s(a(l.expr,f),f);else for(let h=l.min;h<l.max;h++){let p=t();r(f,p),s(a(l.expr,f),p),f=p}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function R1(n,e){return e-n}function Yw(n,e){let t=[];return r(e),t.sort(R1);function r(s){let a=n[s];if(a.length==1&&!a[0].term)return r(a[0].to);t.push(s);for(let l=0;l<a.length;l++){let{term:u,to:f}=a[l];!u&&t.indexOf(f)==-1&&r(f)}}}function s2(n){let e=Object.create(null);return t(Yw(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);Yw(n,f).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let a=e[r.join(",")]=new Qs(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(R1);a.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return a}}function a2(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],a=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:f,next:h}=s.next[u];l.push(f.name),a&&!(f.isText||f.hasRequiredAttrs())&&(a=!1),r.indexOf(h)==-1&&r.push(h)}a&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function N1(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function D1(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let a=n[r];if(a.hasDefault)s=a.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function L1(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let a=n[s];a.validate&&a.validate(e[s])}}function j1(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new l2(n,r,e[r]);return t}let Xw=class z1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=j1(e,r.attrs),this.defaultAttrs=N1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:D1(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pr(this,this.computeAttrs(e),Y.from(t),Xe.setFrom(r))}createChecked(e=null,t,r){return t=Y.from(t),this.checkContent(t),new pr(this,this.computeAttrs(e),t,Xe.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Y.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),a=s&&s.fillBefore(Y.empty,!0);return a?new pr(this,e,t.append(a),Xe.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){L1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Xe.none:e}static compile(e,t){let r=Object.create(null);e.forEach((a,l)=>r[a]=new z1(a,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function o2(n,e,t){let r=t.split("|");return s=>{let a=s===null?"null":typeof s;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${a}`)}}class l2{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?o2(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Id{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=j1(e,s.attrs),this.excluded=null;let a=N1(this.attrs);this.instance=a?new Xe(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Xe(this,D1(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((a,l)=>r[a]=new Id(a,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){L1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class I1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Gt.from(e.nodes),t.marks=Gt.from(e.marks||{}),this.nodes=Xw.compile(this.spec.nodes,this),this.marks=Id.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let a=this.nodes[s],l=a.spec.content||"",u=a.spec.marks;if(a.contentMatch=r[l]||(r[l]=Qs.parse(l,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=u=="_"?null:u?Qw(this,u.split(" ")):u==""||!a.inlineContent?[]:null}for(let s in this.marks){let a=this.marks[s],l=a.spec.excludes;a.excluded=l==null?[a]:l==""?[]:Qw(this,l.split(" "))}this.nodeFromJSON=s=>pr.fromJSON(this,s),this.markFromJSON=s=>Xe.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Xw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Ff(r,r.defaultAttrs,e,Xe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Qw(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],a=n.marks[s],l=a;if(a)t.push(a);else for(let u in n.marks){let f=n.marks[u];(s=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function c2(n){return n.tag!=null}function u2(n){return n.style!=null}class es{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(c2(s))this.tags.push(s);else if(u2(s)){let a=/[^=]*/.exec(s.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let a=e.nodes[s.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let r=new ex(this,t,!1);return r.addAll(e,Xe.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ex(this,t,!0);return r.addAll(e,Xe.none,t.from,t.to),ne.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(h2(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let l=a.getAttrs(e);if(l===!1)continue;a.attrs=l||void 0}return a}}}matchStyle(e,t,r,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let l=this.styles[a],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let f=l.getAttrs(t);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let a=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<a)break}t.splice(l,0,s)}for(let s in e.marks){let a=e.marks[s].spec.parseDOM;a&&a.forEach(l=>{r(l=tx(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let a=e.nodes[s].spec.parseDOM;a&&a.forEach(l=>{r(l=tx(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new es(e,es.schemaRules(e)))}}const B1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},f2={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},U1={ol:!0,ul:!0},pc=1,Lg=2,Wl=4;function Zw(n,e,t){return e!=null?(e?pc:0)|(e==="full"?Lg:0):n&&n.whitespace=="pre"?pc|Lg:t&~Wl}class pf{constructor(e,t,r,s,a,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=Xe.none,this.match=a||(l&Wl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Y.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&pc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let t=Y.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Y.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!B1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ex{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,a,l=Zw(null,t.preserveWhitespace,0)|(r?Wl:0);s?a=new pf(s.type,s.attrs,Xe.none,!0,t.topMatch||s.type.contentMatch,l):r?a=new pf(null,null,Xe.none,!0,null,l):a=new pf(e.schema.topNodeType,null,Xe.none,!0,null,l),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,a=s.options&Lg?"full":this.localPreserveWS||(s.options&pc)>0,{schema:l}=this.parser;if(a==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let f=0;f<u.length;f++)f&&this.insertNode(l.linebreakReplacement.create(),t,!0),u[f]&&this.insertNode(l.text(u[f]),t,!/\S/.test(u[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;U1.hasOwnProperty(l)&&this.parser.normalizeLists&&d2(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:f2.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(B1.hasOwnProperty(l))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),h=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=f&&f.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(a),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let a=this.parser.matchedStyles[s],l=r.getPropertyValue(a);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(a,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return t}addElementByRule(e,t,r,s){let a,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(l,t.attrs||null,r,t.preserveWhitespace);f&&(a=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}a&&this.sync(u)&&this.open--}addAll(e,t,r,s){let a=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(l,t);this.findAtPoint(e,a)}findPlace(e,t,r){let s,a;for(let l=this.open,u=0;l>=0;l--){let f=this.nodes[l],h=f.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,a=f,!h.length))break;if(f.solid){if(r)break;u+=2}}if(!s)return null;this.sync(a);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let l=Xe.none;for(let u of s.concat(e.marks))(a.type?a.type.allowsMarkType(u.type):nx(u.type,e.type))&&(l=u.addToSet(l));return a.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let a=this.findPlace(e.create(t),r,!1);return a&&(a=this.enterInner(e,t,r,!0,s)),a}enterInner(e,t,r,s=!1,a){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=Zw(e,a,l.options);l.options&Wl&&l.content.length==0&&(u|=Wl);let f=Xe.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):nx(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new pf(e,t,f,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=pc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(s?0:1),l=(u,f)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;f>=a;f--)if(l(u-1,f))return!0;return!1}else{let p=f>0||f==0&&s?this.nodes[f].type:r&&f>=a?r.node(f-a).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function d2(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&U1.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function h2(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function tx(n){let e={};for(let t in n)e[t]=n[t];return e}function nx(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let a=[],l=u=>{a.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:p}=u.edge(f);if(h==e||a.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class aa{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Im(t).createDocumentFragment());let s=r,a=[];return e.forEach(l=>{if(a.length||l.marks.length){let u=0,f=0;for(;u<a.length&&f<l.marks.length;){let h=l.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(a[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<a.length;)s=a.pop()[1];for(;f<l.marks.length;){let h=l.marks[f++],p=this.serializeMark(h,l.isInline,t);p&&(a.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=Of(Im(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let a=this.serializeMark(e.marks[s],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&Of(Im(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return Of(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new aa(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=rx(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return rx(e.marks)}}function rx(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Im(n){return n.document||window.document}const ix=new WeakMap;function p2(n){let e=ix.get(n);return e===void 0&&ix.set(n,e=m2(n)),e}function m2(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function Of(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],a;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=p2(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,f=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let b=g.indexOf(" ");b>0?f.setAttributeNS(g.slice(0,b),g.slice(b+1),h[g]):g=="style"&&f.style?f.style.cssText=h[g]:f.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let b=e[g];if(b===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:S}=Of(n,b,t,r);if(f.appendChild(v),S){if(u)throw new RangeError("Multiple content holes");u=S}}}return{dom:f,contentDOM:u}}const P1=65535,H1=Math.pow(2,16);function g2(n,e){return n+e*H1}function sx(n){return n&P1}function y2(n){return(n-(n&P1))/H1}const $1=1,q1=2,Mf=4,V1=8;class jg{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&V1)>0}get deletedBefore(){return(this.delInfo&($1|Mf))>0}get deletedAfter(){return(this.delInfo&(q1|Mf))>0}get deletedAcross(){return(this.delInfo&Mf)>0}}class Rn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Rn.empty)return Rn.empty}recover(e){let t=0,r=sx(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+y2(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,a=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?s:0);if(f>e)break;let h=this.ranges[u+a],p=this.ranges[u+l],g=f+h;if(e<=g){let b=h?e==f?-1:e==g?1:t:t,v=f+s+(b<0?0:p);if(r)return v;let S=e==(t<0?f:g)?null:g2(u/3,e-f),x=e==f?q1:e==g?$1:Mf;return(t<0?e!=f:e!=g)&&(x|=V1),new jg(v,x,S)}s+=p-h}return r?e+s:new jg(e+s,0,null)}touches(e,t){let r=0,s=sx(t),a=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+a],p=f+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?a:0),f=l+(this.inverted?0:a),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,f,f+p),a+=p-h}}invert(){return new Rn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Rn.empty:new Rn(e<0?[0,-e,0]:[0,0,e])}}Rn.empty=new Rn([]);class mc{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new mc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new mc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let a=this.from;a<this.to;a++){let l=this._maps[a],u=l.mapResult(e,t);if(u.recover!=null){let f=this.getMirror(a);if(f!=null&&f>a&&f<this.to){a=f,e=this._maps[f].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new jg(e,s,null)}}const Bm=Object.create(null);class en{getMap(){return Rn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Bm[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Bm)throw new RangeError("Duplicate use of step JSON ID "+e);return Bm[e]=t,t.prototype.jsonID=e,t}}class kt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new kt(e,null)}static fail(e){return new kt(null,e)}static fromReplace(e,t,r,s){try{return kt.ok(e.replace(t,r,s))}catch(a){if(a instanceof $f)return kt.fail(a.message);throw a}}}function yy(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let a=n.child(s);a.content.size&&(a=a.copy(yy(a.content,e,a))),a.isInline&&(a=e(a,t,s)),r.push(a)}return Y.fromArray(r)}class Xi extends en{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),a=new ne(yy(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return kt.fromReplace(e,this.from,this.to,a)}invert(){return new hr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Xi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Xi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Xi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Xi(t.from,t.to,e.markFromJSON(t.mark))}}en.jsonID("addMark",Xi);class hr extends en{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ne(yy(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return kt.fromReplace(e,this.from,this.to,r)}invert(){return new Xi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new hr(t.pos,r.pos,this.mark)}merge(e){return e instanceof hr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new hr(t.from,t.to,e.markFromJSON(t.mark))}}en.jsonID("removeMark",hr);class Qi extends en{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return kt.fromReplace(e,this.pos,this.pos+1,new ne(Y.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Qi(this.pos,t.marks[s]);return new Qi(this.pos,this.mark)}}return new Zs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qi(t.pos,e.markFromJSON(t.mark))}}en.jsonID("addNodeMark",Qi);class Zs extends en{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return kt.fromReplace(e,this.pos,this.pos+1,new ne(Y.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Qi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Zs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Zs(t.pos,e.markFromJSON(t.mark))}}en.jsonID("removeNodeMark",Zs);class jt extends en{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&zg(e,this.from,this.to)?kt.fail("Structure replace would overwrite content"):kt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Rn([this.from,this.to-this.from,this.slice.size])}invert(e){return new jt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new jt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof jt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ne.empty:new ne(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new jt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ne.empty:new ne(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new jt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new jt(t.from,t.to,ne.fromJSON(e,t.slice),!!t.structure)}}en.jsonID("replace",jt);class zt extends en{constructor(e,t,r,s,a,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=a,this.insert=l,this.structure=u}apply(e){if(this.structure&&(zg(e,this.from,this.gapFrom)||zg(e,this.gapTo,this.to)))return kt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return kt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?kt.fromReplace(e,this.from,this.to,r):kt.fail("Content does not fit in gap")}getMap(){return new Rn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new zt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||a>r.pos?null:new zt(t.pos,r.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zt(t.from,t.to,t.gapFrom,t.gapTo,ne.fromJSON(e,t.slice),t.insert,!!t.structure)}}en.jsonID("replaceAround",zt);function zg(n,e,t){let r=n.resolve(e),s=t-e,a=r.depth;for(;s>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,s--;if(s>0){let l=r.node(a).maybeChild(r.indexAfter(a));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function b2(n,e,t,r){let s=[],a=[],l,u;n.doc.nodesBetween(e,t,(f,h,p)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let b=Math.max(h,e),v=Math.min(h+f.nodeSize,t),S=r.addToSet(g);for(let x=0;x<g.length;x++)g[x].isInSet(S)||(l&&l.to==b&&l.mark.eq(g[x])?l.to=v:s.push(l=new hr(b,v,g[x])));u&&u.to==b?u.to=v:a.push(u=new Xi(b,v,r))}}),s.forEach(f=>n.step(f)),a.forEach(f=>n.step(f))}function v2(n,e,t,r){let s=[],a=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;a++;let f=null;if(r instanceof Id){let h=l.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let h=Math.min(u+l.nodeSize,t);for(let p=0;p<f.length;p++){let g=f[p],b;for(let v=0;v<s.length;v++){let S=s[v];S.step==a-1&&g.eq(s[v].style)&&(b=S)}b?(b.to=h,b.step=a):s.push({style:g,from:Math.max(u,e),to:h,step:a})}}}),s.forEach(l=>n.step(new hr(l.from,l.to,l.style)))}function by(n,e,t,r=t.contentMatch,s=!0){let a=n.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<a.childCount;f++){let h=a.child(f),p=u+h.nodeSize,g=r.matchType(h.type);if(!g)l.push(new jt(u,p,ne.empty));else{r=g;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new hr(u,p,h.marks[b]));if(s&&h.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,S;for(;b=v.exec(h.text);)S||(S=new ne(Y.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new jt(u+b.index,u+b.index+b[0].length,S))}}u=p}if(!r.validEnd){let f=r.fillBefore(Y.empty,!0);n.replace(u,u,new ne(f,0,0))}for(let f=l.length-1;f>=0;f--)n.step(l[f])}function S2(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ko(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,a=0;;--r){let l=n.$from.node(r),u=n.$from.index(r)+s,f=n.$to.indexAfter(r)-a;if(r<n.depth&&l.canReplace(u,f,t))return r;if(r==0||l.type.spec.isolating||!S2(l,u,f))break;u&&(s=1),f<l.childCount&&(a=1)}return null}function w2(n,e,t){let{$from:r,$to:s,depth:a}=e,l=r.before(a+1),u=s.after(a+1),f=l,h=u,p=Y.empty,g=0;for(let S=a,x=!1;S>t;S--)x||r.index(S)>0?(x=!0,p=Y.from(r.node(S).copy(p)),g++):f--;let b=Y.empty,v=0;for(let S=a,x=!1;S>t;S--)x||s.after(S+1)<s.end(S)?(x=!0,b=Y.from(s.node(S).copy(b)),v++):h++;n.step(new zt(f,h,l,u,new ne(p.append(b),g,v),p.size-g,!0))}function vy(n,e,t=null,r=n){let s=x2(n,e),a=s&&E2(r,e);return a?s.map(ax).concat({type:e,attrs:t}).concat(a.map(ax)):null}function ax(n){return{type:n,attrs:null}}function x2(n,e){let{parent:t,startIndex:r,endIndex:s}=n,a=t.contentMatchAt(r).findWrapping(e);if(!a)return null;let l=a.length?a[0]:e;return t.canReplaceWith(r,s,l)?a:null}function E2(n,e){let{parent:t,startIndex:r,endIndex:s}=n,a=t.child(r),l=e.contentMatch.findWrapping(a.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;f&&h<s;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:l}function T2(n,e,t){let r=Y.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Y.from(t[l].type.create(t[l].attrs,r))}let s=e.start,a=e.end;n.step(new zt(s,a,s,a,new ne(r,0,0),t.length,!0))}function _2(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let f=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,f)&&k2(n.doc,n.mapping.slice(a).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!S?h=!1:!v&&S&&(h=!0)}h===!1&&G1(n,l,u,a),by(n,n.mapping.slice(a).map(u,1),r,void 0,h===null);let p=n.mapping.slice(a),g=p.map(u,1),b=p.map(u+l.nodeSize,1);return n.step(new zt(g,b,g+1,b-1,new ne(Y.from(r.create(f,null,l.marks)),0,0),1,!0)),h===!0&&F1(n,l,u,a),!1}})}function F1(n,e,t,r){e.forEach((s,a)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let f=n.mapping.slice(r).map(t+1+a+l.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function G1(n,e,t,r){e.forEach((s,a)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+a);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function k2(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function A2(n,e,t,r,s){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let l=t.create(r,null,s||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,l);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new zt(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new ne(Y.from(l),0,0),1,!0))}function ui(n,e,t=1,r){let s=n.resolve(e),a=s.depth-t,l=r&&r[r.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>a;h--,p--){let g=s.node(h),b=s.index(h);if(g.type.spec.isolating)return!1;let v=g.content.cutByIndex(b,g.childCount),S=r&&r[p+1];S&&(v=v.replaceChild(0,S.type.create(S.attrs)));let x=r&&r[p]||g;if(!g.canReplace(b+1,g.childCount)||!x.type.validContent(v))return!1}let u=s.indexAfter(a),f=r&&r[0];return s.node(a).canReplaceWith(u,u,f?f.type:s.node(a+1).type)}function C2(n,e,t=1,r){let s=n.doc.resolve(e),a=Y.empty,l=Y.empty;for(let u=s.depth,f=s.depth-t,h=t-1;u>f;u--,h--){a=Y.from(s.node(u).copy(a));let p=r&&r[h];l=Y.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}n.step(new jt(e,e,new ne(a.append(l),t,t),!0))}function us(n,e){let t=n.resolve(e),r=t.index();return K1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function O2(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let a=e.child(s),l=a.type==r?n.type.schema.nodes.text:a.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function K1(n,e){return!!(n&&e&&!n.isLeaf&&O2(n,e))}function Bd(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let a,l,u=r.index(s);if(s==r.depth?(a=r.nodeBefore,l=r.nodeAfter):t>0?(a=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(a=r.node(s).maybeChild(u-1),l=r.node(s+1)),a&&!a.isTextblock&&K1(a,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function M2(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,a=n.doc.resolve(e-t),l=a.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",g=!!l.contentMatch.matchType(s);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);G1(n,p.node(),p.before(),u)}l.inlineContent&&by(n,e+t-1,l,a.node().contentMatchAt(a.index()),r==null);let f=n.mapping.slice(u),h=f.map(e-t);if(n.step(new jt(h,f.map(e+t,-1),ne.empty,!0)),r===!0){let p=n.doc.resolve(h);F1(n,p.node(),p.before(),n.steps.length)}return n}function R2(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let a=r.index(s);if(r.node(s).canReplaceWith(a,a,t))return r.before(s+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,t))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}function J1(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let a=0;a<t.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(a==1)p=h.canReplace(f,f,s);else{let g=h.contentMatchAt(f).findWrapping(s.firstChild.type);p=g&&h.canReplaceWith(f,f,g[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Ud(n,e,t=e,r=ne.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),a=n.resolve(t);return W1(s,a,r)?new jt(e,t,r):new N2(s,a,r).fit()}function W1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class N2{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Y.empty;for(let s=0;s<=e.depth;s++){let a=e.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Y.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let a=this.placed,l=r.depth,u=s.depth;for(;l&&u&&a.childCount==1;)a=a.firstChild.content,l--,u--;let f=new ne(a,l,u);return e>-1?new zt(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new jt(r.pos,s.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let a=t.firstChild;if(t.childCount>1&&(s=0),a.type.spec.isolating&&s<=r){e=r;break}t=a.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,a=null;r?(a=Um(this.unplaced.content,r-1).firstChild,s=a.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],p,g=null;if(t==1&&(l?h.matchType(l.type)||(g=h.fillBefore(Y.from(l),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:u,parent:a,inject:g};if(t==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:a,wrap:p};if(a&&h.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Um(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ne(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Um(e,t);if(s.childCount<=1&&t>0){let a=e.size-t<=t+s.size;this.unplaced=new ne(Hl(e,t-1,1),t-1,a?t-1:r)}else this.unplaced=new ne(Hl(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let x=0;x<a.length;x++)this.openFrontierNode(a[x]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,h=0,p=[],{match:g,type:b}=this.frontier[t];if(s){for(let x=0;x<s.childCount;x++)p.push(s.child(x));g=g.matchFragment(s)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let x=u.child(h),E=g.matchType(x.type);if(!E)break;h++,(h>1||f==0||x.content.size)&&(g=E,p.push(Y1(x.mark(b.allowedMarks(x.marks)),h==1?f:0,h==u.childCount?v:-1)))}let S=h==u.childCount;S||(v=-1),this.placed=$l(this.placed,t,Y.from(p)),this.frontier[t].match=g,S&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,E=u;x<v;x++){let _=E.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),E=_.content}this.unplaced=S?e==0?ne.empty:new ne(Hl(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new ne(Hl(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Pm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Pm(e,t,s,r,a);if(l){for(let u=t-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],p=Pm(e,u,h,f,!0);if(!p||p.childCount)continue e}return{depth:t,fit:l,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=$l(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),a=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,a)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=$l(this.placed,this.depth,Y.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Y.empty,!0);t.childCount&&(this.placed=$l(this.placed,this.frontier.length,t))}}function Hl(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Hl(n.firstChild.content,e-1,t)))}function $l(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy($l(n.lastChild.content,e-1,t)))}function Um(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Y1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Y1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Y.empty,!0)))),n.copy(r)}function Pm(n,e,t,r,s){let a=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==a.childCount&&!t.compatibleContent(a.type))return null;let u=r.fillBefore(a.content,!0,l);return u&&!D2(t,a.content,l)?u:null}function D2(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function L2(n){return n.spec.defining||n.spec.definingForContent}function j2(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),a=n.doc.resolve(t);if(W1(s,a,r))return n.step(new jt(e,t,r));let l=Q1(s,a);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let b=s.depth,v=s.pos-1;b>0;b--,v--){let S=s.node(b).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;l.indexOf(b)>-1?u=b:s.before(b)==v&&l.splice(1,0,-b)}let f=l.indexOf(u),h=[],p=r.openStart;for(let b=r.content,v=0;;v++){let S=b.firstChild;if(h.push(S),v==r.openStart)break;b=S.content}for(let b=p-1;b>=0;b--){let v=h[b],S=L2(v.type);if(S&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=b;else if(S||!v.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let v=(b+p+1)%(r.openStart+1),S=h[v];if(S)for(let x=0;x<l.length;x++){let E=l[(x+f)%l.length],_=!0;E<0&&(_=!1,E=-E);let C=s.node(E-1),O=s.index(E-1);if(C.canReplaceWith(O,O,S.type,S.marks))return n.replace(s.before(E),_?a.after(E):t,new ne(X1(r.content,0,r.openStart,v),v,r.openEnd))}}let g=n.steps.length;for(let b=l.length-1;b>=0&&(n.replace(e,t,r),!(n.steps.length>g));b--){let v=l[b];v<0||(e=s.before(v),t=a.after(v))}}function X1(n,e,t,r,s){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(X1(a.content,e+1,t,r,a)))}if(e>r){let a=s.contentMatchAt(0),l=a.fillBefore(n).append(n);n=l.append(a.matchFragment(l).fillBefore(Y.empty,!0))}return n}function z2(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=R2(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new ne(Y.from(r),0,0))}function I2(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),a=Q1(r,s);for(let l=0;l<a.length;l++){let u=a[l],f=l==a.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function Q1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let a=n.start(s);if(a<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(a==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==a-1)&&t.push(s)}return t}class uo extends en{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at attribute step's position");let r=Object.create(null);for(let a in t.attrs)r[a]=t.attrs[a];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return kt.fromReplace(e,this.pos,this.pos+1,new ne(Y.from(s),0,t.isLeaf?0:1))}getMap(){return Rn.empty}invert(e){return new uo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new uo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uo(t.pos,t.attr,t.value)}}en.jsonID("attr",uo);class gc extends en{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return kt.ok(r)}getMap(){return Rn.empty}invert(e){return new gc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gc(t.attr,t.value)}}en.jsonID("docAttr",gc);let go=class extends Error{};go=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};go.prototype=Object.create(Error.prototype);go.prototype.constructor=go;go.prototype.name="TransformError";class Z1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new mc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new go(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(e=s.map(e,1),t=s.map(t,-1)),s.forEach((a,l,u,f)=>{e=Math.min(e,u),t=Math.max(t,f)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ne.empty){let s=Ud(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new ne(Y.from(r),0,0))}delete(e,t){return this.replace(e,t,ne.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return j2(this,e,t,r),this}replaceRangeWith(e,t,r){return z2(this,e,t,r),this}deleteRange(e,t){return I2(this,e,t),this}lift(e,t){return w2(this,e,t),this}join(e,t=1){return M2(this,e,t),this}wrap(e,t){return T2(this,e,t),this}setBlockType(e,t=e,r,s=null){return _2(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return A2(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new uo(e,t,r)),this}setDocAttribute(e,t){return this.step(new gc(e,t)),this}addNodeMark(e,t){return this.step(new Qi(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Xe)t.isInSet(r.marks)&&this.step(new Zs(e,t));else{let s=r.marks,a,l=[];for(;a=t.isInSet(s);)l.push(new Zs(e,a)),s=a.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return C2(this,e,t,r),this}addMark(e,t,r){return b2(this,e,t,r),this}removeMark(e,t,r){return v2(this,e,t,r),this}clearIncompatible(e,t,r){return by(this,e,t,r),this}}const Hm=Object.create(null);class Ce{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new B2(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ne.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let a=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:h}=l[u],p=e.mapping.slice(a);e.replaceRange(p.map(f.pos),p.map(h.pos),u?ne.empty:t),u==0&&cx(e,a,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],f=e.mapping.slice(r),h=f.map(l.pos),p=f.map(u.pos);a?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),cx(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new Se(e):ro(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let a=e.depth-1;a>=0;a--){let l=t<0?ro(e.node(0),e.node(a),e.before(a+1),e.index(a),t,r):ro(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Nn(e.node(0))}static atStart(e){return ro(e,e,0,0,1)||new Nn(e)}static atEnd(e){return ro(e,e,e.content.size,e.childCount,-1)||new Nn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Hm[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Hm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Hm[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Se.between(this.$anchor,this.$head).getBookmark()}}Ce.prototype.visible=!0;class B2{constructor(e,t){this.$from=e,this.$to=t}}let ox=!1;function lx(n){!ox&&!n.parent.inlineContent&&(ox=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Se extends Ce{constructor(e,t=e){lx(e),lx(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ce.near(r);let s=e.resolve(t.map(this.anchor));return new Se(s.parent.inlineContent?s:r,r)}replace(e,t=ne.empty){if(super.replace(e,t),t==ne.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Se&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Se(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let a=Ce.findFrom(t,r,!0)||Ce.findFrom(t,-r,!0);if(a)t=a.$head;else return Ce.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Ce.findFrom(e,-r,!0)||Ce.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Se(e,t)}}Ce.jsonID("text",Se);class Pd{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Pd(e.map(this.anchor),e.map(this.head))}resolve(e){return Se.between(e.resolve(this.anchor),e.resolve(this.head))}}class me extends Ce{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),a=e.resolve(s);return r?Ce.near(a):new me(a)}content(){return new ne(Y.from(this.node),0,0)}eq(e){return e instanceof me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Sy(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new me(e.resolve(t.anchor))}static create(e,t){return new me(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}me.prototype.visible=!1;Ce.jsonID("node",me);class Sy{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Pd(r,r):new Sy(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&me.isSelectable(r)?new me(t):Ce.near(t)}}class Nn extends Ce{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ne.empty){if(t==ne.empty){e.delete(0,e.doc.content.size);let r=Ce.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Nn(e)}map(e){return new Nn(e)}eq(e){return e instanceof Nn}getBookmark(){return U2}}Ce.jsonID("all",Nn);const U2={map(){return this},resolve(n){return new Nn(n)}};function ro(n,e,t,r,s,a=!1){if(e.inlineContent)return Se.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!a&&me.isSelectable(u))return me.create(n,t-(s<0?u.nodeSize:0))}else{let f=ro(n,u,t+s,s<0?u.childCount:0,s,a);if(f)return f}t+=u.nodeSize*s}return null}function cx(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof jt||s instanceof zt))return;let a=n.mapping.maps[r],l;a.forEach((u,f,h,p)=>{l==null&&(l=p)}),n.setSelection(Ce.near(n.doc.resolve(l),t))}const ux=1,mf=2,fx=4;class P2 extends Z1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ux)&~mf,this.storedMarks=null,this}get selectionSet(){return(this.updated&ux)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=mf,this}ensureMarks(e){return Xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&mf)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~mf,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Xe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let a=this.storedMarks;if(!a){let l=this.doc.resolve(t);a=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,a)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Ce.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=fx,this}get scrolledIntoView(){return(this.updated&fx)>0}}function dx(n,e){return!e||!n?n:n.bind(e)}class ql{constructor(e,t,r){this.name=e,this.init=dx(t.init,r),this.apply=dx(t.apply,r)}}const H2=[new ql("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ql("selection",{init(n,e){return n.selection||Ce.atStart(e.doc)},apply(n){return n.selection}}),new ql("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new ql("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class $m{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=H2.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ql(r.key,r.spec.state,r))})}}class lo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let a=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=s?s[l].n:0,h=s?s[l].state:this,p=f<t.length&&u.spec.appendTransaction.call(u,f?t.slice(f):t,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<l?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),a=!0}s&&(s[l]={state:r,n:t.length})}}if(!a)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new lo(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let a=r[s];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new P2(this)}static create(e){let t=new $m(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new lo(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new $m(this.schema,e.plugins),r=t.fields,s=new lo(t);for(let a=0;a<r.length;a++){let l=r[a].name;s[l]=this.hasOwnProperty(l)?this[l]:r[a].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],a=s.spec.state;a&&a.toJSON&&(t[r]=a.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new $m(e.schema,e.plugins),a=new lo(s);return s.fields.forEach(l=>{if(l.name=="doc")a.doc=pr.fromJSON(e.schema,t.doc);else if(l.name=="selection")a.selection=Ce.fromJSON(a.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){a[l.name]=h.fromJSON.call(f,e,t[u],a);return}}a[l.name]=l.init(e,a)}}),a}}function eT(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=eT(s,e,{})),t[r]=s}return t}class lt{constructor(e){this.spec=e,this.props={},e.props&&eT(e.props,this,this.props),this.key=e.key?e.key.key:tT("plugin")}getState(e){return e[this.key]}}const qm=Object.create(null);function tT(n){return n in qm?n+"$"+ ++qm[n]:(qm[n]=0,n+"$")}class Rt{constructor(e="key"){this.key=tT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const wy=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function nT(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const rT=(n,e,t)=>{let r=nT(n,t);if(!r)return!1;let s=xy(r);if(!s){let l=r.blockRange(),u=l&&ko(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let a=s.nodeBefore;if(dT(n,s,e,-1))return!0;if(r.parent.content.size==0&&(yo(a,"end")||me.isSelectable(a)))for(let l=r.depth;;l--){let u=Ud(n.doc,r.before(l),r.after(l),ne.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=n.tr.step(u);f.setSelection(yo(a,"end")?Ce.findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):me.create(f.doc,s.pos-a.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return a.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),!0):!1},$2=(n,e,t)=>{let r=nT(n,t);if(!r)return!1;let s=xy(r);return s?iT(n,s,e):!1},q2=(n,e,t)=>{let r=aT(n,t);if(!r)return!1;let s=Ey(r);return s?iT(n,s,e):!1};function iT(n,e,t){let r=e.nodeBefore,s=r,a=e.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,f=e.pos+1;for(;!u.isTextblock;f++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Ud(n.doc,a,f,ne.empty);if(!h||h.from!=a||h instanceof jt&&h.slice.size>=f-a)return!1;if(t){let p=n.tr.step(h);p.setSelection(Se.create(p.doc,a)),t(p.scrollIntoView())}return!0}function yo(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const sT=(n,e,t)=>{let{$head:r,empty:s}=n.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;a=xy(r)}let l=a&&a.nodeBefore;return!l||!me.isSelectable(l)?!1:(e&&e(n.tr.setSelection(me.create(n.doc,a.pos-l.nodeSize)).scrollIntoView()),!0)};function xy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function aT(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const oT=(n,e,t)=>{let r=aT(n,t);if(!r)return!1;let s=Ey(r);if(!s)return!1;let a=s.nodeAfter;if(dT(n,s,e,1))return!0;if(r.parent.content.size==0&&(yo(a,"start")||me.isSelectable(a))){let l=Ud(n.doc,r.before(),r.after(),ne.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(yo(a,"start")?Ce.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):me.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return a.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0):!1},lT=(n,e,t)=>{let{$head:r,empty:s}=n.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;a=Ey(r)}let l=a&&a.nodeAfter;return!l||!me.isSelectable(l)?!1:(e&&e(n.tr.setSelection(me.create(n.doc,a.pos)).scrollIntoView()),!0)};function Ey(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const V2=(n,e)=>{let t=n.selection,r=t instanceof me,s;if(r){if(t.node.isTextblock||!us(n.doc,t.from))return!1;s=t.from}else if(s=Bd(n.doc,t.from,-1),s==null)return!1;if(e){let a=n.tr.join(s);r&&a.setSelection(me.create(a.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},F2=(n,e)=>{let t=n.selection,r;if(t instanceof me){if(t.node.isTextblock||!us(n.doc,t.to))return!1;r=t.to}else if(r=Bd(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},G2=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),a=s&&ko(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)},cT=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ty(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const K2=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),a=t.indexAfter(-1),l=Ty(s.contentMatchAt(a));if(!l||!s.canReplaceWith(a,a,l))return!1;if(e){let u=t.after(),f=n.tr.replaceWith(u,u,l.createAndFill());f.setSelection(Ce.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},uT=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Nn||r.parent.inlineContent||s.parent.inlineContent)return!1;let a=Ty(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,a.createAndFill());u.setSelection(Se.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},fT=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(ui(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let r=t.blockRange(),s=r&&ko(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function J2(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof me&&e.selection.node.isBlock)return!r.parentOffset||!ui(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],l,u,f=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){f=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=Ty(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),a.unshift(f&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;a.unshift(null)}let p=e.tr;(e.selection instanceof Se||e.selection instanceof Nn)&&p.deleteSelection();let g=p.mapping.map(r.pos),b=ui(p.doc,g,a.length,a);if(b||(a[0]=u?{type:u}:null,b=ui(p.doc,g,a.length,a)),!b)return!1;if(p.split(g,a.length,a),!f&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),S=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(S.index(),S.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return t&&t(p.scrollIntoView()),!0}}const W2=J2(),Y2=(n,e)=>{let{$from:t,to:r}=n.selection,s,a=t.sharedDepth(r);return a==0?!1:(s=t.before(a),e&&e(n.tr.setSelection(me.create(n.doc,s))),!0)};function X2(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,a=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(s.isTextblock||us(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function dT(n,e,t,r){let s=e.nodeBefore,a=e.nodeAfter,l,u,f=s.type.spec.isolating||a.type.spec.isolating;if(!f&&X2(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&u.matchType(l[0]||a.type).validEnd){if(t){let v=e.pos+a.nodeSize,S=Y.empty;for(let _=l.length-1;_>=0;_--)S=Y.from(l[_].create(null,S));S=Y.from(s.copy(S));let x=n.tr.step(new zt(e.pos-1,v,e.pos,v,new ne(S,1,0),l.length,!0)),E=x.doc.resolve(v+2*l.length);E.nodeAfter&&E.nodeAfter.type==s.type&&us(x.doc,E.pos)&&x.join(E.pos),t(x.scrollIntoView())}return!0}let p=a.type.spec.isolating||r>0&&f?null:Ce.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),b=g&&ko(g);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(g,b).scrollIntoView()),!0;if(h&&yo(a,"start",!0)&&yo(s,"end")){let v=s,S=[];for(;S.push(v),!v.isTextblock;)v=v.lastChild;let x=a,E=1;for(;!x.isTextblock;x=x.firstChild)E++;if(v.canReplace(v.childCount,v.childCount,x.content)){if(t){let _=Y.empty;for(let O=S.length-1;O>=0;O--)_=Y.from(S[O].copy(_));let C=n.tr.step(new zt(e.pos-S.length,e.pos+a.nodeSize,e.pos+E,e.pos+a.nodeSize-E,new ne(_,S.length,0),0,!0));t(C.scrollIntoView())}return!0}}return!1}function hT(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return s.node(a).isTextblock?(t&&t(e.tr.setSelection(Se.create(e.doc,n<0?s.start(a):s.end(a)))),!0):!1}}const Q2=hT(-1),Z2=hT(1);function eL(n,e=null){return function(t,r){let{$from:s,$to:a}=t.selection,l=s.blockRange(a),u=l&&vy(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function hx(n,e=null){return function(t,r){let s=!1;for(let a=0;a<t.selection.ranges.length&&!s;a++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[a];t.doc.nodesBetween(l,u,(f,h)=>{if(s)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)s=!0;else{let p=t.doc.resolve(h),g=p.index();s=p.parent.canReplaceWith(g,g+1,n)}})}if(!s)return!1;if(r){let a=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];a.setBlockType(u,f,n,e)}r(a.scrollIntoView())}return!0}}function _y(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}_y(wy,rT,sT);_y(wy,oT,lT);_y(cT,uT,fT,W2);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function tL(n,e=null){return function(t,r){let{$from:s,$to:a}=t.selection,l=s.blockRange(a);if(!l)return!1;let u=r?t.tr:null;return nL(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function nL(n,e,t,r=null){let s=!1,a=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=l.resolve(e.start-2);a=new Vf(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Vf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=vy(a,t,r,e);return u?(n&&rL(n,e,u,s,t),!0):!1}function rL(n,e,t,r,s){let a=Y.empty;for(let p=t.length-1;p>=0;p--)a=Y.from(t[p].type.create(t[p].attrs,a));n.step(new zt(e.start-(r?2:0),e.end,e.start,e.end,new ne(a,0,0),t.length,!0));let l=0;for(let p=0;p<t.length;p++)t[p].type==s&&(l=p+1);let u=t.length-l,f=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,b=!0;p<g;p++,b=!1)!b&&ui(n.doc,f,u)&&(n.split(f,u),f+=2*u),f+=h.child(p).nodeSize;return n}function iL(n){return function(e,t){let{$from:r,$to:s}=e.selection,a=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return a?t?r.node(a.depth-1).type==n?sL(e,t,n,a):aL(e,t,a):!0:!1}}function sL(n,e,t,r){let s=n.tr,a=r.end,l=r.$to.end(r.depth);a<l&&(s.step(new zt(a-1,l,a,l,new ne(Y.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Vf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=ko(r);if(u==null)return!1;s.lift(r,u);let f=s.doc.resolve(s.mapping.map(a,-1)-1);return us(s.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&s.join(f.pos),e(s.scrollIntoView()),!0}function aL(n,e,t){let r=n.tr,s=t.parent;for(let v=t.end,S=t.endIndex-1,x=t.startIndex;S>x;S--)v-=s.child(S).nodeSize,r.delete(v-1,v+1);let a=r.doc.resolve(t.start),l=a.nodeAfter;if(r.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,f=t.endIndex==s.childCount,h=a.node(-1),p=a.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(f?Y.empty:Y.from(s))))return!1;let g=a.pos,b=g+l.nodeSize;return r.step(new zt(g-(u?1:0),b+(f?1:0),g+1,b-1,new ne((u?Y.empty:Y.from(s.copy(Y.empty))).append(f?Y.empty:Y.from(s.copy(Y.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function oL(n){return function(e,t){let{$from:r,$to:s}=e.selection,a=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!a)return!1;let l=a.startIndex;if(l==0)return!1;let u=a.parent,f=u.child(l-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==u.type,p=Y.from(h?n.create():null),g=new ne(Y.from(n.create(null,Y.from(u.type.create(null,p)))),h?3:1,0),b=a.start,v=a.end;t(e.tr.step(new zt(b-(h?3:1),v,b,v,g,1,!0)).scrollIntoView())}return!0}}const Kt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},bo=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ig=null;const oi=function(n,e,t){let r=Ig||(Ig=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},lL=function(){Ig=null},ea=function(n,e,t,r){return t&&(px(n,e,t,r,-1)||px(n,e,t,r,1))},cL=/^(img|br|input|textarea|hr)$/i;function px(n,e,t,r,s){for(var a;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Yn(n))){let l=n.parentNode;if(!l||l.nodeType!=1||Oc(n)||cL.test(n.nodeName)||n.contentEditable=="false")return!1;e=Kt(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((a=l.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?Yn(n):0}else return!1}}function Yn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function uL(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Yn(n)}else if(n.parentNode&&!Oc(n))e=Kt(n),n=n.parentNode;else return null}}function fL(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Oc(n))e=Kt(n)+1,n=n.parentNode;else return null}}function dL(n,e,t){for(let r=e==0,s=e==Yn(n);r||s;){if(n==t)return!0;let a=Kt(n);if(n=n.parentNode,!n)return!1;r=r&&a==0,s=s&&a==Yn(n)}}function Oc(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Hd=function(n){return n.focusNode&&ea(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Hs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function hL(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function pL(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Yn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Yn(r.startContainer),r.startOffset)}}}const kr=typeof navigator<"u"?navigator:null,mx=typeof document<"u"?document:null,fs=kr&&kr.userAgent||"",Bg=/Edge\/(\d+)/.exec(fs),pT=/MSIE \d/.exec(fs),Ug=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fs),vn=!!(pT||Ug||Bg),ts=pT?document.documentMode:Ug?+Ug[1]:Bg?+Bg[1]:0,Xn=!vn&&/gecko\/(\d+)/i.test(fs);Xn&&+(/Firefox\/(\d+)/.exec(fs)||[0,0])[1];const Pg=!vn&&/Chrome\/(\d+)/.exec(fs),Wt=!!Pg,mT=Pg?+Pg[1]:0,Zt=!vn&&!!kr&&/Apple Computer/.test(kr.vendor),vo=Zt&&(/Mobile\/\w+/.test(fs)||!!kr&&kr.maxTouchPoints>2),Wn=vo||(kr?/Mac/.test(kr.platform):!1),gT=kr?/Win/.test(kr.platform):!1,li=/Android \d/.test(fs),Mc=!!mx&&"webkitFontSmoothing"in mx.documentElement.style,mL=Mc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function gL(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function ni(n,e){return typeof n=="number"?n:n[e]}function yL(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function gx(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=bo(l);continue}let u=l,f=u==a.body,h=f?gL(a):yL(u),p=0,g=0;if(e.top<h.top+ni(r,"top")?g=-(h.top-e.top+ni(s,"top")):e.bottom>h.bottom-ni(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+ni(s,"top")-h.top:e.bottom-h.bottom+ni(s,"bottom")),e.left<h.left+ni(r,"left")?p=-(h.left-e.left+ni(s,"left")):e.right>h.right-ni(r,"right")&&(p=e.right-h.right+ni(s,"right")),p||g)if(f)a.defaultView.scrollBy(p,g);else{let v=u.scrollLeft,S=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let x=u.scrollLeft-v,E=u.scrollTop-S;e={left:e.left-x,top:e.top-E,right:e.right-x,bottom:e.bottom-E}}let b=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(b))break;l=b=="absolute"?l.offsetParent:bo(l)}}function bL(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let a=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(a,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=t-20){r=u,s=f.top;break}}return{refDOM:r,refTop:s,stack:yT(n.dom)}}function yT(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=bo(r));return e}function vL({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;bT(t,r==0?0:r-e)}function bT(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:a}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Qa=null;function SL(n){if(n.setActive)return n.setActive();if(Qa)return n.focus(Qa);let e=yT(n);n.focus(Qa==null?{get preventScroll(){return Qa={preventScroll:!0},!0}}:void 0),Qa||(Qa=!1,bT(e,0))}function vT(n,e){let t,r=2e8,s,a=0,l=e.top,u=e.top,f,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=oi(p).getClientRects();else continue;for(let v=0;v<b.length;v++){let S=b[v];if(S.top<=l&&S.bottom>=u){l=Math.max(S.bottom,l),u=Math.min(S.top,u);let x=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(x<r){t=p,r=x,s=x&&t.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,p.nodeType==1&&x&&(a=g+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!f&&S.left<=e.left&&S.right>=e.left&&(f=p,h={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!t&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(a=g+1)}}return!t&&f&&(t=f,s=h,r=0),t&&t.nodeType==3?wL(t,s):!t||r&&t.nodeType==1?{node:n,offset:a}:vT(t,s)}function wL(n,e){let t=n.nodeValue.length,r=document.createRange(),s;for(let a=0;a<t;a++){r.setEnd(n,a+1),r.setStart(n,a);let l=qi(r,1);if(l.top!=l.bottom&&ky(e,l)){s={node:n,offset:a+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),s||{node:n,offset:0}}function ky(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function xL(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function EL(n,e,t){let{node:r,offset:s}=vT(e,t),a=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();a=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,a)}function TL(n,e,t,r){let s=-1;for(let a=e,l=!1;a!=n.dom;){let u=n.docView.nearestDesc(a,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&f.left>r.left||f.top>r.top?s=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;a=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function ST(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),a=s;;){let l=n.childNodes[a];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(ky(e,h))return ST(l,e,h)}}if((a=(a+1)%r)==s)break}return n}function _L(n,e){let t=n.dom.ownerDocument,r,s=0,a=pL(t,e.left,e.top);a&&({node:r,offset:s}=a);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!ky(e,h)||(l=ST(n.dom,e,h),!l))return null}if(Zt)for(let h=l;r&&h;h=bo(h))h.draggable&&(r=void 0);if(l=xL(l,e),r){if(Xn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&s++}let h;Mc&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=TL(n,r,s,e))}u==null&&(u=EL(n,l,e));let f=n.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function yx(n){return n.top<n.bottom||n.left<n.right}function qi(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(yx(r))return r}return Array.prototype.find.call(t,yx)||n.getBoundingClientRect()}const kL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wT(n,e,t){let{node:r,offset:s,atom:a}=n.docView.domFromPos(e,t<0?-1:1),l=Mc||Xn;if(r.nodeType==3)if(l&&(kL.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let f=qi(oi(r,s,s),t);if(Xn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=qi(oi(r,s-1,s-1),-1);if(h.top==f.top){let p=qi(oi(r,s,s+1),-1);if(p.top!=f.top)return zl(p,p.left<h.left)}}return f}else{let f=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(f--,p=1):t<0?f--:h++,zl(qi(oi(r,f,h),p),p<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&s&&(t<0||s==Yn(r))){let f=r.childNodes[s-1];if(f.nodeType==1)return Vm(f.getBoundingClientRect(),!1)}if(a==null&&s<Yn(r)){let f=r.childNodes[s];if(f.nodeType==1)return Vm(f.getBoundingClientRect(),!0)}return Vm(r.getBoundingClientRect(),t>=0)}if(a==null&&s&&(t<0||s==Yn(r))){let f=r.childNodes[s-1],h=f.nodeType==3?oi(f,Yn(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return zl(qi(h,1),!1)}if(a==null&&s<Yn(r)){let f=r.childNodes[s];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?oi(f,0,l?0:1):f.nodeType==1?f:null:null;if(h)return zl(qi(h,-1),!0)}return zl(qi(r.nodeType==3?oi(r):r,-t),t>=0)}function zl(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Vm(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function xT(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function AL(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return xT(n,e,()=>{let{node:a}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(a,!0);if(!u)break;if(u.node.isBlock){a=u.contentDOM||u.dom;break}a=u.dom.parentNode}let l=wT(n,s.pos,1);for(let u=a.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=oi(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(t=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const CL=/[\u0590-\u08ac]/;function OL(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,a=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!CL.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?a:l:xT(n,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),b=u.caretBidiLevel;u.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:S,focusOffset:x}=n.domSelectionRange(),E=S&&!v.contains(S.nodeType==1?S:S.parentNode)||f==S&&h==x;try{u.collapse(p,g),f&&(f!=p||h!=g)&&u.extend&&u.extend(f,h)}catch{}return b!=null&&(u.caretBidiLevel=b),E}):r.pos==r.start()||r.pos==r.end()}let bx=null,vx=null,Sx=!1;function ML(n,e,t){return bx==e&&vx==t?Sx:(bx=e,vx=t,Sx=t=="up"||t=="down"?AL(n,e,t):OL(n,e,t))}const Qn=0,wx=1,qs=2,Ar=3;class Rc{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Qn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,l;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((l=a.pmViewDesc)&&l.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(l)+l.size:this.posAtStart}else{let a,l;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((l=a.pmViewDesc)&&l.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Kt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let a=this.getDesc(s),l;if(a&&(!t||a.node))if(r&&(l=a.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],a=r+s.size;if(r==e&&a!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<a)return s.descAt(e-r-s.border);r=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let a=0;r<this.children.length;r++){let l=this.children[r],u=a+l.size;if(u>e||l instanceof TT){s=e-a;break}a=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof ET&&a.side>=0;r--);if(t<=0){let a,l=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,l=!1);return a&&t&&l&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?Kt(a.dom)+1:0}}else{let a,l=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,l=!1);return a&&l&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?Kt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let l=r,u=0;;u++){let f=this.children[u],h=l+f.size;if(s==-1&&e<=h){let p=l+f.border;if(e>=p&&t<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,p);e=l;for(let g=u;g>0;g--){let b=this.children[g-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){s=Kt(b.dom)+1;break}e-=b.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){a=Kt(g.dom);break}t+=g.size}a==-1&&(a=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let a=Math.min(e,t),l=Math.max(e,t);for(let v=0,S=0;v<this.children.length;v++){let x=this.children[v],E=S+x.size;if(a>S&&l<E)return x.setSelection(e-S-x.border,t-S-x.border,r,s);S=E}let u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Xn||Zt)&&e==t){let{node:v,offset:S}=u;if(v.nodeType==3){if(g=!!(S&&v.nodeValue[S-1]==`
`),g&&S==v.nodeValue.length)for(let x=v,E;x;x=x.parentNode){if(E=x.nextSibling){E.nodeName=="BR"&&(u=f={node:E.parentNode,offset:Kt(E)+1});break}let _=x.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let x=v.childNodes[S-1];g=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Xn&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||g&&Zt)&&ea(u.node,u.offset,p.anchorNode,p.anchorOffset)&&ea(f.node,f.offset,p.focusNode,p.focusOffset))return;let b=!1;if((h.extend||e==t)&&!(g&&Xn)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>t){let S=u;u=f,f=S}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let a=this.children[s],l=r+a.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+a.border,f=l-a.border;if(e>=u&&t<=f){this.dirty=e==r||t==l?qs:wx,e==u&&t==f&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Ar:a.markDirty(e-u,t-u);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?qs:Ar}r=l}this.dirty=qs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?qs:wx;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class ET extends Rc{constructor(e,t,r,s){let a,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==Qn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class RL extends Rc{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ta extends Rc{constructor(e,t,r,s,a){super(e,[],r,s),this.mark=t,this.spec=a}static create(e,t,r,s){let a=s.nodeViews[t.type.name],l=a&&a(t,s,r);return(!l||!l.dom)&&(l=aa.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new ta(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ar||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ar&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qn}}slice(e,t,r){let s=ta.create(this.parent,this.mark,!0,r),a=this.children,l=this.size;t<l&&(a=$g(a,t,l,r)),e>0&&(a=$g(a,0,e,r));for(let u=0;u<a.length;u++)a[u].parent=s;return s.children=a,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ns extends Rc{constructor(e,t,r,s,a,l,u,f,h){super(e,[],a,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,a,l){let u=a.nodeViews[t.type.name],f,h=u&&u(t,a,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,s),p=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=aa.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let b=p;return p=AT(p,r,t),h?f=new NL(e,t,r,s,p,g||null,b,h,a,l+1):t.isText?new $d(e,t,r,s,p,b,a):new ns(e,t,r,s,p,g||null,b,a,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Y.empty)}return e}matchesNode(e,t,r){return this.dirty==Qn&&e.eq(this.node)&&Gf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,a=e.composing?this.localCompositionInfo(e,t):null,l=a&&a.pos>-1?a:null,u=a&&a.pos<0,f=new LL(this,l&&l.node,e);IL(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!g&&f.syncToMarks(p==this.node.childCount?Xe.none:this.node.child(p).marks,r,e,p),f.placeWidget(h,e,s)},(h,p,g,b)=>{f.syncToMarks(h.marks,r,e,b);let v;f.findNodeMatch(h,p,g,b)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(v=f.findIndexWithChild(a.node))>-1&&f.updateNodeAt(h,p,g,v,e)||f.updateNextNode(h,p,g,e,b,s)||f.addNode(h,p,g,e,s),s+=h.nodeSize}),f.syncToMarks([],r,e,0),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==qs)&&(l&&this.protectLocalComposition(e,l),_T(this.contentDOM,this.children,e),vo&&BL(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Se)||r<t||s>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let l=a.nodeValue,u=UL(this.node.content,l,r-t,s-t);return u<0?null:{node:a,pos:u,text:l}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let l=new RL(this,a,t,s);e.input.compositionNodes.push(l),this.children=$g(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Ar||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Qn}updateOuterDeco(e){if(Gf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=kT(this.dom,this.nodeDOM,Hg(this.outerDeco,this.node,t),Hg(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function xx(n,e,t,r,s){AT(r,e,n);let a=new ns(void 0,n,e,t,r,r,r,s,0);return a.contentDOM&&a.updateChildren(s,0),a}class $d extends ns{constructor(e,t,r,s,a,l,u){super(e,t,r,s,a,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ar||this.dirty!=Qn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Qn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),a=document.createTextNode(s.text);return new $d(this.parent,s,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ar)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TT extends Rc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class NL extends ns{constructor(e,t,r,s,a,l,u,f,h,p){super(e,t,r,s,a,l,u,h,p),this.spec=f}update(e,t,r,s){if(this.dirty==Ar)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,r);return a&&this.updateInner(e,t,r,s),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _T(n,e,t){let r=n.firstChild,s=!1;for(let a=0;a<e.length;a++){let l=e[a],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=Ex(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof ta){let f=r?r.previousSibling:n.lastChild;_T(l.contentDOM,l.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=Ex(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Yl=function(n){n&&(this.nodeName=n)};Yl.prototype=Object.create(null);const Vs=[new Yl];function Hg(n,e,t){if(n.length==0)return Vs;let r=t?Vs[0]:new Yl,s=[r];for(let a=0;a<n.length;a++){let l=n[a].type.attrs;if(l){l.nodeName&&s.push(r=new Yl(l.nodeName));for(let u in l){let f=l[u];f!=null&&(t&&s.length==1&&s.push(r=new Yl(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return s}function kT(n,e,t,r){if(t==Vs&&r==Vs)return e;let s=e;for(let a=0;a<r.length;a++){let l=r[a],u=t[a];if(a){let f;u&&u.nodeName==l.nodeName&&s!=n&&(f=s.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(s),u=Vs[0]),s=f}DL(s,u||Vs[0],l)}return s}function DL(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)s.indexOf(r[a])==-1&&n.classList.remove(r[a]);for(let a=0;a<s.length;a++)r.indexOf(s[a])==-1&&n.classList.add(s[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function AT(n,e,t){return kT(n,n,Vs,Hg(e,t,n.nodeType!=1))}function Gf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Ex(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class LL{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jL(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r,s){let a=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;a<u&&(a==l-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<l;)this.destroyRest(),this.top.dirty=Qn,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let f=-1,h=this.top.children.length;s<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let g=this.top.children[p];if(g.matchesMark(e[l])&&!this.isLocked(g.dom)){f=p;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let p=ta.create(this.top,e[l],t,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,r,s){let a=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))a=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){a=u;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,r,s,a){let l=this.top.children[s];return l.dirty==Ar&&l.dom==l.contentDOM&&(l.dirty=qs),l.update(e,t,r,a)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,a,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof ns){let h=this.preMatch.matched.get(f);if(h!=null&&h!=a)return!1;let p=f.dom,g,b=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Ar&&Gf(t,f.outerDeco));if(!b&&f.update(e,t,r,s))return this.destroyBetween(this.index,u),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(g=this.recreateWrapper(f,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=qs,g.updateChildren(s,l+1),g.dirty=Qn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,a,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Gf(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=ns.create(this.top,t,r,s,a,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,t,r,s,a){let l=ns.create(this.top,e,t,r,s,a);l.contentDOM&&l.updateChildren(s,a+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let a=new ET(this.top,e,t,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ta;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof $d)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zt||Wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new TT(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function jL(n,e){let t=e,r=t.children.length,s=n.childCount,a=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof ta)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=u.node;if(f){if(f!=n.child(s-1))break;--s,a.set(u,s),l.push(u)}}return{index:s,matched:a,matches:l.reverse()}}function zL(n,e){return n.type.side-e.type.side}function IL(n,e,t,r){let s=e.locals(n),a=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(a,p),h),a+=p.nodeSize}return}let l=0,u=[],f=null;for(let h=0;;){let p,g;for(;l<s.length&&s[l].to==a;){let E=s[l++];E.widget&&(p?(g||(g=[p])).push(E):p=E)}if(p)if(g){g.sort(zL);for(let E=0;E<g.length;E++)t(g[E],h,!!f)}else t(p,h,!!f);let b,v;if(f)v=-1,b=f,f=null;else if(h<n.childCount)v=h,b=n.child(h++);else break;for(let E=0;E<u.length;E++)u[E].to<=a&&u.splice(E--,1);for(;l<s.length&&s[l].from<=a&&s[l].to>a;)u.push(s[l++]);let S=a+b.nodeSize;if(b.isText){let E=S;l<s.length&&s[l].from<E&&(E=s[l].from);for(let _=0;_<u.length;_++)u[_].to<E&&(E=u[_].to);E<S&&(f=b.cut(E-a),b=b.cut(0,E-a),S=E,v=-1)}else for(;l<s.length&&s[l].to<S;)l++;let x=b.isInline&&!b.isLeaf?u.filter(E=>!E.inline):u.slice();r(b,x,e.forChild(a,b),v),a=S}}function BL(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function UL(n,e,t,r){for(let s=0,a=0;s<n.childCount&&a<=r;){let l=n.child(s++),u=a;if(a+=l.nodeSize,!l.isText)continue;let f=l.text;for(;s<n.childCount;){let h=n.child(s++);if(a+=h.nodeSize,!h.isText)break;f+=h.text}if(a>=t){if(a>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function $g(n,e,t,r,s){let a=[];for(let l=0,u=0;l<n.length;l++){let f=n[l],h=u,p=u+=f.size;h>=t||p<=e?a.push(f):(h<e&&a.push(f.slice(0,e-h,r)),s&&(a.push(s),s=void 0),p>t&&a.push(f.slice(t-h,f.size,r)))}return a}function Ay(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),a=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,h;if(Hd(t)){for(f=l;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&me.isSelectable(g)&&s.parent&&!(g.isInline&&dL(t.focusNode,t.focusOffset,s.dom))){let b=s.posBefore;h=new me(l==b?u:r.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=l,b=l;for(let v=0;v<t.rangeCount;v++){let S=t.getRangeAt(v);g=Math.min(g,n.docView.posFromDOM(S.startContainer,S.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[f,l]=b==n.state.selection.anchor?[b,g]:[g,b],u=r.resolve(l)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let g=e=="pointer"||n.state.selection.head<u.pos&&!a?1:-1;h=Cy(n,p,u,g)}return h}function CT(n){return n.editable?n.hasFocus():MT(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function fi(n,e=!1){let t=n.state.selection;if(OT(n,t),!!CT(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Wt){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&ea(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)HL(n);else{let{anchor:r,head:s}=t,a,l;Tx&&!(t instanceof Se)&&(t.$from.parent.inlineContent||(a=_x(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=_x(n,t.to))),n.docView.setSelection(r,s,n,e),Tx&&(a&&kx(a),l&&kx(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&PL(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Tx=Zt||Wt&&mT<63;function _x(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,a=r?t.childNodes[r-1]:null;if(Zt&&s&&s.contentEditable=="false")return Fm(s);if((!s||s.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(s)return Fm(s);if(a)return Fm(a)}}function Fm(n){return n.contentEditable="true",Zt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function kx(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function PL(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!CT(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function HL(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Kt(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&vn&&ts<=11&&(t.disabled=!0,t.disabled=!1)}function OT(n,e){if(e instanceof me){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ax(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ax(n)}function Ax(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Cy(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||Se.between(e,t,r)}function Cx(n){return n.editable&&!n.hasFocus()?!1:MT(n)}function MT(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $L(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ea(e.node,e.offset,t.anchorNode,t.anchorOffset)}function qg(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),a=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return a&&Ce.findFrom(a,e)}function Fi(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Ox(n,e,t){let r=n.state.selection;if(r instanceof Se)if(t.indexOf("s")>-1){let{$head:s}=r,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+a.nodeSize*(e<0?-1:1));return Fi(n,new Se(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=qg(n.state,e);return s&&s instanceof me?Fi(n,s):!1}else if(!(Wn&&t.indexOf("m")>-1)){let s=r.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!a||a.isText)return!1;let u=e<0?s.pos-a.nodeSize:s.pos;return a.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?me.isSelectable(a)?Fi(n,new me(e<0?n.state.doc.resolve(s.pos-a.nodeSize):s)):Mc?Fi(n,new Se(n.state.doc.resolve(e<0?u:u+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof me&&r.node.isInline)return Fi(n,new Se(e>0?r.$to:r.$from));{let s=qg(n.state,e);return s?Fi(n,s):!1}}}function Kf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Xl(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Za(n,e){return e<0?qL(n):VL(n)}function qL(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,a,l=!1;for(Xn&&t.nodeType==1&&r<Kf(t)&&Xl(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Xl(u,-1))s=t,a=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(RT(t))break;{let u=t.previousSibling;for(;u&&Xl(u,-1);)s=t.parentNode,a=Kt(u),u=u.previousSibling;if(u)t=u,r=Kf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?Vg(n,t,r):s&&Vg(n,s,a)}function VL(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Kf(t),a,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Xl(u,1))a=t,l=++r;else break}else{if(RT(t))break;{let u=t.nextSibling;for(;u&&Xl(u,1);)a=u.parentNode,l=Kt(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=Kf(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}a&&Vg(n,a,l)}function RT(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function FL(n,e){for(;n&&e==n.childNodes.length&&!Oc(n);)e=Kt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function GL(n,e){for(;n&&!e&&!Oc(n);)e=Kt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Vg(n,e,t){if(e.nodeType!=3){let a,l;(l=FL(e,t))?(e=l,t=0):(a=GL(e,t))&&(e=a,t=a.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Hd(r)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&fi(n)},50)}function Mx(n,e){let t=n.state.doc.resolve(e);if(!(Wt||gT)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),l=(a.top+a.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(a.left-s.left)>1)return a.left<s.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),l=(a.top+a.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(a.left-s.left)>1)return a.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Rx(n,e,t){let r=n.state.selection;if(r instanceof Se&&!r.empty||t.indexOf("s")>-1||Wn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:a}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=qg(n.state,e);if(l&&l instanceof me)return Fi(n,l)}if(!s.parent.inlineContent){let l=e<0?s:a,u=r instanceof Nn?Ce.near(l,e):Ce.findFrom(l,e);return u?Fi(n,u):!1}return!1}function Nx(n,e){if(!(n.state.selection instanceof Se))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let l=n.state.tr;return e<0?l.delete(t.pos-a.nodeSize,t.pos):l.delete(t.pos,t.pos+a.nodeSize),n.dispatch(l),!0}return!1}function Dx(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function KL(n){if(!Zt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Dx(n,r,"true"),setTimeout(()=>Dx(n,r,"false"),20)}return!1}function JL(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function WL(n,e){let t=e.keyCode,r=JL(e);if(t==8||Wn&&t==72&&r=="c")return Nx(n,-1)||Za(n,-1);if(t==46&&!e.shiftKey||Wn&&t==68&&r=="c")return Nx(n,1)||Za(n,1);if(t==13||t==27)return!0;if(t==37||Wn&&t==66&&r=="c"){let s=t==37?Mx(n,n.state.selection.from)=="ltr"?-1:1:-1;return Ox(n,s,r)||Za(n,s)}else if(t==39||Wn&&t==70&&r=="c"){let s=t==39?Mx(n,n.state.selection.from)=="ltr"?1:-1:1;return Ox(n,s,r)||Za(n,s)}else{if(t==38||Wn&&t==80&&r=="c")return Rx(n,-1,r)||Za(n,-1);if(t==40||Wn&&t==78&&r=="c")return KL(n)||Rx(n,1,r)||Za(n,1);if(r==(Wn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Oy(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:s,openEnd:a}=e;for(;s>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,a--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=n.someProp("clipboardSerializer")||aa.fromSchema(n.state.schema),u=IT(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let h=f.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=zT[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let S=u.createElement(p[v]);for(;f.firstChild;)S.appendChild(f.firstChild);f.appendChild(S),g++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${a}${g?` -${g}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function NT(n,e,t,r,s){let a=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let f=!!e&&(r||a||!t);if(f){if(n.someProp("transformPastedText",b=>{e=b(e,a||r,n)}),a)return u=new ne(Y.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{u=b(u,n,!0)}),u;let g=n.someProp("clipboardTextParser",b=>b(e,s,r,n));if(g)u=g;else{let b=s.marks(),{schema:v}=n.state,S=aa.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let E=l.appendChild(document.createElement("p"));x&&E.appendChild(S.serializeNode(v.text(x,b)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),l=ZL(t),Mc&&ej(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let b=l.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;l=b}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||es.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||p),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!YL.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)u=tj(Lx(u,+p[1],+p[2]),p[4]);else if(u=ne.maxOpen(XL(u.content,s),!0),u.openStart||u.openEnd){let g=0,b=0;for(let v=u.content.firstChild;g<u.openStart&&!v.type.spec.isolating;g++,v=v.firstChild);for(let v=u.content.lastChild;b<u.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);u=Lx(u,g,b)}return n.someProp("transformPasted",g=>{u=g(u,n,f)}),u}const YL=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function XL(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),a,l=[];if(n.forEach(u=>{if(!l)return;let f=s.findWrapping(u.type),h;if(!f)return l=null;if(h=l.length&&a.length&&LT(f,a,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=jT(l[l.length-1],a.length));let p=DT(u,f);l.push(p),s=s.matchType(p.type),a=f}}),l)return Y.from(l)}return n}function DT(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,Y.from(n));return n}function LT(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let a=LT(n,e,t,r.lastChild,s+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(Y.from(DT(t,n,s+1))))}}function jT(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,jT(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(Y.empty,!0);return n.copy(t.append(r))}function Fg(n,e,t,r,s,a){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(a=0),s<r-1&&(u=Fg(u,e,t,r,s+1,a)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,a<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(Y.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Lx(n,e,t){return e<n.openStart&&(n=new ne(Fg(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ne(Fg(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const zT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let jx=null;function IT(){return jx||(jx=document.implementation.createHTMLDocument("title"))}let Gm=null;function QL(n){let e=window.trustedTypes;return e?(Gm||(Gm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Gm.createHTML(n)):n}function ZL(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=IT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&zT[r[1].toLowerCase()])&&(n=s.map(a=>"<"+a+">").join("")+n+s.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=QL(n),s)for(let a=0;a<s.length;a++)t=t.querySelector(s[a])||t;return t}function ej(n){let e=n.querySelectorAll(Wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function tj(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:a,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let f=t.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;s=Y.from(f.create(r[u+1],s)),a++,l++}return new ne(s,a,l)}const on={},ln={},nj={touchstart:!0,touchmove:!0};class rj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ij(n){for(let e in on){let t=on[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{aj(n,r)&&!My(n,r)&&(n.editable||!(r.type in ln))&&t(n,r)},nj[e]?{passive:!0}:void 0)}Zt&&n.dom.addEventListener("input",()=>null),Gg(n)}function Zi(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function sj(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Gg(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>My(n,r))})}function My(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function aj(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function oj(n,e){!My(n,e)&&on[e.type]&&(n.editable||!(e.type in ln))&&on[e.type](n,e)}ln.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!UT(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(li&&Wt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),vo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Hs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||WL(n,t)?t.preventDefault():Zi(n,"key")};ln.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};ln.keypress=(n,e)=>{let t=e;if(UT(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Wn&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Se)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,a))&&n.dispatch(a()),t.preventDefault()}};function qd(n){return{left:n.clientX,top:n.clientY}}function lj(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Ry(n,e,t,r,s){if(r==-1)return!1;let a=n.state.doc.resolve(r);for(let l=a.depth+1;l>0;l--)if(n.someProp(e,u=>l>a.depth?u(n,t,a.nodeAfter,a.before(l),s,!0):u(n,t,a.node(l),a.before(l),s,!1)))return!0;return!1}function fo(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function cj(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&me.isSelectable(r)?(fo(n,new me(t)),!0):!1}function uj(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof me&&(r=t.node);let a=n.state.doc.resolve(e);for(let l=a.depth+1;l>0;l--){let u=l>a.depth?a.nodeAfter:a.node(l);if(me.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?s=a.before(t.$from.depth):s=a.before(l);break}}return s!=null?(fo(n,me.create(n.state.doc,s)),!0):!1}function fj(n,e,t,r,s){return Ry(n,"handleClickOn",e,t,r)||n.someProp("handleClick",a=>a(n,e,r))||(s?uj(n,t):cj(n,t))}function dj(n,e,t,r){return Ry(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function hj(n,e,t,r){return Ry(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||pj(n,t,r)}function pj(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(fo(n,Se.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a),u=s.before(a);if(l.inlineContent)fo(n,Se.create(r,u+1,u+1+l.content.size));else if(me.isSelectable(l))fo(n,me.create(r,u));else continue;return!0}}function Ny(n){return Jf(n)}const BT=Wn?"metaKey":"ctrlKey";on.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Ny(n),s=Date.now(),a="singleClick";s-n.input.lastClick.time<500&&lj(t,n.input.lastClick)&&!t[BT]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:a,button:t.button};let l=n.posAtCoords(qd(t));l&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new mj(n,l,t,!!r)):(a=="doubleClick"?dj:hj)(n,l.pos,l.inside,t)?t.preventDefault():Zi(n,"pointer"))};class mj{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[BT],this.allowDefault=r.shiftKey;let a,l;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),l=t.inside;else{let p=e.state.doc.resolve(t.pos);a=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||h instanceof me&&h.from<=l&&h.to>l)&&(this.mightDrag={node:a,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>fi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(qd(e))),this.updateAllowDefault(e),this.allowDefault||!t?Zi(this.view,"pointer"):fj(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zt&&this.mightDrag&&!this.mightDrag.node.isAtom||Wt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(fo(this.view,Ce.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Zi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}on.touchstart=n=>{n.input.lastTouch=Date.now(),Ny(n),Zi(n,"pointer")};on.touchmove=n=>{n.input.lastTouch=Date.now(),Zi(n,"pointer")};on.contextmenu=n=>Ny(n);function UT(n,e){return n.composing?!0:Zt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const gj=li?5e3:-1;ln.compositionstart=ln.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Se&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Wt&&gT&&yj(n)))n.markCursor=n.state.storedMarks||t.marks(),Jf(n,!0),n.markCursor=null;else if(Jf(n,!e.selection.empty),Xn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,a=r.focusOffset;s&&s.nodeType==1&&a!=0;){let l=a<0?s.lastChild:s.childNodes[a-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,a=-1}}n.input.composing=!0}PT(n,gj)};function yj(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}ln.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,PT(n,20))};function PT(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Jf(n),e))}function HT(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=vj());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function bj(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=uL(e.focusNode,e.focusOffset),r=fL(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||r==a)return a;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function vj(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Jf(n,e=!1){if(!(li&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),HT(n),e||n.docView&&n.docView.dirty){let t=Ay(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Sj(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const yc=vn&&ts<15||vo&&mL<604;on.copy=ln.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let a=yc?null:t.clipboardData,l=r.content(),{dom:u,text:f}=Oy(n,l);a?(t.preventDefault(),a.clearData(),a.setData("text/html",u.innerHTML),a.setData("text/plain",f)):Sj(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wj(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function xj(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?bc(n,r.value,null,s,e):bc(n,r.textContent,r.innerHTML,s,e)},50)}function bc(n,e,t,r,s){let a=NT(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,s,a||ne.empty)))return!0;if(!a)return!1;let l=wj(a),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(a);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function $T(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}ln.paste=(n,e)=>{let t=e;if(n.composing&&!li)return;let r=yc?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&bc(n,$T(r),r.getData("text/html"),s,t)?t.preventDefault():xj(n,t)};class qT{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Ej=Wn?"altKey":"ctrlKey";function VT(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[Ej]}on.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,a=s.empty?null:n.posAtCoords(qd(t)),l;if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof me?s.to-1:s.to))){if(r&&r.mightDrag)l=me.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(l=me.create(n.state.doc,g.posBefore))}}let u=(l||n.state.selection).content(),{dom:f,text:h,slice:p}=Oy(n,u);(!t.dataTransfer.files.length||!Wt||mT>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(yc?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",yc||t.dataTransfer.setData("text/plain",h),n.dragging=new qT(p,VT(n,t),l)};on.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};ln.dragover=ln.dragenter=(n,e)=>e.preventDefault();ln.drop=(n,e)=>{try{Tj(n,e,n.dragging)}finally{n.dragging=null}};function Tj(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(qd(e));if(!r)return;let s=n.state.doc.resolve(r.pos),a=t&&t.slice;a?n.someProp("transformPasted",v=>{a=v(a,n,!1)}):a=NT(n,$T(e.dataTransfer),yc?null:e.dataTransfer.getData("text/html"),!1,s);let l=!!(t&&VT(n,e));if(n.someProp("handleDrop",v=>v(n,e,a||ne.empty,l))){e.preventDefault();return}if(!a)return;e.preventDefault();let u=a?J1(n.state.doc,s.pos,a):s.pos;u==null&&(u=s.pos);let f=n.state.tr;if(l){let{node:v}=t;v?v.replace(f):f.deleteSelection()}let h=f.mapping.map(u),p=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,g=f.doc;if(p?f.replaceRangeWith(h,h,a.content.firstChild):f.replaceRange(h,h,a),f.doc.eq(g))return;let b=f.doc.resolve(h);if(p&&me.isSelectable(a.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new me(b));else{let v=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((S,x,E,_)=>v=_),f.setSelection(Cy(n,b,f.doc.resolve(v)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))}on.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&fi(n)},20))};on.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};on.beforeinput=(n,e)=>{if(Wt&&li&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,Hs(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in ln)on[n]=ln[n];function vc(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Wf{constructor(e,t){this.toDOM=e,this.spec=t||Ws,this.side=this.spec.side||0}map(e,t,r,s){let{pos:a,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new rn(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Wf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class rs{constructor(e,t){this.attrs=e,this.spec=t||Ws}map(e,t,r,s){let a=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return a>=l?null:new rn(a,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof rs&&vc(this.attrs,e.attrs)&&vc(this.spec,e.spec)}static is(e){return e.type instanceof rs}destroy(){}}class Dy{constructor(e,t){this.attrs=e,this.spec=t||Ws}map(e,t,r,s){let a=e.mapResult(t.from+s,1);if(a.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=a.pos?null:new rn(a.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),a;return s==t.from&&!(a=e.child(r)).isText&&s+a.nodeSize==t.to}eq(e){return this==e||e instanceof Dy&&vc(this.attrs,e.attrs)&&vc(this.spec,e.spec)}destroy(){}}class rn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new rn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new rn(e,e,new Wf(t,r))}static inline(e,t,r,s){return new rn(e,t,new rs(r,s))}static node(e,t,r,s){return new rn(e,t,new Dy(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof rs}get widget(){return this.type instanceof Wf}}const io=[],Ws={};class at{constructor(e,t){this.local=e.length?e:io,this.children=t.length?t:io}static create(e,t){return t.length?Yf(t,e,0,Ws):Xt}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,a){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!a||a(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,a)}}map(e,t,r){return this==Xt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ws)}mapInner(e,t,r,s,a){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,s);f&&f.type.valid(t,f)?(l||(l=[])).push(f):a.onRemove&&a.onRemove(this.local[u].spec)}return this.children.length?_j(this.children,l||[],e,t,r,s,a):l?new at(l.sort(Ys),io):Xt}add(e,t){return t.length?this==Xt?at.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,a=0;e.forEach((u,f)=>{let h=f+r,p;if(p=GT(t,u,h)){for(s||(s=this.children.slice());a<s.length&&s[a]<f;)a+=3;s[a]==f?s[a+2]=s[a+2].addInner(u,p,h+1):s.splice(a,0,f,f+u.nodeSize,Yf(p,u,h+1,Ws)),a+=3}});let l=FT(a?KT(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new at(l.length?this.local.concat(l).sort(Ys):this.local,s||this.children)}remove(e){return e.length==0||this==Xt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let a=0;a<r.length;a+=3){let l,u=r[a]+t,f=r[a+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<f&&(e[p]=null,(l||(l=[])).push(g));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[a+2].removeInner(l,u+1);h!=Xt?r[a+2]=h:(r.splice(a,3),a-=3)}if(s.length){for(let a=0,l;a<e.length;a++)if(l=e[a])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new at(s,r):Xt}forChild(e,t){if(this==Xt)return this;if(t.isLeaf)return at.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let a=e+1,l=a+t.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>a&&f.type instanceof rs){let h=Math.max(a,f.from)-a,p=Math.min(l,f.to)-a;h<p&&(s||(s=[])).push(f.copy(h,p))}}if(s){let u=new at(s.sort(Ys),io);return r?new Wi([u,r]):u}return r||Xt}eq(e){if(this==e)return!0;if(!(e instanceof at)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ly(this.localsInner(e))}localsInner(e){if(this==Xt)return io;if(e.inlineContent||!this.local.some(rs.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof rs||t.push(this.local[r]);return t}forEachSet(e){e(this)}}at.empty=new at([],[]);at.removeOverlap=Ly;const Xt=at.empty;class Wi{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Ws));return Wi.from(r)}forChild(e,t){if(t.isLeaf)return at.empty;let r=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(e,t);a!=Xt&&(a instanceof Wi?r=r.concat(a.members):r.push(a))}return Wi.from(r)}eq(e){if(!(e instanceof Wi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(e);if(a.length)if(!t)t=a;else{r&&(t=t.slice(),r=!1);for(let l=0;l<a.length;l++)t.push(a[l])}}return t?Ly(r?t:t.sort(Ys)):io}static from(e){switch(e.length){case 0:return Xt;case 1:return e[0];default:return new Wi(e.every(t=>t instanceof at)?e:e.reduce((t,r)=>t.concat(r instanceof at?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function _j(n,e,t,r,s,a,l){let u=n.slice();for(let h=0,p=a;h<t.maps.length;h++){let g=0;t.maps[h].forEach((b,v,S,x)=>{let E=x-S-(v-b);for(let _=0;_<u.length;_+=3){let C=u[_+1];if(C<0||b>C+p-g)continue;let O=u[_]+p-g;v>=O?u[_+1]=b<=O?-2:-1:b>=p&&E&&(u[_]+=E,u[_+1]+=E)}g+=E}),p=t.maps[h].map(p,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let p=t.map(n[h]+a),g=p-s;if(g<0||g>=r.content.size){f=!0;continue}let b=t.map(n[h+1]+a,-1),v=b-s,{index:S,offset:x}=r.content.findIndex(g),E=r.maybeChild(S);if(E&&x==g&&x+E.nodeSize==v){let _=u[h+2].mapInner(t,E,p+1,n[h]+a+1,l);_!=Xt?(u[h]=g,u[h+1]=v,u[h+2]=_):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=kj(u,n,e,t,s,a,l),p=Yf(h,r,0,l);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,b=0;g<p.children.length;g+=3){let v=p.children[g];for(;b<u.length&&u[b]<v;)b+=3;u.splice(b,0,p.children[g],p.children[g+1],p.children[g+2])}}return new at(e.sort(Ys),u)}function FT(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new rn(s.from+e,s.to+e,s.type))}return t}function kj(n,e,t,r,s,a,l){function u(f,h){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(r,s,h);g?t.push(g):l.onRemove&&l.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)u(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&u(n[f+2],e[f]+a+1);return t}function GT(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let a=0,l;a<n.length;a++)(l=n[a])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[a]=null);return s}function KT(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Yf(n,e,t,r){let s=[],a=!1;e.forEach((u,f)=>{let h=GT(n,u,f+t);if(h){a=!0;let p=Yf(h,u,t+f+1,r);p!=Xt&&s.push(f,f+u.nodeSize,p)}});let l=FT(a?KT(n):n,-t).sort(Ys);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new at(l,s):Xt}function Ys(n,e){return n.from-e.from||n.to-e.to}function Ly(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let a=e[s];if(a.from==r.from){a.to!=r.to&&(e==n&&(e=n.slice()),e[s]=a.copy(a.from,r.to),zx(e,s+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,a.from),zx(e,s,r.copy(a.from,r.to)));break}}}return e}function zx(n,e,t){for(;e<n.length&&Ys(t,n[e])>0;)e++;n.splice(e,0,t)}function Km(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Xt&&e.push(r)}),n.cursorWrapper&&e.push(at.create(n.state.doc,[n.cursorWrapper.deco])),Wi.from(e)}const Aj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Cj=vn&&ts<=11;class Oj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Mj{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Oj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);vn&&ts<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():Zt&&e.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Cj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Aj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Cx(this.view)){if(this.suppressingSelectionUpdates)return fi(this.view);if(vn&&ts<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ea(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let a=e.focusNode;a;a=bo(a))t.add(a);for(let a=e.anchorNode;a;a=bo(a))if(t.has(a)){r=a;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Cx(e)&&!this.ignoreSelectionChange(r),a=-1,l=-1,u=!1,f=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],f);g&&(a=a<0?g.from:Math.min(g.from,a),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(u=!0))}if(f.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of f)if(p.nodeName=="BR"&&p.parentNode){let g=p.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(Xn&&f.length){let p=f.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,b]=p;g.parentNode&&g.parentNode.parentNode==b.parentNode?b.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let b of p){let v=b.parentNode;v&&v.nodeName=="LI"&&(!g||Dj(e,g)!=v)&&b.remove()}}}let h=null;a<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Hd(r)&&(h=Ay(e))&&h.eq(Ce.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,fi(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||s)&&(a>-1&&(e.docView.markDirty(a,l),Rj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Lj(e,f)),this.handleDOMChange(a,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||fi(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,a=e.nextSibling;if(vn&&ts<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:b}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let l=s&&s.parentNode==e.target?Kt(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=a&&a.parentNode==e.target?Kt(a):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Ix=new WeakMap,Bx=!1;function Rj(n){if(!Ix.has(n)&&(Ix.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Xn,Bx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Bx=!0}}function Ux(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,a=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return ea(l.node,l.offset,s,a)&&([t,r,s,a]=[s,a,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:a}}function Nj(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Ux(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Ux(n,t):null}function Dj(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function Lj(n,e){var t;let{focusNode:r,focusOffset:s}=n.domSelectionRange();for(let a of e)if(((t=a.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let l=a.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let f=u.firstChild;if(!f||f.nodeType!=1||f.contentEditable=="false"||/^(BR|IMG)$/.test(f.nodeName))break;u=f}u.insertBefore(a,u.firstChild),r==a&&n.domSelection().collapse(a,s)}else a.parentNode.removeChild(a)}}function jj(n,e,t){let{node:r,fromOffset:s,toOffset:a,from:l,to:u}=n.docView.parseRange(e,t),f=n.domSelectionRange(),h,p=f.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],Hd(f)||h.push({node:f.focusNode,offset:f.focusOffset})),Wt&&n.input.lastKeyCode===8)for(let E=a;E>s;E--){let _=r.childNodes[E-1],C=_.pmViewDesc;if(_.nodeName=="BR"&&!C){a=E;break}if(!C||C.size)break}let g=n.state.doc,b=n.someProp("domParser")||es.fromSchema(n.state.schema),v=g.resolve(l),S=null,x=b.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:a,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:zj,context:v});if(h&&h[0].pos!=null){let E=h[0].pos,_=h[1]&&h[1].pos;_==null&&(_=E),S={anchor:E+l,head:_+l}}return{doc:x,sel:S,from:l,to:u}}function zj(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Zt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Zt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Ij=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Bj(n,e,t,r,s){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let U=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,F=Ay(n,U);if(F&&!n.state.selection.eq(F)){if(Wt&&li&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",de=>de(n,Hs(13,"Enter"))))return;let W=n.state.tr.setSelection(F);U=="pointer"?W.setMeta("pointer",!0):U=="key"&&W.scrollIntoView(),a&&W.setMeta("composition",a),n.dispatch(W)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let f=n.state.selection,h=jj(n,e,t),p=n.state.doc,g=p.slice(h.from,h.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let S=Hj(g.content,h.doc.content,h.from,b,v);if(S&&n.input.domChangeCount++,(vo&&n.input.lastIOSEnter>Date.now()-225||li)&&s.some(U=>U.nodeType==1&&!Ij.test(U.nodeName))&&(!S||S.endA>=S.endB)&&n.someProp("handleKeyDown",U=>U(n,Hs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!S)if(r&&f instanceof Se&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))S={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let U=Px(n,n.state.doc,h.sel);if(U&&!U.eq(n.state.selection)){let F=n.state.tr.setSelection(U);a&&F.setMeta("composition",a),n.dispatch(F)}}return}n.state.selection.from<n.state.selection.to&&S.start==S.endB&&n.state.selection instanceof Se&&(S.start>n.state.selection.from&&S.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?S.start=n.state.selection.from:S.endA<n.state.selection.to&&S.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(S.endB+=n.state.selection.to-S.endA,S.endA=n.state.selection.to)),vn&&ts<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>h.from&&h.doc.textBetween(S.start-h.from-1,S.start-h.from+1)==" "&&(S.start--,S.endA--,S.endB--);let x=h.doc.resolveNoCache(S.start-h.from),E=h.doc.resolveNoCache(S.endB-h.from),_=p.resolve(S.start),C=x.sameParent(E)&&x.parent.inlineContent&&_.end()>=S.endA;if((vo&&n.input.lastIOSEnter>Date.now()-225&&(!C||s.some(U=>U.nodeName=="DIV"||U.nodeName=="P"))||!C&&x.pos<h.doc.content.size&&(!x.sameParent(E)||!x.parent.inlineContent)&&x.pos<E.pos&&!/\S/.test(h.doc.textBetween(x.pos,E.pos,"","")))&&n.someProp("handleKeyDown",U=>U(n,Hs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>S.start&&Pj(p,S.start,S.endA,x,E)&&n.someProp("handleKeyDown",U=>U(n,Hs(8,"Backspace")))){li&&Wt&&n.domObserver.suppressSelectionUpdates();return}Wt&&S.endB==S.start&&(n.input.lastChromeDelete=Date.now()),li&&!C&&x.start()!=E.start()&&E.parentOffset==0&&x.depth==E.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==S.endA&&(S.endB-=2,E=h.doc.resolveNoCache(S.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(U){return U(n,Hs(13,"Enter"))})},20));let O=S.start,B=S.endA,j=U=>{let F=U||n.state.tr.replace(O,B,h.doc.slice(S.start-h.from,S.endB-h.from));if(h.sel){let W=Px(n,F.doc,h.sel);W&&!(Wt&&n.composing&&W.empty&&(S.start!=S.endB||n.input.lastChromeDelete<Date.now()-100)&&(W.head==O||W.head==F.mapping.map(B)-1)||vn&&W.empty&&W.head==O)&&F.setSelection(W)}return a&&F.setMeta("composition",a),F.scrollIntoView()},P;if(C)if(x.pos==E.pos){vn&&ts<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>fi(n),20));let U=j(n.state.tr.delete(O,B)),F=p.resolve(S.start).marksAcross(p.resolve(S.endA));F&&U.ensureMarks(F),n.dispatch(U)}else if(S.endA==S.endB&&(P=Uj(x.parent.content.cut(x.parentOffset,E.parentOffset),_.parent.content.cut(_.parentOffset,S.endA-_.start())))){let U=j(n.state.tr);P.type=="add"?U.addMark(O,B,P.mark):U.removeMark(O,B,P.mark),n.dispatch(U)}else if(x.parent.child(x.index()).isText&&x.index()==E.index()-(E.textOffset?0:1)){let U=x.parent.textBetween(x.parentOffset,E.parentOffset),F=()=>j(n.state.tr.insertText(U,O,B));n.someProp("handleTextInput",W=>W(n,O,B,U,F))||n.dispatch(F())}else n.dispatch(j());else n.dispatch(j())}function Px(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Cy(n,e.resolve(t.anchor),e.resolve(t.head))}function Uj(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,a=r,l,u,f;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)a=t[p].removeFromSet(a);if(s.length==1&&a.length==0)u=s[0],l="add",f=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&a.length==1)u=a[0],l="remove",f=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(f(e.child(p)));if(Y.from(h).eq(n))return{mark:u,type:l}}function Pj(n,e,t,r,s){if(t-e<=s.pos-r.pos||Jm(r,!0,!1)<s.pos)return!1;let a=n.resolve(e);if(!r.parent.isTextblock){let u=a.nodeAfter;return u!=null&&t==e+u.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let l=n.resolve(Jm(a,!0,!0));return!l.parent.isTextblock||l.pos>t||Jm(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function Jm(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let a=n.node(r).maybeChild(n.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}function Hj(n,e,t,r,s){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let f=Math.max(0,a-Math.min(l,u));r-=l+f-a}if(l<a&&n.size<e.size){let f=r<=a&&r>=l?a-r:0;a-=f,a&&a<e.size&&Hx(e.textBetween(a-1,a+1))&&(a+=f?1:-1),u=a+(u-l),l=a}else if(u<a){let f=r<=a&&r>=u?a-r:0;a-=f,a&&a<n.size&&Hx(n.textBetween(a-1,a+1))&&(a+=f?1:-1),l=a+(l-u),u=a}return{start:a,endA:l,endB:u}}function Hx(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class JT{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new rj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Gx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Vx(this),qx(this),this.nodeViews=Fx(this),this.docView=xx(this.state.doc,$x(this),Km(this),this.dom,this),this.domObserver=new Mj(this,(r,s,a,l)=>Bj(this,r,s,a,l)),this.domObserver.start(),ij(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Gg(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Gx),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,a=!1,l=!1;e.storedMarks&&this.composing&&(HT(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Fx(this);qj(v,this.nodeViews)&&(this.nodeViews=v,a=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&Gg(this),this.editable=Vx(this),qx(this);let f=Km(this),h=$x(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=a||!this.docView.matchesNode(e.doc,h,f);(g||!e.selection.eq(s.selection))&&(l=!0);let b=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&bL(this);if(l){this.domObserver.stop();let v=g&&(vn||Wt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&$j(s.selection,e.selection);if(g){let S=Wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=bj(this)),(a||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=xx(e.doc,h,f,this.dom,this)),S&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$L(this))?fi(this,v):(OT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&vL(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof me){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&gx(this,t.getBoundingClientRect(),e)}else gx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let a=r.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(s=a)}this.dragging=new qT(e.slice,e.move,s<0?void 0:me.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let a=this.state.plugins;if(a)for(let l=0;l<a.length;l++){let u=a[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(vn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&SL(this.dom),fi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return _L(this,e)}coordsAtPos(e,t=1){return wT(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return ML(this,t||this.state,e)}pasteHTML(e,t){return bc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return bc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Oy(this,e)}destroy(){this.docView&&(sj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Km(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,lL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return oj(this,e)}domSelectionRange(){let e=this.domSelection();return e?Zt&&this.root.nodeType===11&&hL(this.dom.ownerDocument)==this.dom&&Nj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}JT.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function $x(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[rn.node(0,n.state.doc.content.size,e)]}function qx(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:rn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Vx(n){return!n.someProp("editable",e=>e(n.state)===!1)}function $j(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Fx(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function qj(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Gx(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var as={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Vj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Fj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jt=0;Jt<10;Jt++)as[48+Jt]=as[96+Jt]=String(Jt);for(var Jt=1;Jt<=24;Jt++)as[Jt+111]="F"+Jt;for(var Jt=65;Jt<=90;Jt++)as[Jt]=String.fromCharCode(Jt+32),Xf[Jt]=String.fromCharCode(Jt);for(var Wm in as)Xf.hasOwnProperty(Wm)||(Xf[Wm]=as[Wm]);function Gj(n){var e=Vj&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Fj&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Xf:as)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Kj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Jj=typeof navigator<"u"&&/Win/.test(navigator.platform);function Wj(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,a,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))Kj?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function Yj(n){let e=Object.create(null);for(let t in n)e[Wj(t)]=n[t];return e}function Ym(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Xj(n){return new lt({props:{handleKeyDown:WT(n)}})}function WT(n){let e=Yj(n);return function(t,r){let s=Gj(r),a,l=e[Ym(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[Ym(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Jj&&r.ctrlKey&&r.altKey)&&(a=as[r.keyCode])&&a!=s){let u=e[Ym(a,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}var Qj=Object.defineProperty,jy=(n,e)=>{for(var t in e)Qj(n,t,{get:e[t],enumerable:!0})};function Vd(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,a=t.storedMarks,t}}}var Fd=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:s}=t,a=this.buildProps(s);return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...h)=>{const p=u(...h)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:s}=this,{view:a}=r,l=[],u=!!n,f=n||s.tr,h=()=>(!u&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(f),l.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(t).map(([g,b])=>[g,(...S)=>{const x=this.buildProps(f,e),E=b(...S)(x);return l.push(E),p}])),run:h};return p}createCan(n){const{rawCommands:e,state:t}=this,r=!1,s=n||t.tr,a=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([u,f])=>[u,(...h)=>f(...h)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:s}=this,{view:a}=r,l={tr:n,editor:r,view:a,state:Vd({state:s,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([u,f])=>[u,(...h)=>f(...h)(l)]))}};return l}},YT={};jy(YT,{blur:()=>Zj,clearContent:()=>ez,clearNodes:()=>tz,command:()=>nz,createParagraphNear:()=>rz,cut:()=>iz,deleteCurrentNode:()=>sz,deleteNode:()=>az,deleteRange:()=>oz,deleteSelection:()=>lz,enter:()=>cz,exitCode:()=>uz,extendMarkRange:()=>fz,first:()=>dz,focus:()=>pz,forEach:()=>mz,insertContent:()=>gz,insertContentAt:()=>vz,joinBackward:()=>xz,joinDown:()=>wz,joinForward:()=>Ez,joinItemBackward:()=>Tz,joinItemForward:()=>_z,joinTextblockBackward:()=>kz,joinTextblockForward:()=>Az,joinUp:()=>Sz,keyboardShortcut:()=>Oz,lift:()=>Mz,liftEmptyBlock:()=>Rz,liftListItem:()=>Nz,newlineInCode:()=>Dz,resetAttributes:()=>Lz,scrollIntoView:()=>jz,selectAll:()=>zz,selectNodeBackward:()=>Iz,selectNodeForward:()=>Bz,selectParentNode:()=>Uz,selectTextblockEnd:()=>Pz,selectTextblockStart:()=>Hz,setContent:()=>$z,setMark:()=>lI,setMeta:()=>cI,setNode:()=>uI,setNodeSelection:()=>fI,setTextDirection:()=>dI,setTextSelection:()=>hI,sinkListItem:()=>pI,splitBlock:()=>mI,splitListItem:()=>gI,toggleList:()=>yI,toggleMark:()=>bI,toggleNode:()=>vI,toggleWrap:()=>SI,undoInputRule:()=>wI,unsetAllMarks:()=>xI,unsetMark:()=>EI,unsetTextDirection:()=>TI,updateAttributes:()=>_I,wrapIn:()=>kI,wrapInList:()=>AI});var Zj=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),ez=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),tz=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:a,$to:l})=>{n.doc.nodesBetween(a.pos,l.pos,(u,f)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(f)),b=h.resolve(p.map(f+u.nodeSize)),v=g.blockRange(b);if(!v)return;const S=ko(v);if(u.type.isTextblock){const{defaultType:x}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(v.start,x)}(S||S===0)&&e.lift(v,S)})}),!0},nz=n=>e=>n(e),rz=()=>({state:n,dispatch:e})=>uT(n,e),iz=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,a=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,a.content),r.setSelection(new Se(r.doc.resolve(Math.max(l-1,0)))),!0},sz=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===r.type){if(e){const u=s.before(a),f=s.after(a);n.delete(u,f).scrollIntoView()}return!0}return!1};function At(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var az=n=>({tr:e,state:t,dispatch:r})=>{const s=At(n,t.schema),a=e.selection.$anchor;for(let l=a.depth;l>0;l-=1)if(a.node(l).type===s){if(r){const f=a.before(l),h=a.after(l);e.delete(f,h).scrollIntoView()}return!0}return!1},oz=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},lz=()=>({state:n,dispatch:e})=>wy(n,e),cz=()=>({commands:n})=>n.keyboardShortcut("Enter"),uz=()=>({state:n,dispatch:e})=>K2(n,e);function zy(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Qf(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:zy(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function XT(n,e,t={}){return n.find(r=>r.type===e&&Qf(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function Kx(n,e,t={}){return!!XT(n,e,t)}function Iy(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])==null?void 0:r.attrs),!XT([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,f=l+1,h=u+s.node.nodeSize;for(;l>0&&Kx([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;f<n.parent.childCount&&Kx([...n.parent.child(f).marks],e,t);)h+=n.parent.child(f).nodeSize,f+=1;return{from:u,to:h}}function pi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var fz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const a=pi(n,r.schema),{doc:l,selection:u}=t,{$from:f,from:h,to:p}=u;if(s){const g=Iy(f,a,e);if(g&&g.from<=h&&g.to>=p){const b=Se.create(l,g.from,g.to);t.setSelection(b)}}return!0},dz=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function QT(n){return n instanceof Se}function Fs(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function ZT(n,e=null){if(!e)return null;const t=Ce.atStart(n),r=Ce.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,a=r.to;return e==="all"?Se.create(n,Fs(0,s,a),Fs(n.content.size,s,a)):Se.create(n,Fs(e,s,a),Fs(e,s,a))}function Jx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Zf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function hz(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var pz=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:a})=>{e={scrollIntoView:!0,...e};const l=()=>{(Zf()||Jx())&&r.dom.focus(),hz()&&!Zf()&&!Jx()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};try{if(r.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(a&&n===null&&!QT(t.state.selection))return l(),!0;const u=ZT(s.doc,n)||t.state.selection,f=t.state.selection.eq(u);return a&&(f||s.setSelection(u),f&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},mz=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),gz=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),e_=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&e_(r)}return n};function gf(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return e_(t)}function Sc(n,e,t){if(n instanceof pr||n instanceof Y)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return Y.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),Sc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const f=new I1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?es.fromSchema(f).parseSlice(gf(n),t.parseOptions):es.fromSchema(f).parse(gf(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const a=es.fromSchema(e);return t.slice?a.parseSlice(gf(n),t.parseOptions).content:a.parse(gf(n),t.parseOptions)}return Sc("",e,t)}function yz(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof jt||s instanceof zt))return;const a=n.mapping.maps[r];let l=0;a.forEach((u,f,h,p)=>{l===0&&(l=p)}),n.setSelection(Ce.near(n.doc.resolve(l),t))}var bz=n=>!("type"in n),vz=(n,e,t)=>({tr:r,dispatch:s,editor:a})=>{var l;if(s){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const f=E=>{a.emit("contentError",{editor:a,error:E,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{Sc(e,a.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(E){f(E)}try{u=Sc(e,a.schema,{parseOptions:h,errorOnInvalidContent:(l=t.errorOnInvalidContent)!=null?l:a.options.enableContentCheck})}catch(E){return f(E),!1}let{from:p,to:g}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((bz(u)?u:[u]).forEach(E=>{E.check(),b=b?E.isText&&E.marks.length===0:!1,v=v?E.isBlock:!1}),p===g&&v){const{parent:E}=r.doc.resolve(p);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(p-=1,g+=1)}let x;if(b){if(Array.isArray(e))x=e.map(E=>E.text||"").join("");else if(e instanceof Y){let E="";e.forEach(_=>{_.text&&(E+=_.text)}),x=E}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,p,g)}else{x=u;const E=r.doc.resolve(p),_=E.node(),C=E.parentOffset===0,O=_.isText||_.isTextblock,B=_.content.size>0;C&&O&&B&&(p=Math.max(0,p-1)),r.replaceWith(p,g,x)}t.updateSelection&&yz(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:x})}return!0},Sz=()=>({state:n,dispatch:e})=>V2(n,e),wz=()=>({state:n,dispatch:e})=>F2(n,e),xz=()=>({state:n,dispatch:e})=>rT(n,e),Ez=()=>({state:n,dispatch:e})=>oT(n,e),Tz=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Bd(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},_z=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Bd(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},kz=()=>({state:n,dispatch:e})=>$2(n,e),Az=()=>({state:n,dispatch:e})=>q2(n,e);function t_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Cz(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,a,l;for(let u=0;u<e.length-1;u+=1){const f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))Zf()||t_()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}var Oz=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const a=Cz(n).split(/-(?!$)/),l=a.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return f==null||f.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function ls(n,e,t={}){const{from:r,to:s,empty:a}=n.selection,l=e?At(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(g,b)=>{if(g.isText)return;const v=Math.max(r,b),S=Math.min(s,b+g.nodeSize);u.push({node:g,from:v,to:S})});const f=s-r,h=u.filter(g=>l?l.name===g.node.type.name:!0).filter(g=>Qf(g.node.attrs,t,{strict:!1}));return a?!!h.length:h.reduce((g,b)=>g+b.to-b.from,0)>=f}var Mz=(n,e={})=>({state:t,dispatch:r})=>{const s=At(n,t.schema);return ls(t,s,e)?G2(t,r):!1},Rz=()=>({state:n,dispatch:e})=>fT(n,e),Nz=n=>({state:e,dispatch:t})=>{const r=At(n,e.schema);return iL(r)(e,t)},Dz=()=>({state:n,dispatch:e})=>cT(n,e);function Gd(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Wx(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}var Lz=(n,e)=>({tr:t,state:r,dispatch:s})=>{let a=null,l=null;const u=Gd(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(a=At(n,r.schema)),u==="mark"&&(l=pi(n,r.schema));let f=!1;return t.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g)=>{a&&a===p.type&&(f=!0,s&&t.setNodeMarkup(g,void 0,Wx(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(b=>{l===b.type&&(f=!0,s&&t.addMark(g,g+p.nodeSize,l.create(Wx(b.attrs,e))))})})}),f},jz=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),zz=()=>({tr:n,dispatch:e})=>{if(e){const t=new Nn(n.doc);n.setSelection(t)}return!0},Iz=()=>({state:n,dispatch:e})=>sT(n,e),Bz=()=>({state:n,dispatch:e})=>lT(n,e),Uz=()=>({state:n,dispatch:e})=>Y2(n,e),Pz=()=>({state:n,dispatch:e})=>Z2(n,e),Hz=()=>({state:n,dispatch:e})=>Q2(n,e);function Kg(n,e,t={},r={}){return Sc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var $z=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:s,tr:a,dispatch:l,commands:u})=>{const{doc:f}=a;if(r.preserveWhitespace!=="full"){const h=Kg(n,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return l&&a.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!t),!0}return l&&a.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:f.content.size},n,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function n_(n,e){const t=pi(e,n.schema),{from:r,to:s,empty:a}=n.selection,l=[];a?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,f=>{l.push(...f.marks)});const u=l.find(f=>f.type.name===t.name);return u?{...u.attrs}:{}}function r_(n,e){const t=new Z1(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function qz(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Vz(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,a)=>{t(s)&&r.push({node:s,pos:a})}),r}function Fz(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Kd(n){return e=>Fz(e.$from,n)}function fe(n,e,t){return n.config[e]===void 0&&n.parent?fe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?fe(n.parent,e,t):null}):n.config[e]}function By(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=fe(e,"addExtensions",t);return r?[e,...By(r())]:e}).flat(10)}function Uy(n,e){const t=aa.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function i_(n){return typeof n=="function"}function Fe(n,e=void 0,...t){return i_(n)?e?n.bind(e)(...t):n(...t):n}function Gz(n={}){return Object.keys(n).length===0&&n.constructor===Object}function So(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function s_(n){const e=[],{nodeExtensions:t,markExtensions:r}=So(n),s=[...t,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},l=t.filter(h=>h.name!=="text").map(h=>h.name),u=r.map(h=>h.name),f=[...l,...u];return n.forEach(h=>{const p={name:h.name,options:h.options,storage:h.storage,extensions:s},g=fe(h,"addGlobalAttributes",p);if(!g)return;g().forEach(v=>{let S;Array.isArray(v.types)?S=v.types:v.types==="*"?S=f:v.types==="nodes"?S=l:v.types==="marks"?S=u:S=[],S.forEach(x=>{Object.entries(v.attributes).forEach(([E,_])=>{e.push({type:x,name:E,attribute:{...a,..._}})})})})}),s.forEach(h=>{const p={name:h.name,options:h.options,storage:h.storage},g=fe(h,"addAttributes",p);if(!g)return;const b=g();Object.entries(b).forEach(([v,S])=>{const x={...a,...S};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:h.name,name:v,attribute:x})})}),e}function bt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,a])=>{if(!r[s]){r[s]=a;return}if(s==="class"){const u=a?String(a).split(" "):[],f=r[s]?r[s].split(" "):[],h=u.filter(p=>!f.includes(p));r[s]=[...f,...h].join(" ")}else if(s==="style"){const u=a?a.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[g,b]=p.split(":").map(v=>v.trim());h.set(g,b)}),u.forEach(p=>{const[g,b]=p.split(":").map(v=>v.trim());h.set(g,b)}),r[s]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[s]=a}),r},{})}function wc(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>bt(t,r),{})}function Kz(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Yx(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((a,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):Kz(t.getAttribute(l.name));return u==null?a:{...a,[l.name]:u}},{});return{...r,...s}}}}function Xx(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Gz(t)?!1:t!=null))}function Qx(n){var e,t;const r={};return!((e=n==null?void 0:n.attribute)!=null&&e.isRequired)&&"default"in((n==null?void 0:n.attribute)||{})&&(r.default=n.attribute.default),((t=n==null?void 0:n.attribute)==null?void 0:t.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function Jz(n,e){var t;const r=s_(n),{nodeExtensions:s,markExtensions:a}=So(n),l=(t=s.find(h=>fe(h,"topNode")))==null?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(_=>_.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((_,C)=>{const O=fe(C,"extendNodeSchema",g);return{..._,...O?O(h):{}}},{}),v=Xx({...b,content:Fe(fe(h,"content",g)),marks:Fe(fe(h,"marks",g)),group:Fe(fe(h,"group",g)),inline:Fe(fe(h,"inline",g)),atom:Fe(fe(h,"atom",g)),selectable:Fe(fe(h,"selectable",g)),draggable:Fe(fe(h,"draggable",g)),code:Fe(fe(h,"code",g)),whitespace:Fe(fe(h,"whitespace",g)),linebreakReplacement:Fe(fe(h,"linebreakReplacement",g)),defining:Fe(fe(h,"defining",g)),isolating:Fe(fe(h,"isolating",g)),attrs:Object.fromEntries(p.map(Qx))}),S=Fe(fe(h,"parseHTML",g));S&&(v.parseDOM=S.map(_=>Yx(_,p)));const x=fe(h,"renderHTML",g);x&&(v.toDOM=_=>x({node:_,HTMLAttributes:wc(_,p)}));const E=fe(h,"renderText",g);return E&&(v.toText=E),[h.name,v]})),f=Object.fromEntries(a.map(h=>{const p=r.filter(E=>E.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((E,_)=>{const C=fe(_,"extendMarkSchema",g);return{...E,...C?C(h):{}}},{}),v=Xx({...b,inclusive:Fe(fe(h,"inclusive",g)),excludes:Fe(fe(h,"excludes",g)),group:Fe(fe(h,"group",g)),spanning:Fe(fe(h,"spanning",g)),code:Fe(fe(h,"code",g)),attrs:Object.fromEntries(p.map(Qx))}),S=Fe(fe(h,"parseHTML",g));S&&(v.parseDOM=S.map(E=>Yx(E,p)));const x=fe(h,"renderHTML",g);return x&&(v.toDOM=E=>x({mark:E,HTMLAttributes:wc(E,p)})),[h.name,v]}));return new I1({topNode:l,nodes:u,marks:f})}function Wz(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function Ql(n){return n.sort((t,r)=>{const s=fe(t,"priority")||100,a=fe(r,"priority")||100;return s>a?-1:s<a?1:0})}function a_(n){const e=Ql(By(n)),t=Wz(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function o_(n,e,t){const{from:r,to:s}=e,{blockSeparator:a=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(f,h,p,g)=>{var b;f.isBlock&&h>r&&(u+=a);const v=l==null?void 0:l[f.type.name];if(v)return p&&(u+=v({node:f,pos:h,parent:p,index:g,range:e})),!1;f.isText&&(u+=(b=f==null?void 0:f.text)==null?void 0:b.slice(Math.max(r,h)-h,s-h))}),u}function Yz(n,e){const t={from:0,to:n.content.size};return o_(n,t,e)}function l_(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function Xz(n,e){const t=At(e,n.schema),{from:r,to:s}=n.selection,a=[];n.doc.nodesBetween(r,s,u=>{a.push(u)});const l=a.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function c_(n,e){const t=Gd(typeof e=="string"?e:e.name,n.schema);return t==="node"?Xz(n,e):t==="mark"?n_(n,e):{}}function Qz(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function Zz(n){const e=Qz(n);return e.length===1?e:e.filter((t,r)=>!e.filter((a,l)=>l!==r).some(a=>t.oldRange.from>=a.oldRange.from&&t.oldRange.to<=a.oldRange.to&&t.newRange.from>=a.newRange.from&&t.newRange.to<=a.newRange.to))}function u_(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,a)=>{const l=[];if(s.ranges.length)s.forEach((u,f)=>{l.push({from:u,to:f})});else{const{from:u,to:f}=t[a];if(u===void 0||f===void 0)return;l.push({from:u,to:f})}l.forEach(({from:u,to:f})=>{const h=e.slice(a).map(u,-1),p=e.slice(a).map(f),g=e.invert().map(h,-1),b=e.invert().map(p);r.push({oldRange:{from:g,to:b},newRange:{from:h,to:p}})})}),Zz(r)}function Py(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const a=t.resolve(n),l=Iy(a,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,a)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:a,to:a+s.nodeSize,mark:l})))}),r}var eI=(n,e,t,r=20)=>{const s=n.doc.resolve(t);let a=r,l=null;for(;a>0&&l===null;){const u=s.node(a);(u==null?void 0:u.type.name)===e?l=u:a-=1}return[l,a]};function Il(n,e){return e.nodes[n]||e.marks[n]||null}function Rf(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(a=>a.type===e&&a.name===r);return s?s.attribute.keepOnSplit:!1}))}var tI=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,a,l,u)=>{var f,h;const p=((h=(f=s.type.spec).toText)==null?void 0:h.call(f,{node:s,pos:a,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-a))}),t};function Jg(n,e,t={}){const{empty:r,ranges:s}=n.selection,a=e?pi(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>a?a.name===g.type.name:!0).find(g=>Qf(g.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:g,$to:b})=>{const v=g.pos,S=b.pos;n.doc.nodesBetween(v,S,(x,E)=>{if(a&&x.inlineContent&&!x.type.allowsMarkType(a))return!1;if(!x.isText&&!x.marks.length)return;const _=Math.max(v,E),C=Math.min(S,E+x.nodeSize),O=C-_;l+=O,u.push(...x.marks.map(B=>({mark:B,from:_,to:C})))})}),l===0)return!1;const f=u.filter(g=>a?a.name===g.mark.type.name:!0).filter(g=>Qf(g.mark.attrs,t,{strict:!1})).reduce((g,b)=>g+b.to-b.from,0),h=u.filter(g=>a?g.mark.type!==a&&g.mark.type.excludes(a):!0).reduce((g,b)=>g+b.to-b.from,0);return(f>0?f+h:f)>=l}function nI(n,e,t={}){if(!e)return ls(n,null,t)||Jg(n,null,t);const r=Gd(e,n.schema);return r==="node"?ls(n,e,t):r==="mark"?Jg(n,e,t):!1}var rI=(n,e)=>{const{$from:t,$to:r,$anchor:s}=n.selection;if(e){const a=Kd(u=>u.type.name===e)(n.selection);if(!a)return!1;const l=n.doc.resolve(a.pos+1);return s.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},iI=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function Zx(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function eE(n,e){const{nodeExtensions:t}=So(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},a=Fe(fe(r,"group",s));return typeof a!="string"?!1:a.split(" ").includes("list")}function Jd(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(a=>{s!==!1&&(Jd(a,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function f_(n){return n instanceof me}var d_=class h_{constructor(e){this.position=e}static fromJSON(e){return new h_(e.position)}toJSON(){return{position:this.position}}};function sI(n,e){const t=e.mapping.mapResult(n.position);return{position:new d_(t.pos),mapResult:t}}function aI(n){return new d_(n)}function oI(n,e,t){var r;const{selection:s}=e;let a=null;if(QT(s)&&(a=s.$cursor),a){const u=(r=n.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(t)&&(!!t.isInSet(u)||!u.some(h=>h.type.excludes(t)))}const{ranges:l}=s;return l.some(({$from:u,$to:f})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,f.pos,(p,g,b)=>{if(h)return!1;if(p.isInline){const v=!b||b.type.allowsMarkType(t),S=!!t.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(t));h=v&&S}return!h}),h})}var lI=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:a}=t,{empty:l,ranges:u}=a,f=pi(n,r.schema);if(s)if(l){const h=n_(r,f);t.addStoredMark(f.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(b,v)=>{const S=Math.max(v,p),x=Math.min(v+b.nodeSize,g);b.marks.find(_=>_.type===f)?b.marks.forEach(_=>{f===_.type&&t.addMark(S,x,f.create({..._.attrs,...e}))}):t.addMark(S,x,f.create(e))})});return oI(r,t,f)},cI=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),uI=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const a=At(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:u})=>hx(a,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>hx(a,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fI=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=Fs(n,0,r.content.size),a=me.create(r,s);e.setSelection(a)}return!0},dI=(n,e)=>({tr:t,state:r,dispatch:s})=>{const{selection:a}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=a.from,u=a.to),s&&t.doc.nodesBetween(l,u,(f,h)=>{f.isText||t.setNodeMarkup(h,void 0,{...f.attrs,dir:n})}),!0},hI=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:a}=typeof n=="number"?{from:n,to:n}:n,l=Se.atStart(r).from,u=Se.atEnd(r).to,f=Fs(s,l,u),h=Fs(a,l,u),p=Se.create(r,f,h);e.setSelection(p)}return!0},pI=n=>({state:e,dispatch:t})=>{const r=At(n,e.schema);return oL(r)(e,t)};function tE(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}var mI=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:a,doc:l}=e,{$from:u,$to:f}=a,h=s.extensionManager.attributes,p=Rf(h,u.node().type.name,u.node().attrs);if(a instanceof me&&a.node.isBlock)return!u.parentOffset||!ui(l,u.pos)?!1:(r&&(n&&tE(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,b=u.depth===0?void 0:qz(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=g&&b?[{type:b,attrs:p}]:void 0,S=ui(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!S&&ui(e.doc,e.mapping.map(u.pos),1,b?[{type:b}]:void 0)&&(S=!0,v=b?[{type:b,attrs:p}]:void 0),r){if(S&&(a instanceof Se&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),b&&!g&&!u.parentOffset&&u.parent.type!==b)){const x=e.mapping.map(u.before()),E=e.doc.resolve(x);u.node(-1).canReplaceWith(E.index(),E.index()+1,b)&&e.setNodeMarkup(e.mapping.map(u.before()),b)}n&&tE(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return S},gI=(n,e={})=>({tr:t,state:r,dispatch:s,editor:a})=>{var l;const u=At(n,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==u)return!1;const b=a.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==u||f.index(-2)!==f.node(-2).childCount-1)return!1;if(s){let _=Y.empty;const C=f.index(-1)?1:f.index(-2)?2:3;for(let F=f.depth-C;F>=f.depth-3;F-=1)_=Y.from(f.node(F).copy(_));const O=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,B={...Rf(b,f.node().type.name,f.node().attrs),...e},j=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(B))||void 0;_=_.append(Y.from(u.createAndFill(null,j)||void 0));const P=f.before(f.depth-(C-1));t.replace(P,f.after(-O),new ne(_,4-C,0));let U=-1;t.doc.nodesBetween(P,t.doc.content.size,(F,W)=>{if(U>-1)return!1;F.isTextblock&&F.content.size===0&&(U=W+1)}),U>-1&&t.setSelection(Se.near(t.doc.resolve(U))),t.scrollIntoView()}return!0}const v=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,S={...Rf(b,g.type.name,g.attrs),...e},x={...Rf(b,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,h.pos);const E=v?[{type:u,attrs:S},{type:v,attrs:x}]:[{type:u,attrs:S}];if(!ui(t.doc,f.pos,2))return!1;if(s){const{selection:_,storedMarks:C}=r,{splittableMarks:O}=a.extensionManager,B=C||_.$to.parentOffset&&_.$from.marks();if(t.split(f.pos,2,E).scrollIntoView(),!B||!s)return!0;const j=B.filter(P=>O.includes(P.type.name));t.ensureMarks(j)}return!0},Xm=(n,e)=>{const t=Kd(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&us(n.doc,t.pos)&&n.join(t.pos),!0},Qm=(n,e)=>{const t=Kd(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&us(n.doc,r)&&n.join(r),!0},yI=(n,e,t,r={})=>({editor:s,tr:a,state:l,dispatch:u,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:b}=s.extensionManager,v=At(n,l.schema),S=At(e,l.schema),{selection:x,storedMarks:E}=l,{$from:_,$to:C}=x,O=_.blockRange(C),B=E||x.$to.parentOffset&&x.$from.marks();if(!O)return!1;const j=Kd(P=>eE(P.type.name,g))(x);if(O.depth>=1&&j&&O.depth-j.depth<=1){if(j.node.type===v)return h.liftListItem(S);if(eE(j.node.type.name,g)&&v.validContent(j.node.content)&&u)return f().command(()=>(a.setNodeMarkup(j.pos,v),!0)).command(()=>Xm(a,v)).command(()=>Qm(a,v)).run()}return!t||!B||!u?f().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>Xm(a,v)).command(()=>Qm(a,v)).run():f().command(()=>{const P=p().wrapInList(v,r),U=B.filter(F=>b.includes(F.type.name));return a.ensureMarks(U),P?!0:h.clearNodes()}).wrapInList(v,r).command(()=>Xm(a,v)).command(()=>Qm(a,v)).run()},bI=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:a=!1}=t,l=pi(n,r.schema);return Jg(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:a}):s.setMark(l,e)},vI=(n,e,t={})=>({state:r,commands:s})=>{const a=At(n,r.schema),l=At(e,r.schema),u=ls(r,a,t);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),u?s.setNode(l,f):s.setNode(a,{...f,...t})},SI=(n,e={})=>({state:t,commands:r})=>{const s=At(n,t.schema);return ls(t,s,e)?r.lift(s):r.wrapIn(s,e)},wI=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let a;if(s.spec.isInputRules&&(a=s.getState(n))){if(e){const l=n.tr,u=a.transform;for(let f=u.steps.length-1;f>=0;f-=1)l.step(u.steps[f].invert(u.docs[f]));if(a.text){const f=l.doc.resolve(a.from).marks();l.replaceWith(a.from,a.to,n.schema.text(a.text,f))}else l.delete(a.from,a.to)}return!0}}return!1},xI=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},EI=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var a;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,f=pi(n,r.schema),{$from:h,empty:p,ranges:g}=u;if(!s)return!0;if(p&&l){let{from:b,to:v}=u;const S=(a=h.marks().find(E=>E.type===f))==null?void 0:a.attrs,x=Iy(h,f,S);x&&(b=x.from,v=x.to),t.removeMark(b,v,f)}else g.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,f)});return t.removeStoredMark(f),!0},TI=n=>({tr:e,state:t,dispatch:r})=>{const{selection:s}=t;let a,l;return typeof n=="number"?(a=n,l=n):n&&"from"in n&&"to"in n?(a=n.from,l=n.to):(a=s.from,l=s.to),r&&e.doc.nodesBetween(a,l,(u,f)=>{if(u.isText)return;const h={...u.attrs};delete h.dir,e.setNodeMarkup(f,void 0,h)}),!0},_I=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let a=null,l=null;const u=Gd(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(a=At(n,r.schema)),u==="mark"&&(l=pi(n,r.schema));let f=!1;return t.selection.ranges.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;let b,v,S,x;t.selection.empty?r.doc.nodesBetween(p,g,(E,_)=>{a&&a===E.type&&(f=!0,S=Math.max(_,p),x=Math.min(_+E.nodeSize,g),b=_,v=E)}):r.doc.nodesBetween(p,g,(E,_)=>{_<p&&a&&a===E.type&&(f=!0,S=Math.max(_,p),x=Math.min(_+E.nodeSize,g),b=_,v=E),_>=p&&_<=g&&(a&&a===E.type&&(f=!0,s&&t.setNodeMarkup(_,void 0,{...E.attrs,...e})),l&&E.marks.length&&E.marks.forEach(C=>{if(l===C.type&&(f=!0,s)){const O=Math.max(_,p),B=Math.min(_+E.nodeSize,g);t.addMark(O,B,l.create({...C.attrs,...e}))}}))}),v&&(b!==void 0&&s&&t.setNodeMarkup(b,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(E=>{l===E.type&&s&&t.addMark(S,x,l.create({...E.attrs,...e}))}))}),f},kI=(n,e={})=>({state:t,dispatch:r})=>{const s=At(n,t.schema);return eL(s,e)(t,r)},AI=(n,e={})=>({state:t,dispatch:r})=>{const s=At(n,t.schema);return tL(s,e)(t,r)},CI=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},Wd=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},OI=(n,e)=>{if(zy(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function yf(n){var e;const{editor:t,from:r,to:s,text:a,rules:l,plugin:u}=n,{view:f}=t;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let p=!1;const g=tI(h)+a;return l.forEach(b=>{if(p)return;const v=OI(g,b.find);if(!v)return;const S=f.state.tr,x=Vd({state:f.state,transaction:S}),E={from:r-(v[0].length-a.length),to:s},{commands:_,chain:C,can:O}=new Fd({editor:t,state:x});b.handler({state:x,range:E,match:v,commands:_,chain:C,can:O})===null||!S.steps.length||(b.undoable&&S.setMeta(u,{transform:S,from:r,to:s,text:a}),f.dispatch(S),p=!0)}),p}function MI(n){const{editor:e,rules:t}=n,r=new lt({state:{init(){return null},apply(s,a,l){const u=s.getMeta(r);if(u)return u;const f=s.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:p}=f;typeof p=="string"?p=p:p=Uy(Y.from(p),l.schema);const{from:g}=f,b=g+p.length;yf({editor:e,from:g,to:b,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:a}},props:{handleTextInput(s,a,l,u){return yf({editor:e,from:a,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:a}=s.state.selection;a&&yf({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,a){if(a.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?yf({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function RI(n){return Object.prototype.toString.call(n).slice(8,-1)}function bf(n){return RI(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function p_(n,e){const t={...n};return bf(n)&&bf(e)&&Object.keys(e).forEach(r=>{bf(e[r])&&bf(n[r])?t[r]=p_(n[r],e[r]):t[r]=e[r]}),t}var Hy=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Fe(fe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Fe(fe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>p_(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},ds=class m_ extends Hy{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new m_(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const f=l.find(h=>(h==null?void 0:h.type.name)===t.name);return f&&r.removeStoredMark(f),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function NI(n){return typeof n=="number"}var DI=class{constructor(n){this.find=n.find,this.handler=n.handler}},LI=(n,e,t)=>{if(zy(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const a=[s.text];return a.index=s.index,a.input=n,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(s.replaceWith)),a}):[]};function jI(n){const{editor:e,state:t,from:r,to:s,rule:a,pasteEvent:l,dropEvent:u}=n,{commands:f,chain:h,can:p}=new Fd({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,s,(v,S)=>{var x,E,_,C,O;if((E=(x=v.type)==null?void 0:x.spec)!=null&&E.code||!(v.isText||v.isTextblock||v.isInline))return;const B=(O=(C=(_=v.content)==null?void 0:_.size)!=null?C:v.nodeSize)!=null?O:0,j=Math.max(r,S),P=Math.min(s,S+B);if(j>=P)return;const U=v.isText?v.text||"":v.textBetween(j-S,P-S,void 0,"");LI(U,a.find,l).forEach(W=>{if(W.index===void 0)return;const de=j+W.index+1,oe=de+W[0].length,ke={from:t.tr.mapping.map(de),to:t.tr.mapping.map(oe)},te=a.handler({state:t,range:ke,match:W,commands:f,chain:h,can:p,pasteEvent:l,dropEvent:u});g.push(te)})}),g.every(v=>v!==null)}var vf=null,zI=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function II(n){const{editor:e,rules:t}=n;let r=null,s=!1,a=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const f=({state:p,from:g,to:b,rule:v,pasteEvt:S})=>{const x=p.tr,E=Vd({state:p,transaction:x});if(!(!jI({editor:e,state:E,from:Math.max(g-1,0),to:b.b-1,rule:v,pasteEvent:S,dropEvent:u})||!x.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return t.map(p=>new lt({view(g){const b=S=>{var x;r=(x=g.dom.parentElement)!=null&&x.contains(S.target)?g.dom.parentElement:null,r&&(vf=e)},v=()=>{vf&&(vf=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(g,b)=>{if(a=r===g.dom.parentElement,u=b,!a){const v=vf;v!=null&&v.isEditable&&setTimeout(()=>{const S=v.state.selection;S&&v.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,b)=>{var v;const S=(v=b.clipboardData)==null?void 0:v.getData("text/html");return l=b,s=!!(S!=null&&S.includes("data-pm-slice")),!1}}},appendTransaction:(g,b,v)=>{const S=g[0],x=S.getMeta("uiEvent")==="paste"&&!s,E=S.getMeta("uiEvent")==="drop"&&!a,_=S.getMeta("applyPasteRules"),C=!!_;if(!x&&!E&&!C)return;if(C){let{text:j}=_;typeof j=="string"?j=j:j=Uy(Y.from(j),v.schema);const{from:P}=_,U=P+j.length,F=zI(j);return f({rule:p,state:v,from:P,to:{b:U},pasteEvt:F})}const O=b.doc.content.findDiffStart(v.doc.content),B=b.doc.content.findDiffEnd(v.doc.content);if(!(!NI(O)||!B||O===B.b))return f({rule:p,state:v,from:O,to:B,pasteEvt:l})}}))}var Yd=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=a_(n),this.schema=Jz(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Il(e.name,this.schema)},r=fe(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return Ql([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:Il(r.name,this.schema)},a=[],l=fe(r,"addKeyboardShortcuts",s);let u={};if(r.type==="mark"&&fe(r,"exitable",s)&&(u.ArrowRight=()=>ds.handleExit({editor:n,mark:r})),l){const b=Object.fromEntries(Object.entries(l()).map(([v,S])=>[v,()=>S({editor:n})]));u={...u,...b}}const f=Xj(u);a.push(f);const h=fe(r,"addInputRules",s);if(Zx(r,n.options.enableInputRules)&&h){const b=h();if(b&&b.length){const v=MI({editor:n,rules:b}),S=Array.isArray(v)?v:[v];a.push(...S)}}const p=fe(r,"addPasteRules",s);if(Zx(r,n.options.enablePasteRules)&&p){const b=p();if(b&&b.length){const v=II({editor:n,rules:b});a.push(...v)}}const g=fe(r,"addProseMirrorPlugins",s);if(g){const b=g();a.push(...b)}return a})}get attributes(){return s_(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=So(this.extensions);return Object.fromEntries(e.filter(t=>!!fe(t,"addNodeView")).map(t=>{const r=this.attributes.filter(f=>f.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:At(t.name,this.schema)},a=fe(t,"addNodeView",s);if(!a)return[];const l=a();if(!l)return[];const u=(f,h,p,g,b)=>{const v=wc(f,r);return l({node:f,view:h,getPos:p,decorations:g,innerDecorations:b,editor:n,extension:t,HTMLAttributes:v})};return[t.name,u]}))}dispatchTransaction(n){const{editor:e}=this;return Ql([...this.extensions].reverse()).reduceRight((r,s)=>{const a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Il(s.name,this.schema)},l=fe(s,"dispatchTransaction",a);return l?u=>{l.call(a,{transaction:u,next:r})}:r},n)}transformPastedHTML(n){const{editor:e}=this;return Ql([...this.extensions]).reduce((r,s)=>{const a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Il(s.name,this.schema)},l=fe(s,"transformPastedHTML",a);return l?(u,f)=>{const h=r(u,f);return l.call(a,h)}:r},n||(r=>r))}get markViews(){const{editor:n}=this,{markExtensions:e}=So(this.extensions);return Object.fromEntries(e.filter(t=>!!fe(t,"addMarkView")).map(t=>{const r=this.attributes.filter(u=>u.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:pi(t.name,this.schema)},a=fe(t,"addMarkView",s);if(!a)return[];const l=(u,f,h)=>{const p=wc(u,r);return a()({mark:u,view:f,inline:h,editor:n,extension:t,HTMLAttributes:p,updateAttributes:g=>{XI(u,n,g)}})};return[t.name,l]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Il(e.name,this.schema)};e.type==="mark"&&((t=Fe(fe(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const s=fe(e,"onBeforeCreate",r),a=fe(e,"onCreate",r),l=fe(e,"onUpdate",r),u=fe(e,"onSelectionUpdate",r),f=fe(e,"onTransaction",r),h=fe(e,"onFocus",r),p=fe(e,"onBlur",r),g=fe(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),a&&this.editor.on("create",a),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}};Yd.resolve=a_;Yd.sort=Ql;Yd.flatten=By;var BI={};jy(BI,{ClipboardTextSerializer:()=>y_,Commands:()=>b_,Delete:()=>v_,Drop:()=>S_,Editable:()=>w_,FocusEvents:()=>E_,Keymap:()=>T_,Paste:()=>__,Tabindex:()=>k_,TextDirection:()=>A_,focusEventsPluginKey:()=>x_});var We=class g_ extends Hy{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new g_(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},y_=We.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new lt({key:new Rt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:a}=s,l=Math.min(...a.map(p=>p.$from.pos)),u=Math.max(...a.map(p=>p.$to.pos)),f=l_(t);return o_(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),b_=We.create({name:"commands",addCommands(){return{...YT}}}),v_=We.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,s;const a=()=>{var l,u,f,h;if((h=(f=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:f.call(u,n))!=null?h:n.getMeta("y-sync$"))return;const p=r_(n.before,[n,...e]);u_(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(S,x)=>{const E=x+S.nodeSize-2,_=v.oldRange.from<=x&&E<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:x,to:E,newFrom:p.mapping.map(x),newTo:p.mapping.map(E),deletedRange:v.oldRange,newRange:v.newRange,partial:!_,editor:this.editor,transaction:n,combinedTransform:p})})});const b=p.mapping;p.steps.forEach((v,S)=>{var x,E;if(v instanceof hr){const _=b.slice(S).map(v.from,-1),C=b.slice(S).map(v.to),O=b.invert().map(_,-1),B=b.invert().map(C),j=(x=p.doc.nodeAt(_-1))==null?void 0:x.marks.some(U=>U.eq(v.mark)),P=(E=p.doc.nodeAt(C))==null?void 0:E.marks.some(U=>U.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:O,to:B},newRange:{from:_,to:C},partial:!!(P||j),editor:this.editor,transaction:n,combinedTransform:p})}})};(s=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||s?setTimeout(a,0):a()}}),S_=We.create({name:"drop",addProseMirrorPlugins(){return[new lt({key:new Rt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),w_=We.create({name:"editable",addProseMirrorPlugins(){return[new lt({key:new Rt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),x_=new Rt("focusEvents"),E_=We.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new lt({key:x_,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),T_=We.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:f,doc:h}=u,{empty:p,$anchor:g}=f,{pos:b,parent:v}=g,S=g.parent.isTextblock&&b>0?u.doc.resolve(b-1):g,x=S.parent.type.spec.isolating,E=g.pos-g.parentOffset,_=x&&S.parent.childCount===1?E===g.pos:Ce.atStart(h).from===b;return!p||!v.type.isTextblock||v.textContent.length||!_||_&&g.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},a={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Zf()||t_()?a:s},addProseMirrorPlugins(){return[new lt({key:new Rt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(x=>x.getMeta("composition")))return;const r=n.some(x=>x.docChanged)&&!e.doc.eq(t.doc),s=n.some(x=>x.getMeta("preventClearDocument"));if(!r||s)return;const{empty:a,from:l,to:u}=e.selection,f=Ce.atStart(e.doc).from,h=Ce.atEnd(e.doc).to;if(a||!(l===f&&u===h)||!Jd(t.doc))return;const b=t.tr,v=Vd({state:t,transaction:b}),{commands:S}=new Fd({editor:this.editor,state:v});if(S.clearNodes(),!!b.steps.length)return b}})]}}),__=We.create({name:"paste",addProseMirrorPlugins(){return[new lt({key:new Rt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),k_=We.create({name:"tabindex",addProseMirrorPlugins(){return[new lt({key:new Rt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),A_=We.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=So(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new lt({key:new Rt("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),UI=class Vl{constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Vl(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Vl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Vl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,l=t.isInline,u=this.pos+r+(a?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const f=this.resolvedPos.doc.resolve(u);if(!s&&!l&&f.depth<=this.depth)return;const h=new Vl(f,this.editor,s,s||l?t:null);s&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const a=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const f=l[u];if(a[f]!==t[f])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const a=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&a.every(f=>t[f]===l.node.attrs[f])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},PI=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function HI(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}var $I=class extends CI{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:sI,createMappablePosition:aI},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:a})=>this.options.onDrop(r,s,a)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=ZT(e,this.options.autofocus);this.editorState=lo.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=HI(PI,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=i_(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;t=t.filter(l=>!l.key.startsWith(a))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[w_,y_.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),b_,E_,T_,k_,S_,__,v_,A_.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Yd(r,this)}createCommandManager(){this.commandManager=new Fd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Kg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Kg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=t?this.extensionManager.dispatchTransaction(r):r,a=e.transformPastedHTML,l=this.extensionManager.transformPastedHTML(a);this.editorView=new JT(n,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,transformPastedHTML:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const u=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(u),this.prependClass(),this.injectCSS();const f=this.view.dom;f.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),s=t.includes(n),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const l=t.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l==null?void 0:l.getMeta("focus"),f=l==null?void 0:l.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),f&&this.emit("blur",{editor:this,event:f.event,transaction:l}),!(n.getMeta("preventUpdate")||!t.some(h=>h.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return c_(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return nI(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Uy(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return Yz(this.state.doc,{blockSeparator:e,textSerializers:{...l_(this.schema),...t}})}get isEmpty(){return Jd(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new UI(e,this)}get $doc(){return this.$pos(0)}};function wo(n){return new Wd({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Fe(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:a}=e,l=r[r.length-1],u=r[0];if(l){const f=u.search(/\S/),h=t.from+u.indexOf(l),p=h+l.length;if(Py(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(x=>x===n.type&&x!==v.mark.type)).filter(v=>v.to>h).length)return null;p<t.to&&a.delete(p,t.to),h>t.from&&a.delete(t.from+f,h);const b=t.from+f+l.length;a.addMark(t.from+f,b,n.type.create(s||{})),a.removeStoredMark(n.type)}},undoable:n.undoable})}function qI(n){return new Wd({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Fe(n.getAttributes,void 0,r)||{},{tr:a}=e,l=t.from;let u=t.to;const f=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];a.insertText(g,l+r[0].length-1),a.replaceWith(p,u,f)}else if(r[0]){const h=n.type.isInline?l:l-1;a.insert(h,n.type.create(s)).delete(a.mapping.map(l),a.mapping.map(u))}a.scrollIntoView()},undoable:n.undoable})}function Wg(n){return new Wd({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),a=Fe(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)},undoable:n.undoable})}function xo(n){return new Wd({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const a=Fe(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),f=l.doc.resolve(t.from).blockRange(),h=f&&vy(f,n.type,a);if(!h)return null;if(l.wrap(f,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,S=b||g.$to.parentOffset&&g.$from.marks();if(S){const x=S.filter(E=>v.includes(E.type.name));l.ensureMarks(x)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,a).run()}const p=l.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&us(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&l.join(t.from-1)},undoable:n.undoable})}function VI(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof me){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let s=r.depth;for(;s>=0;){const a=r.index(s);if(r.node(s).contentMatchAt(a).matchType(e))return!0;s-=1}return!1}var FI={};jy(FI,{createAtomBlockMarkdownSpec:()=>GI,createBlockMarkdownSpec:()=>KI,createInlineMarkdownSpec:()=>YI,parseAttributes:()=>$y,parseIndentedBlocks:()=>Yg,renderNestedMarkdownContent:()=>Vy,serializeAttributes:()=>qy});function $y(n){if(!(n!=null&&n.trim()))return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,h=>(t.push(h),`__QUOTED_${t.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const h=s.map(p=>p.trim().slice(1));e.class=h.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var g;const b=parseInt(((g=p.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),v=t[b];v&&(e[h]=v.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function qy(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function GI(n){const{nodeName:e,name:t,parseAttributes:r=$y,serializeAttributes:s=qy,defaultAttributes:a={},requiredAttributes:l=[],allowedAttributes:u}=n,f=t||e,h=p=>{if(!u)return p;const g={};return u.forEach(b=>{b in p&&(g[b]=p[b])}),g};return{parseMarkdown:(p,g)=>{const b={...a,...p.attributes};return g.createNode(e,b,[])},markdownTokenizer:{name:e,level:"block",start(p){var g;const b=new RegExp(`^:::${f}(?:\\s|$)`,"m"),v=(g=p.match(b))==null?void 0:g.index;return v!==void 0?v:-1},tokenize(p,g,b){const v=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=p.match(v);if(!S)return;const x=S[1]||"",E=r(x);if(!l.find(C=>!(C in E)))return{type:e,raw:S[0],attributes:E}}},renderMarkdown:p=>{const g=h(p.attrs||{}),b=s(g),v=b?` {${b}}`:"";return`:::${f}${v} :::`}}}function KI(n){const{nodeName:e,name:t,getContent:r,parseAttributes:s=$y,serializeAttributes:a=qy,defaultAttributes:l={},content:u="block",allowedAttributes:f}=n,h=t||e,p=g=>{if(!f)return g;const b={};return f.forEach(v=>{v in g&&(b[v]=g[v])}),b};return{parseMarkdown:(g,b)=>{let v;if(r){const x=r(g);v=typeof x=="string"?[{type:"text",text:x}]:x}else u==="block"?v=b.parseChildren(g.tokens||[]):v=b.parseInline(g.tokens||[]);const S={...l,...g.attributes};return b.createNode(e,S,v)},markdownTokenizer:{name:e,level:"block",start(g){var b;const v=new RegExp(`^:::${h}`,"m"),S=(b=g.match(v))==null?void 0:b.index;return S!==void 0?S:-1},tokenize(g,b,v){var S;const x=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=g.match(x);if(!E)return;const[_,C=""]=E,O=s(C);let B=1;const j=_.length;let P="";const U=/^:::([\w-]*)(\s.*)?/gm,F=g.slice(j);for(U.lastIndex=0;;){const W=U.exec(F);if(W===null)break;const de=W.index,oe=W[1];if(!((S=W[2])!=null&&S.endsWith(":::"))){if(oe)B+=1;else if(B-=1,B===0){const ke=F.slice(0,de);P=ke.trim();const te=g.slice(0,j+de+W[0].length);let he=[];if(P)if(u==="block")for(he=v.blockTokens(ke),he.forEach(Te=>{Te.text&&(!Te.tokens||Te.tokens.length===0)&&(Te.tokens=v.inlineTokens(Te.text))});he.length>0;){const Te=he[he.length-1];if(Te.type==="paragraph"&&(!Te.text||Te.text.trim()===""))he.pop();else break}else he=v.inlineTokens(P);return{type:e,raw:te,attributes:O,content:P,tokens:he}}}}}},renderMarkdown:(g,b)=>{const v=p(g.attrs||{}),S=a(v),x=S?` {${S}}`:"",E=b.renderChildren(g.content||[],`

`);return`:::${h}${x}

${E}

:::`}}}function JI(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,s,a,l]=r;e[s]=a||l,r=t.exec(n)}return e}function WI(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function YI(n){const{nodeName:e,name:t,getContent:r,parseAttributes:s=JI,serializeAttributes:a=WI,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:f}=n,h=t||e,p=b=>{if(!f)return b;const v={};return f.forEach(S=>{const x=typeof S=="string"?S:S.name,E=typeof S=="string"?void 0:S.skipIfDefault;if(x in b){const _=b[x];if(E!==void 0&&_===E)return;v[x]=_}}),v},g=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(b,v)=>{const S={...l,...b.attributes};if(u)return v.createNode(e,S);const x=r?r(b):b.content||"";return x?v.createNode(e,S,[v.createTextNode(x)]):v.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(b){const v=u?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=b.match(v),x=S==null?void 0:S.index;return x!==void 0?x:-1},tokenize(b,v,S){const x=u?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),E=b.match(x);if(!E)return;let _="",C="";if(u){const[,B]=E;C=B}else{const[,B,j]=E;C=B,_=j||""}const O=s(C.trim());return{type:e,raw:E[0],content:_.trim(),attributes:O}}},renderMarkdown:b=>{let v="";r?v=r(b):b.content&&b.content.length>0&&(v=b.content.filter(_=>_.type==="text").map(_=>_.text).join(""));const S=p(b.attrs||{}),x=a(S),E=x?` ${x}`:"";return u?`[${h}${E}]`:`[${h}${E}]${v}[/${h}]`}}}function Yg(n,e,t){var r,s,a,l;const u=n.split(`
`),f=[];let h="",p=0;const g=e.baseIndentSize||2;for(;p<u.length;){const b=u[p],v=b.match(e.itemPattern);if(!v){if(f.length>0)break;if(b.trim()===""){p+=1,h=`${h}${b}
`;continue}else return}const S=e.extractItemData(v),{indentLevel:x,mainContent:E}=S;h=`${h}${b}
`;const _=[E];for(p+=1;p<u.length;){const j=u[p];if(j.trim()===""){const U=u.slice(p+1).findIndex(de=>de.trim()!=="");if(U===-1)break;if((((s=(r=u[p+1+U].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>x){_.push(j),h=`${h}${j}
`,p+=1;continue}else break}if((((l=(a=j.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:l.length)||0)>x)_.push(j),h=`${h}${j}
`,p+=1;else break}let C;const O=_.slice(1);if(O.length>0){const j=O.map(P=>P.slice(x+g)).join(`
`);j.trim()&&(e.customNestedParser?C=e.customNestedParser(j):C=t.blockTokens(j))}const B=e.createToken(S,C);f.push(B)}if(f.length!==0)return{items:f,raw:h}}function Vy(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const s=typeof t=="function"?t(r):t,[a,...l]=n.content,u=e.renderChildren([a]),f=[`${s}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const g=p.split(`
`).map(b=>b?e.indent(b):"").join(`
`);f.push(g)}}),f.join(`
`)}function XI(n,e,t={}){const{state:r}=e,{doc:s,tr:a}=r,l=n;s.descendants((u,f)=>{const h=a.mapping.map(f),p=a.mapping.map(f)+u.nodeSize;let g=null;if(u.marks.forEach(v=>{if(v!==l)return!1;g=v}),!g)return;let b=!1;if(Object.keys(t).forEach(v=>{t[v]!==g.attrs[v]&&(b=!0)}),b){const v=n.type.create({...n.attrs,...t});a.removeMark(h,p,n.type),a.addMark(h,p,v)}}),a.docChanged&&e.view.dispatch(a)}var Dn=class C_ extends Hy{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new C_(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function na(n){return new DI({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const a=Fe(n.getAttributes,void 0,r,s);if(a===!1||a===null)return null;const{tr:l}=e,u=r[r.length-1],f=r[0];let h=t.to;if(u){const p=f.search(/\S/),g=t.from+f.indexOf(u),b=g+u.length;if(Py(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(E=>E===n.type&&E!==S.mark.type)).filter(S=>S.to>g).length)return null;b<t.to&&l.delete(b,t.to),g>t.from&&l.delete(t.from+p,g),h=t.from+p+u.length,l.addMark(t.from+p,h,n.type.create(a||{})),l.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:QI,getOwnPropertySymbols:ZI}=Object,{hasOwnProperty:eB}=Object.prototype;function Zm(n,e){return function(r,s,a){return n(r,s,a)&&e(r,s,a)}}function Sf(n){return function(t,r,s){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,s);const{cache:a}=s,l=a.get(t),u=a.get(r);if(l&&u)return l===r&&u===t;a.set(t,r),a.set(r,t);const f=n(t,r,s);return a.delete(t),a.delete(r),f}}function tB(n){return n!=null?n[Symbol.toStringTag]:void 0}function nE(n){return QI(n).concat(ZI(n))}const nB=Object.hasOwn||((n,e)=>eB.call(n,e));function oa(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const rB="__v",iB="__o",sB="_owner",{getOwnPropertyDescriptor:rE,keys:iE}=Object;function aB(n,e){return n.byteLength===e.byteLength&&ed(new Uint8Array(n),new Uint8Array(e))}function oB(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function lB(n,e){return n.byteLength===e.byteLength&&ed(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function cB(n,e){return oa(n.getTime(),e.getTime())}function uB(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function fB(n,e){return n===e}function sE(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),a=n.entries();let l,u,f=0;for(;(l=a.next())&&!l.done;){const h=e.entries();let p=!1,g=0;for(;(u=h.next())&&!u.done;){if(s[g]){g++;continue}const b=l.value,v=u.value;if(t.equals(b[0],v[0],f,g,n,e,t)&&t.equals(b[1],v[1],b[0],v[0],n,e,t)){p=s[g]=!0;break}g++}if(!p)return!1;f++}return!0}const dB=oa;function hB(n,e,t){const r=iE(n);let s=r.length;if(iE(e).length!==s)return!1;for(;s-- >0;)if(!O_(n,e,t,r[s]))return!1;return!0}function Bl(n,e,t){const r=nE(n);let s=r.length;if(nE(e).length!==s)return!1;let a,l,u;for(;s-- >0;)if(a=r[s],!O_(n,e,t,a)||(l=rE(n,a),u=rE(e,a),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function pB(n,e){return oa(n.valueOf(),e.valueOf())}function mB(n,e){return n.source===e.source&&n.flags===e.flags}function aE(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),a=n.values();let l,u;for(;(l=a.next())&&!l.done;){const f=e.values();let h=!1,p=0;for(;(u=f.next())&&!u.done;){if(!s[p]&&t.equals(l.value,u.value,l.value,u.value,n,e,t)){h=s[p]=!0;break}p++}if(!h)return!1}return!0}function ed(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function gB(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function O_(n,e,t,r){return(r===sB||r===iB||r===rB)&&(n.$$typeof||e.$$typeof)?!0:nB(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const yB="[object ArrayBuffer]",bB="[object Arguments]",vB="[object Boolean]",SB="[object DataView]",wB="[object Date]",xB="[object Error]",EB="[object Map]",TB="[object Number]",_B="[object Object]",kB="[object RegExp]",AB="[object Set]",CB="[object String]",OB={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},MB="[object URL]",RB=Object.prototype.toString;function NB({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:a,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:f,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:g,areTypedArraysEqual:b,areUrlsEqual:v,unknownTagComparators:S}){return function(E,_,C){if(E===_)return!0;if(E==null||_==null)return!1;const O=typeof E;if(O!==typeof _)return!1;if(O!=="object")return O==="number"?u(E,_,C):O==="function"?a(E,_,C):!1;const B=E.constructor;if(B!==_.constructor)return!1;if(B===Object)return f(E,_,C);if(Array.isArray(E))return e(E,_,C);if(B===Date)return r(E,_,C);if(B===RegExp)return p(E,_,C);if(B===Map)return l(E,_,C);if(B===Set)return g(E,_,C);const j=RB.call(E);if(j===wB)return r(E,_,C);if(j===kB)return p(E,_,C);if(j===EB)return l(E,_,C);if(j===AB)return g(E,_,C);if(j===_B)return typeof E.then!="function"&&typeof _.then!="function"&&f(E,_,C);if(j===MB)return v(E,_,C);if(j===xB)return s(E,_,C);if(j===bB)return f(E,_,C);if(OB[j])return b(E,_,C);if(j===yB)return n(E,_,C);if(j===SB)return t(E,_,C);if(j===vB||j===TB||j===CB)return h(E,_,C);if(S){let P=S[j];if(!P){const U=tB(E);U&&(P=S[U])}if(P)return P(E,_,C)}return!1}}function DB({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:aB,areArraysEqual:t?Bl:oB,areDataViewsEqual:lB,areDatesEqual:cB,areErrorsEqual:uB,areFunctionsEqual:fB,areMapsEqual:t?Zm(sE,Bl):sE,areNumbersEqual:dB,areObjectsEqual:t?Bl:hB,arePrimitiveWrappersEqual:pB,areRegExpsEqual:mB,areSetsEqual:t?Zm(aE,Bl):aE,areTypedArraysEqual:t?Zm(ed,Bl):ed,areUrlsEqual:gB,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const s=Sf(r.areArraysEqual),a=Sf(r.areMapsEqual),l=Sf(r.areObjectsEqual),u=Sf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:l,areSetsEqual:u})}return r}function LB(n){return function(e,t,r,s,a,l,u){return n(e,t,u)}}function jB({circular:n,comparator:e,createState:t,equals:r,strict:s}){if(t)return function(u,f){const{cache:h=n?new WeakMap:void 0,meta:p}=t();return e(u,f,{cache:h,equals:r,meta:p,strict:s})};if(n)return function(u,f){return e(u,f,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const a={cache:void 0,equals:r,meta:void 0,strict:s};return function(u,f){return e(u,f,a)}}const zB=hs();hs({strict:!0});hs({circular:!0});hs({circular:!0,strict:!0});hs({createInternalComparator:()=>oa});hs({strict:!0,createInternalComparator:()=>oa});hs({circular:!0,createInternalComparator:()=>oa});hs({circular:!0,createInternalComparator:()=>oa,strict:!0});function hs(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:s=!1}=n,a=DB(n),l=NB(a),u=t?t(l):LB(l);return jB({circular:e,comparator:l,createState:r,equals:u,strict:s})}var eg={exports:{}},tg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function IB(){if(oE)return tg;oE=1;var n=Tc(),e=S1();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,f=n.useDebugValue;return tg.useSyncExternalStoreWithSelector=function(h,p,g,b,v){var S=a(null);if(S.current===null){var x={hasValue:!1,value:null};S.current=x}else x=S.current;S=u(function(){function _(P){if(!C){if(C=!0,O=P,P=b(P),v!==void 0&&x.hasValue){var U=x.value;if(v(U,P))return B=U}return B=P}if(U=B,r(O,P))return U;var F=b(P);return v!==void 0&&v(U,F)?(O=P,U):(O=P,B=F)}var C=!1,O,B,j=g===void 0?null:g;return[function(){return _(p())},j===null?void 0:function(){return _(j())}]},[p,g,b,v]);var E=s(h,S[0],S[1]);return l(function(){x.hasValue=!0,x.value=E},[E]),f(E),E},tg}var lE;function BB(){return lE||(lE=1,eg.exports=IB()),eg.exports}var UB=BB(),PB=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},HB=({contentComponent:n})=>{const e=w1.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return k.jsx(k.Fragment,{children:Object.values(e)})};function $B(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:oM.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}var qB=class extends bn.Component{constructor(n){var e;super(n),this.editorContentRef=bn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=$B(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return k.jsxs(k.Fragment,{children:[k.jsx("div",{ref:PB(e,this.editorContentRef),...t}),(n==null?void 0:n.contentComponent)&&k.jsx(HB,{contentComponent:n.contentComponent})]})}},VB=D.forwardRef((n,e)=>{const t=bn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return bn.createElement(qB,{key:t,innerRef:e,...n})}),M_=bn.memo(VB),FB=typeof window<"u"?D.useLayoutEffect:D.useEffect,GB=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function KB(n){var e;const[t]=D.useState(()=>new GB(n.editor)),r=UB.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:zB);return FB(()=>t.watch(n.editor),[n.editor,t]),D.useDebugValue(r),r}var JB=!1,Xg=typeof window>"u",WB=Xg||!!(typeof window<"u"&&window.next),YB=class R_{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Xg||WB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onBeforeCreate)==null?void 0:a.call(s,...r)},onBlur:(...r)=>{var s,a;return(a=(s=this.options.current).onBlur)==null?void 0:a.call(s,...r)},onCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onCreate)==null?void 0:a.call(s,...r)},onDestroy:(...r)=>{var s,a;return(a=(s=this.options.current).onDestroy)==null?void 0:a.call(s,...r)},onFocus:(...r)=>{var s,a;return(a=(s=this.options.current).onFocus)==null?void 0:a.call(s,...r)},onSelectionUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onSelectionUpdate)==null?void 0:a.call(s,...r)},onTransaction:(...r)=>{var s,a;return(a=(s=this.options.current).onTransaction)==null?void 0:a.call(s,...r)},onUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onUpdate)==null?void 0:a.call(s,...r)},onContentError:(...r)=>{var s,a;return(a=(s=this.options.current).onContentError)==null?void 0:a.call(s,...r)},onDrop:(...r)=>{var s,a;return(a=(s=this.options.current).onDrop)==null?void 0:a.call(s,...r)},onPaste:(...r)=>{var s,a;return(a=(s=this.options.current).onPaste)==null?void 0:a.call(s,...r)},onDelete:(...r)=>{var s,a;return(a=(s=this.options.current).onDelete)==null?void 0:a.call(s,...r)}};return new $I(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,a)=>{var l;return s===((l=t.extensions)==null?void 0:l[a])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?R_.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function XB(n={},e=[]){const t=D.useRef(n);t.current=n;const[r]=D.useState(()=>new YB(t)),s=w1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return D.useDebugValue(s),D.useEffect(r.onRender(e)),KB({editor:s,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&a===0?0:a+1}),s}var N_=D.createContext({editor:null});N_.Consumer;var QB=D.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),ZB=()=>D.useContext(QB);bn.forwardRef((n,e)=>{const{onDragStart:t}=ZB(),r=n.as||"div";return k.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});bn.createContext({markViewContentRef:()=>{}});var Fy=D.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});Fy.displayName="TiptapContext";var e3=()=>D.useContext(Fy);function D_({editor:n,instance:e,children:t}){const r=n??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=D.useMemo(()=>({editor:r}),[r]),a=D.useMemo(()=>({editor:r}),[r]);return k.jsx(N_.Provider,{value:a,children:k.jsx(Fy.Provider,{value:s,children:t})})}D_.displayName="Tiptap";function L_({...n}){const{editor:e}=e3();return k.jsx(M_,{editor:e,...n})}L_.displayName="Tiptap.Content";Object.assign(D_,{Content:L_});var td=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},t3=/^\s*>\s$/,n3=Dn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return td("blockquote",{...bt(this.options.HTMLAttributes,n),children:td("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",r=[];return n.content.forEach(s=>{const u=e.renderChildren([s]).split(`
`).map(f=>f.trim()===""?t:`${t} ${f}`);r.push(u.join(`
`))}),r.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xo({find:t3,type:this.type})]}}),r3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,i3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,s3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,a3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,o3=ds.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return td("strong",{...bt(this.options.HTMLAttributes,n),children:td("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[wo({find:r3,type:this.type}),wo({find:s3,type:this.type})]},addPasteRules(){return[na({find:i3,type:this.type}),na({find:a3,type:this.type})]}}),l3=/(^|[^`])`([^`]+)`(?!`)$/,c3=/(^|[^`])`([^`]+)`(?!`)/g,u3=ds.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",bt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[wo({find:l3,type:this.type})]},addPasteRules(){return[na({find:c3,type:this.type})]}}),ng=4,f3=/^```([a-z]+)?[\s\n]$/,d3=/^~~~([a-z]+)?[\s\n]$/,h3=Dn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ng,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const a=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",bt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const s=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${s}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:ng,{state:r}=n,{selection:s}=r,{$from:a,empty:l}=s;if(a.parent.type!==this.type)return!1;const u=" ".repeat(t);return l?n.commands.insertContent(u):n.commands.command(({tr:f})=>{const{from:h,to:p}=s,v=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(S=>u+S).join(`
`);return f.replaceWith(h,p,r.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:ng,{state:r}=n,{selection:s}=r,{$from:a,empty:l}=s;return a.parent.type!==this.type?!1:l?n.commands.command(({tr:u})=>{var f;const{pos:h}=a,p=a.start(),g=a.end(),v=r.doc.textBetween(p,g,`
`,`
`).split(`
`);let S=0,x=0;const E=h-p;for(let P=0;P<v.length;P+=1){if(x+v[P].length>=E){S=P;break}x+=v[P].length+1}const C=((f=v[S].match(/^ */))==null?void 0:f[0])||"",O=Math.min(C.length,t);if(O===0)return!0;let B=p;for(let P=0;P<S;P+=1)B+=v[P].length+1;return u.delete(B,B+O),h-B<=O&&u.setSelection(Se.create(u.doc,B)),!0}):n.commands.command(({tr:u})=>{const{from:f,to:h}=s,b=r.doc.textBetween(f,h,`
`,`
`).split(`
`).map(v=>{var S;const x=((S=v.match(/^ */))==null?void 0:S[0])||"",E=Math.min(x.length,t);return v.slice(E)}).join(`
`);return u.replaceWith(f,h,r.schema.text(b)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!a||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:a}=t;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(Ce.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[Wg({find:f3,type:this.type,getAttributes:n=>({language:n[1]})}),Wg({find:d3,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new lt({key:new Rt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,a=s==null?void 0:s.mode;if(!t||!a)return!1;const{tr:l,schema:u}=n.state,f=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:a},f)),l.selection.$from.parent.type!==this.type&&l.setSelection(Se.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),p3=Dn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),m3=Dn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",bt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:a}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,f=a||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&l){const g=f.filter(b=>u.includes(b.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),g3=Dn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,bt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,s="#".repeat(r);return n.content?`${s} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Wg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),y3=Dn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",bt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!VI(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,s=n();return f_(t)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:a,tr:l,dispatch:u})=>{if(u){const{$to:f}=l.selection,h=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?l.setSelection(Se.create(l.doc,f.pos+1)):f.nodeAfter.isBlock?l.setSelection(me.create(l.doc,f.pos)):l.setSelection(Se.create(l.doc,f.pos));else{const p=a.schema.nodes[this.options.nextNodeType]||f.parent.type.contentMatch.defaultType,g=p==null?void 0:p.create();g&&(l.insert(h,g),l.setSelection(Se.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[qI({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),b3=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,v3=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,S3=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,w3=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,x3=ds.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[wo({find:b3,type:this.type}),wo({find:S3,type:this.type})]},addPasteRules(){return[na({find:v3,type:this.type}),na({find:w3,type:this.type})]}});const E3="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",T3="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Qg="numeric",Zg="ascii",ey="alpha",Zl="asciinumeric",Fl="alphanumeric",ty="domain",j_="emoji",_3="scheme",k3="slashscheme",rg="whitespace";function A3(n,e){return n in e||(e[n]=[]),e[n]}function Gs(n,e,t){e[Qg]&&(e[Zl]=!0,e[Fl]=!0),e[Zg]&&(e[Zl]=!0,e[ey]=!0),e[Zl]&&(e[Fl]=!0),e[ey]&&(e[Fl]=!0),e[Fl]&&(e[ty]=!0),e[j_]&&(e[ty]=!0);for(const r in e){const s=A3(r,t);s.indexOf(n)<0&&s.push(n)}}function C3(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function yn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}yn.groups={};yn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],a=e.jr[r][1];if(a&&s.test(n))return a}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||yn.groups;let s;return e&&e.j?s=e:(s=new yn(e),t&&r&&Gs(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const a=n.length;if(!a)return s;for(let l=0;l<a-1;l++)s=s.tt(n[l]);return s.tt(n[a-1],e,t,r)},tt(n,e,t,r){r=r||yn.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const a=e;let l,u=s.go(n);if(u?(l=new yn,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new yn,a){if(r)if(l.t&&typeof l.t=="string"){const f=Object.assign(C3(l.t,r),t);Gs(a,f,r)}else t&&Gs(a,t,r);l.t=a}return s.j[n]=l,l}};const Ae=(n,e,t,r,s)=>n.ta(e,t,r,s),dt=(n,e,t,r,s)=>n.tr(e,t,r,s),cE=(n,e,t,r,s)=>n.ts(e,t,r,s),Q=(n,e,t,r,s)=>n.tt(e,t,r,s),si="WORD",ny="UWORD",z_="ASCIINUMERICAL",I_="ALPHANUMERICAL",xc="LOCALHOST",ry="TLD",iy="UTLD",Nf="SCHEME",so="SLASH_SCHEME",Gy="NUM",sy="WS",Ky="NL",ec="OPENBRACE",tc="CLOSEBRACE",nd="OPENBRACKET",rd="CLOSEBRACKET",id="OPENPAREN",sd="CLOSEPAREN",ad="OPENANGLEBRACKET",od="CLOSEANGLEBRACKET",ld="FULLWIDTHLEFTPAREN",cd="FULLWIDTHRIGHTPAREN",ud="LEFTCORNERBRACKET",fd="RIGHTCORNERBRACKET",dd="LEFTWHITECORNERBRACKET",hd="RIGHTWHITECORNERBRACKET",pd="FULLWIDTHLESSTHAN",md="FULLWIDTHGREATERTHAN",gd="AMPERSAND",yd="APOSTROPHE",bd="ASTERISK",Gi="AT",vd="BACKSLASH",Sd="BACKTICK",wd="CARET",Yi="COLON",Jy="COMMA",xd="DOLLAR",Er="DOT",Ed="EQUALS",Wy="EXCLAMATION",Jn="HYPHEN",nc="PERCENT",Td="PIPE",_d="PLUS",kd="POUND",rc="QUERY",Yy="QUOTE",B_="FULLWIDTHMIDDLEDOT",Xy="SEMI",Tr="SLASH",ic="TILDE",Ad="UNDERSCORE",U_="EMOJI",Cd="SYM";var P_=Object.freeze({__proto__:null,ALPHANUMERICAL:I_,AMPERSAND:gd,APOSTROPHE:yd,ASCIINUMERICAL:z_,ASTERISK:bd,AT:Gi,BACKSLASH:vd,BACKTICK:Sd,CARET:wd,CLOSEANGLEBRACKET:od,CLOSEBRACE:tc,CLOSEBRACKET:rd,CLOSEPAREN:sd,COLON:Yi,COMMA:Jy,DOLLAR:xd,DOT:Er,EMOJI:U_,EQUALS:Ed,EXCLAMATION:Wy,FULLWIDTHGREATERTHAN:md,FULLWIDTHLEFTPAREN:ld,FULLWIDTHLESSTHAN:pd,FULLWIDTHMIDDLEDOT:B_,FULLWIDTHRIGHTPAREN:cd,HYPHEN:Jn,LEFTCORNERBRACKET:ud,LEFTWHITECORNERBRACKET:dd,LOCALHOST:xc,NL:Ky,NUM:Gy,OPENANGLEBRACKET:ad,OPENBRACE:ec,OPENBRACKET:nd,OPENPAREN:id,PERCENT:nc,PIPE:Td,PLUS:_d,POUND:kd,QUERY:rc,QUOTE:Yy,RIGHTCORNERBRACKET:fd,RIGHTWHITECORNERBRACKET:hd,SCHEME:Nf,SEMI:Xy,SLASH:Tr,SLASH_SCHEME:so,SYM:Cd,TILDE:ic,TLD:ry,UNDERSCORE:Ad,UTLD:iy,UWORD:ny,WORD:si,WS:sy});const ri=/[a-z]/,Ul=new RegExp("\\p{L}","u"),ig=new RegExp("\\p{Emoji}","u"),ii=/\d/,sg=/\s/,uE="\r",ag=`
`,O3="",M3="",og="";let wf=null,xf=null;function R3(n=[]){const e={};yn.groups=e;const t=new yn;wf==null&&(wf=fE(E3)),xf==null&&(xf=fE(T3)),Q(t,"'",yd),Q(t,"{",ec),Q(t,"}",tc),Q(t,"[",nd),Q(t,"]",rd),Q(t,"(",id),Q(t,")",sd),Q(t,"<",ad),Q(t,">",od),Q(t,"",ld),Q(t,"",cd),Q(t,"",ud),Q(t,"",fd),Q(t,"",dd),Q(t,"",hd),Q(t,"",pd),Q(t,"",md),Q(t,"&",gd),Q(t,"*",bd),Q(t,"@",Gi),Q(t,"`",Sd),Q(t,"^",wd),Q(t,":",Yi),Q(t,",",Jy),Q(t,"$",xd),Q(t,".",Er),Q(t,"=",Ed),Q(t,"!",Wy),Q(t,"-",Jn),Q(t,"%",nc),Q(t,"|",Td),Q(t,"+",_d),Q(t,"#",kd),Q(t,"?",rc),Q(t,'"',Yy),Q(t,"/",Tr),Q(t,";",Xy),Q(t,"~",ic),Q(t,"_",Ad),Q(t,"\\",vd),Q(t,"",B_);const r=dt(t,ii,Gy,{[Qg]:!0});dt(r,ii,r);const s=dt(r,ri,z_,{[Zl]:!0}),a=dt(r,Ul,I_,{[Fl]:!0}),l=dt(t,ri,si,{[Zg]:!0});dt(l,ii,s),dt(l,ri,l),dt(s,ii,s),dt(s,ri,s);const u=dt(t,Ul,ny,{[ey]:!0});dt(u,ri),dt(u,ii,a),dt(u,Ul,u),dt(a,ii,a),dt(a,ri),dt(a,Ul,a);const f=Q(t,ag,Ky,{[rg]:!0}),h=Q(t,uE,sy,{[rg]:!0}),p=dt(t,sg,sy,{[rg]:!0});Q(t,og,p),Q(h,ag,f),Q(h,og,p),dt(h,sg,p),Q(p,uE),Q(p,ag),dt(p,sg,p),Q(p,og,p);const g=dt(t,ig,U_,{[j_]:!0});Q(g,"#"),dt(g,ig,g),Q(g,O3,g);const b=Q(g,M3);Q(b,"#"),dt(b,ig,g);const v=[[ri,l],[ii,s]],S=[[ri,null],[Ul,u],[ii,a]];for(let x=0;x<wf.length;x++)$i(t,wf[x],ry,si,v);for(let x=0;x<xf.length;x++)$i(t,xf[x],iy,ny,S);Gs(ry,{tld:!0,ascii:!0},e),Gs(iy,{utld:!0,alpha:!0},e),$i(t,"file",Nf,si,v),$i(t,"mailto",Nf,si,v),$i(t,"http",so,si,v),$i(t,"https",so,si,v),$i(t,"ftp",so,si,v),$i(t,"ftps",so,si,v),Gs(Nf,{scheme:!0,ascii:!0},e),Gs(so,{slashscheme:!0,ascii:!0},e),n=n.sort((x,E)=>x[0]>E[0]?1:-1);for(let x=0;x<n.length;x++){const E=n[x][0],C=n[x][1]?{[_3]:!0}:{[k3]:!0};E.indexOf("-")>=0?C[ty]=!0:ri.test(E)?ii.test(E)?C[Zl]=!0:C[Zg]=!0:C[Qg]=!0,cE(t,E,E,C)}return cE(t,"localhost",xc,{ascii:!0}),t.jd=new yn(Cd),{start:t,tokens:Object.assign({groups:e},P_)}}function H_(n,e){const t=N3(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let a=0,l=0;for(;l<r;){let u=n,f=null,h=0,p=null,g=-1,b=-1;for(;l<r&&(f=u.go(t[l]));)u=f,u.accepts()?(g=0,b=0,p=u):g>=0&&(g+=t[l].length,b++),h+=t[l].length,a+=t[l].length,l++;a-=g,l-=b,h-=g,s.push({t:p.t,v:e.slice(a-h,a),s:a-h,e:a})}return s}function N3(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),a,l=s<55296||s>56319||r+1===t||(a=n.charCodeAt(r+1))<56320||a>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function $i(n,e,t,r,s){let a;const l=e.length;for(let u=0;u<l-1;u++){const f=e[u];n.j[f]?a=n.j[f]:(a=new yn(r),a.jr=s.slice(),n.j[f]=a),n=a}return a=new yn(t),a.jr=s.slice(),n.j[e[l-1]]=a,a}function fE(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let a=0;for(;s.indexOf(n[r+a])>=0;)a++;if(a>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+a),10);l>0;l--)t.pop();r+=a}else t.push(n[r]),r++}return e}const Ec={defaultProtocol:"http",events:null,format:dE,formatHref:dE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Qy(n,e=null){let t=Object.assign({},Ec);n&&(t=Object.assign(t,n instanceof Qy?n.o:n));const r=t.ignoreTags,s=[];for(let a=0;a<r.length;a++)s.push(r[a].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}Qy.prototype={o:Ec,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:Ec[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function dE(n){return n}function $_(n,e){this.t="token",this.v=n,this.tk=e}$_.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Ec.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),a=this.toFormattedString(n),l={},u=n.get("className",t,e),f=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),f&&(l.target=f),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:s,attributes:l,content:a,eventListeners:g}}};function Xd(n,e){class t extends $_{constructor(s,a){super(s,a),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const hE=Xd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),pE=Xd("text"),D3=Xd("nl"),Ef=Xd("url",{isLink:!0,toHref(n=Ec.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==xc&&n[1].t===Yi}}),Kn=n=>new yn(n);function L3({groups:n}){const e=n.domain.concat([gd,bd,Gi,vd,Sd,wd,xd,Ed,Jn,Gy,nc,Td,_d,kd,Tr,Cd,ic,Ad]),t=[yd,Yi,Jy,Er,Wy,nc,rc,Yy,Xy,ad,od,ec,tc,rd,nd,id,sd,ld,cd,ud,fd,dd,hd,pd,md],r=[gd,yd,bd,vd,Sd,wd,xd,Ed,Jn,ec,tc,nc,Td,_d,kd,rc,Tr,Cd,ic,Ad],s=Kn(),a=Q(s,ic);Ae(a,r,a),Ae(a,n.domain,a);const l=Kn(),u=Kn(),f=Kn();Ae(s,n.domain,l),Ae(s,n.scheme,u),Ae(s,n.slashscheme,f),Ae(l,r,a),Ae(l,n.domain,l);const h=Q(l,Gi);Q(a,Gi,h),Q(u,Gi,h),Q(f,Gi,h);const p=Q(a,Er);Ae(p,r,a),Ae(p,n.domain,a);const g=Kn();Ae(h,n.domain,g),Ae(g,n.domain,g);const b=Q(g,Er);Ae(b,n.domain,g);const v=Kn(hE);Ae(b,n.tld,v),Ae(b,n.utld,v),Q(h,xc,v);const S=Q(g,Jn);Q(S,Jn,S),Ae(S,n.domain,g),Ae(v,n.domain,g),Q(v,Er,b),Q(v,Jn,S);const x=Q(v,Yi);Ae(x,n.numeric,hE);const E=Q(l,Jn),_=Q(l,Er);Q(E,Jn,E),Ae(E,n.domain,l),Ae(_,r,a),Ae(_,n.domain,l);const C=Kn(Ef);Ae(_,n.tld,C),Ae(_,n.utld,C),Ae(C,n.domain,l),Ae(C,r,a),Q(C,Er,_),Q(C,Jn,E),Q(C,Gi,h);const O=Q(C,Yi),B=Kn(Ef);Ae(O,n.numeric,B);const j=Kn(Ef),P=Kn();Ae(j,e,j),Ae(j,t,P),Ae(P,e,j),Ae(P,t,P),Q(C,Tr,j),Q(B,Tr,j);const U=Q(u,Yi),F=Q(f,Yi),W=Q(F,Tr),de=Q(W,Tr);Ae(u,n.domain,l),Q(u,Er,_),Q(u,Jn,E),Ae(f,n.domain,l),Q(f,Er,_),Q(f,Jn,E),Ae(U,n.domain,j),Q(U,Tr,j),Q(U,rc,j),Ae(de,n.domain,j),Ae(de,e,j),Q(de,Tr,j);const oe=[[ec,tc],[nd,rd],[id,sd],[ad,od],[ld,cd],[ud,fd],[dd,hd],[pd,md]];for(let ke=0;ke<oe.length;ke++){const[te,he]=oe[ke],Te=Q(j,te);Q(P,te,Te),Q(Te,he,j);const q=Kn(Ef);Ae(Te,e,q);const ee=Kn();Ae(Te,t),Ae(q,e,q),Ae(q,t,ee),Ae(ee,e,q),Ae(ee,t,ee),Q(q,he,j),Q(ee,he,j)}return Q(s,xc,C),Q(s,Ky,D3),{start:s,tokens:P_}}function j3(n,e,t){let r=t.length,s=0,a=[],l=[];for(;s<r;){let u=n,f=null,h=null,p=0,g=null,b=-1;for(;s<r&&!(f=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=f||u.go(t[s].t));)f=null,u=h,u.accepts()?(b=0,g=u):b>=0&&b++,s++,p++;if(b<0)s-=p,s<r&&(l.push(t[s]),s++);else{l.length>0&&(a.push(lg(pE,e,l)),l=[]),s-=b,p-=b;const v=g.t,S=t.slice(s-p,s);a.push(lg(v,e,S))}}return l.length>0&&a.push(lg(pE,e,l)),a}function lg(n,e,t){const r=t[0].s,s=t[t.length-1].e,a=e.slice(r,s);return new n(a,t)}const z3=typeof console<"u"&&console&&console.warn||(()=>{}),I3="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",tt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function B3(){return yn.groups={},tt.scanner=null,tt.parser=null,tt.tokenQueue=[],tt.pluginQueue=[],tt.customSchemes=[],tt.initialized=!1,tt}function mE(n,e=!1){if(tt.initialized&&z3(`linkifyjs: already initialized - will not register custom scheme "${n}" ${I3}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);tt.customSchemes.push([n,e])}function U3(){tt.scanner=R3(tt.customSchemes);for(let n=0;n<tt.tokenQueue.length;n++)tt.tokenQueue[n][1]({scanner:tt.scanner});tt.parser=L3(tt.scanner.tokens);for(let n=0;n<tt.pluginQueue.length;n++)tt.pluginQueue[n][1]({scanner:tt.scanner,parser:tt.parser});return tt.initialized=!0,tt}function Zy(n){return tt.initialized||U3(),j3(tt.parser.start,n,H_(tt.scanner.start,n))}Zy.scan=H_;function q_(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Qy(t),s=Zy(n),a=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&a.push(u.toFormattedObject(r))}return a}var eb="[\0- -\u2029]",P3=new RegExp(eb),H3=new RegExp(`${eb}$`),$3=new RegExp(eb,"g");function q3(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function V3(n){return new lt({key:new Rt("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),a=e.some(h=>h.getMeta("preventAutolink"));if(!s||a)return;const{tr:l}=r,u=r_(t.doc,[...e]);if(u_(u).forEach(({newRange:h})=>{const p=Vz(r.doc,h,v=>v.isTextblock);let g,b;if(p.length>1)g=p[0],b=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!H3.test(v))return;g=p[0],b=r.doc.textBetween(g.pos,h.to,void 0," ")}if(g&&b){const v=b.split(P3).filter(Boolean);if(v.length<=0)return!1;const S=v[v.length-1],x=g.pos+b.lastIndexOf(S);if(!S)return!1;const E=Zy(S).map(_=>_.toObject(n.defaultProtocol));if(!q3(E))return!1;E.filter(_=>_.isLink).map(_=>({..._,from:x+_.start+1,to:x+_.end+1})).filter(_=>r.schema.marks.code?!r.doc.rangeHasMark(_.from,_.to,r.schema.marks.code):!0).filter(_=>n.validate(_.value)).filter(_=>n.shouldAutoLink(_.value)).forEach(_=>{Py(_.from,_.to,r.doc).some(C=>C.mark.type===n.type)||l.addMark(_.from,_.to,n.type.create({href:_.href}))})}}),!!l.steps.length)return l}})}function F3(n){return new lt({key:new Rt("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,a;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const f=r.target;if(!f)return!1;const h=n.editor.view.dom;l=f.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(n.enableClickSelection&&(u=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const f=c_(e.state,n.type.name),h=(s=l.href)!=null?s:f.href,p=(a=l.target)!=null?a:f.target;h&&(window.open(h,p),u=!0)}return u}}})}function G3(n){return new lt({key:new Rt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:s}=n,{state:a}=e,{selection:l}=a,{empty:u}=l;if(u)return!1;let f="";r.content.forEach(p=>{f+=p.textContent});const h=q_(f,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===f);return!f||!h||s!==void 0&&!s(h.value)?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function Is(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace($3,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var K3=ds.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){mE(n);return}mE(n.scheme,n.optionalSlashes)})},onDestroy(){B3()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Is(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const s=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Is(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Is(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",bt(this.options.HTMLAttributes,n),0]:["a",bt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,r,s,a;const l=(r=(t=n.attrs)==null?void 0:t.href)!=null?r:"",u=(a=(s=n.attrs)==null?void 0:s.title)!=null?a:"",f=e.renderChildren(n);return u?`[${f}](${l} "${u}")`:`[${f}](${l})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Is(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!Is(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[na({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=q_(n).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:l=>!!Is(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(V3({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Is(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(F3({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(G3({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),J3=Object.defineProperty,W3=(n,e)=>{for(var t in e)J3(n,t,{get:e[t],enumerable:!0})},Y3="listItem",gE="textStyle",yE=/^\s*([-+*])\s$/,V_=Dn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",bt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Y3,this.editor.getAttributes(gE)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=xo({find:yE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=xo({find:yE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(gE),editor:this.editor})),[n]}}),F_=Dn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",bt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(s=>s.type==="paragraph"))t=e.parseChildren(n.tokens);else{const s=n.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(s.tokens)}],n.tokens.length>1){const l=n.tokens.slice(1),u=e.parseChildren(l);t.push(...u)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Vy(n,e,r=>{var s,a;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((a=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:a.start)||1)+r.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),X3={};W3(X3,{findListItemPos:()=>Nc,getNextListDepth:()=>tb,handleBackspace:()=>ay,handleDelete:()=>oy,hasListBefore:()=>G_,hasListItemAfter:()=>Q3,hasListItemBefore:()=>K_,listItemHasSubList:()=>J_,nextListIsDeeper:()=>W_,nextListIsHigher:()=>Y_});var Nc=(n,e)=>{const{$from:t}=e.selection,r=At(n,e.schema);let s=null,a=t.depth,l=t.pos,u=null;for(;a>0&&u===null;)s=t.node(a),s.type===r?u=a:(a-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},tb=(n,e)=>{const t=Nc(n,e);if(!t)return!1;const[,r]=eI(e,n,t.$pos.pos+4);return r},G_=(n,e,t)=>{const{$anchor:r}=n.selection,s=Math.max(0,r.pos-2),a=n.doc.resolve(s).node();return!(!a||!t.includes(a.type.name))},K_=(n,e)=>{var t;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((t=s.nodeBefore)==null?void 0:t.type.name)!==n)},J_=(n,e,t)=>{if(!t)return!1;const r=At(n,e.schema);let s=!1;return t.descendants(a=>{a.type===r&&(s=!0)}),s},ay=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ls(n.state,e)&&G_(n.state,e,t)){const{$anchor:u}=n.state.selection,f=n.state.doc.resolve(u.before()-1),h=[];f.node().descendants((b,v)=>{b.type.name===e&&h.push({node:b,pos:v})});const p=h.at(-1);if(!p)return!1;const g=n.state.doc.resolve(f.start()+p.pos+1);return n.chain().cut({from:u.start()-1,to:u.end()+1},g.end()).joinForward().run()}if(!ls(n.state,e)||!iI(n.state))return!1;const r=Nc(e,n.state);if(!r)return!1;const a=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=J_(e,n.state,a);return K_(e,n.state)&&!l?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},W_=(n,e)=>{const t=tb(n,e),r=Nc(n,e);return!r||!t?!1:t>r.depth},Y_=(n,e)=>{const t=tb(n,e),r=Nc(n,e);return!r||!t?!1:t<r.depth},oy=(n,e)=>{if(!ls(n.state,e)||!rI(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:s}=t;return!t.empty&&r.sameParent(s)?!1:W_(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():Y_(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},Q3=(n,e)=>{var t;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((t=s.nodeAfter)==null?void 0:t.type.name)!==n)},X_=We.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&oy(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&oy(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&ay(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&ay(n,t,r)&&(e=!0)}),e}}}}),bE=/^(\s*)(\d+)\.\s+(.*)$/,Z3=/^\s/;function eU(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t],a=s.match(bE);if(!a)break;const[,l,u,f]=a,h=l.length;let p=f,g=t+1;const b=[s];for(;g<n.length;){const v=n[g];if(v.match(bE))break;if(v.trim()==="")b.push(v),p+=`
`,g+=1;else if(v.match(Z3))b.push(v),p+=`
${v.slice(h+2)}`,g+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:b.join(`
`)}),r=g,t=g}return[e,r]}function Q_(n,e,t){var r;const s=[];let a=0;for(;a<n.length;){const l=n[a];if(l.indent===e){const u=l.content.split(`
`),f=((r=u[0])==null?void 0:r.trim())||"",h=[];f&&h.push({type:"paragraph",raw:f,tokens:t.inlineTokens(f)});const p=u.slice(1).join(`
`).trim();if(p){const v=t.blockTokens(p);h.push(...v)}let g=a+1;const b=[];for(;g<n.length&&n[g].indent>e;)b.push(n[g]),g+=1;if(b.length>0){const v=Math.min(...b.map(x=>x.indent)),S=Q_(b,v,t);h.push({type:"list",ordered:!0,start:b[0].number,items:S,raw:b.map(x=>x.raw).join(`
`)})}s.push({type:"list_item",raw:l.raw,tokens:h}),a=g}else a+=1}return s}function tU(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const a=e.parseChildren([s]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([s]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var nU="listItem",vE="textStyle",SE=/^(\d+)\.\s$/,Z_=Dn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",bt(this.options.HTMLAttributes,t),0]:["ol",bt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?tU(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e==null?void 0:e.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const s=n.split(`
`),[a,l]=eU(s);if(a.length===0)return;const u=Q_(a,0,t);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:u,raw:s.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(nU,this.editor.getAttributes(vE)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=xo({find:SE,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=xo({find:SE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(vE)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),rU=/^\s*(\[([( |x])?\])\s$/,iU=Dn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",bt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const s=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Vy(n,e,s)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const s=document.createElement("li"),a=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),f=document.createElement("div"),h=g=>{var b,v;u.ariaLabel=((v=(b=this.options.a11y)==null?void 0:b.checkboxLabel)==null?void 0:v.call(b,g,u.checked))||`Task item checkbox for ${g.textContent||"empty task item"}`};h(n),a.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",g=>g.preventDefault()),u.addEventListener("change",g=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:b}=g.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const S=t();if(typeof S!="number")return!1;const x=v.doc.nodeAt(S);return v.setNodeMarkup(S,void 0,{...x==null?void 0:x.attrs,checked:b}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,b)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([g,b])=>{s.setAttribute(g,b)}),s.dataset.checked=n.attrs.checked,u.checked=n.attrs.checked,a.append(u,l),s.append(a,f),Object.entries(e).forEach(([g,b])=>{s.setAttribute(g,b)});let p=new Set(Object.keys(e));return{dom:s,contentDOM:f,update:g=>{if(g.type!==this.type)return!1;s.dataset.checked=g.attrs.checked,u.checked=g.attrs.checked,h(g);const b=r.extensionManager.attributes,v=wc(g,b),S=new Set(Object.keys(v)),x=this.options.HTMLAttributes;return p.forEach(E=>{S.has(E)||(E in x?s.setAttribute(E,x[E]):s.removeAttribute(E))}),Object.entries(v).forEach(([E,_])=>{_==null?E in x?s.setAttribute(E,x[E]):s.removeAttribute(E):s.setAttribute(E,_)}),p=S,!0}}}},addInputRules(){return[xo({find:rU,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),sU=Dn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",bt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=a=>{const l=Yg(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,f)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:t.inlineTokens(u.mainContent),nestedTokens:f}),customNestedParser:r},t);return l?[{type:"taskList",raw:l.raw,items:l.items}]:t.blockTokens(a)},s=Yg(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:t.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},t);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});We.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(V_.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(F_.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(X_.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(Z_.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(iU.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(sU.configure(this.options.taskList)),n}});var wE="&nbsp;",aU="",oU=Dn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",bt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const r=e.parseInline(t);return r.length===1&&r[0].type==="text"&&(r[0].text===wE||r[0].text===aU)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?wE:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),lU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,uU=ds.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",bt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[wo({find:lU,type:this.type})]},addPasteRules(){return[na({find:cU,type:this.type})]}}),fU=Dn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),ek=ds.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",bt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!s)return;const a=s[2].trim();return{type:"underline",raw:s[0],text:a,tokens:t.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),dU=ek;function hU(n={}){return new lt({view(e){return new pU(e,n)}})}class pU{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=l=>{this[s](l)};return e.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,a=s.getBoundingClientRect(),l=a.width/s.offsetWidth,u=a.height/s.offsetHeight;if(t){let g=e.nodeBefore,b=e.nodeAfter;if(g||b){let v=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(v){let S=v.getBoundingClientRect(),x=g?S.bottom:S.top;g&&b&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*u;r={left:S.left,right:S.right,top:x-E,bottom:x+E}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*l;r={left:g.left-b,right:g.left+b,top:g.top,bottom:g.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=f.getBoundingClientRect(),b=g.width/f.offsetWidth,v=g.height/f.offsetHeight;h=g.left-f.scrollLeft*b,p=g.top-f.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!a){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=J1(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class pt extends Ce{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return pt.valid(r)?new pt(r):Ce.near(r)}content(){return ne.empty}eq(e){return e instanceof pt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new pt(e.resolve(t.pos))}getBookmark(){return new nb(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!mU(e)||!gU(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&pt.valid(e))return e;let s=e.pos,a=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){a=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let f=e.doc.resolve(s);if(pt.valid(f))return f}for(;;){let l=t>0?a.firstChild:a.lastChild;if(!l){if(a.isAtom&&!a.isText&&!me.isSelectable(a)){e=e.doc.resolve(s+a.nodeSize*t),r=!1;continue e}break}a=l,s+=t;let u=e.doc.resolve(s);if(pt.valid(u))return u}return null}}}pt.prototype.visible=!1;pt.findFrom=pt.findGapCursorFrom;Ce.jsonID("gapcursor",pt);class nb{constructor(e){this.pos=e}map(e){return new nb(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return pt.valid(t)?new pt(t):Ce.near(t)}}function tk(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function mU(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||tk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function gU(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||tk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function yU(){return new lt({props:{decorations:wU,createSelectionBetween(n,e,t){return e.pos==t.pos&&pt.valid(t)?new pt(t):null},handleClick:vU,handleKeyDown:bU,handleDOMEvents:{beforeinput:SU}}})}const bU=WT({ArrowLeft:Tf("horiz",-1),ArrowRight:Tf("horiz",1),ArrowUp:Tf("vert",-1),ArrowDown:Tf("vert",1)});function Tf(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,a){let l=r.selection,u=e>0?l.$to:l.$from,f=l.empty;if(l instanceof Se){if(!a.endOfTextblock(t)||u.depth==0)return!1;f=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=pt.findGapCursorFrom(u,e,f);return h?(s&&s(r.tr.setSelection(new pt(h))),!0):!1}}function vU(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!pt.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&me.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new pt(r))),!0)}function SU(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof pt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=Y.empty;for(let l=r.length-1;l>=0;l--)s=Y.from(r[l].createAndFill(null,s));let a=n.state.tr.replace(t.pos,t.pos,new ne(s,0,0));return a.setSelection(Se.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function wU(n){if(!(n.selection instanceof pt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",at.create(n.doc,[rn.widget(n.selection.head,e,{key:"gapcursor"})])}var Od=200,It=function(){};It.prototype.append=function(e){return e.length?(e=It.from(e),!this.length&&e||e.length<Od&&this.leafAppend(e)||this.length<Od&&e.leafPrepend(this)||this.appendInner(e)):this};It.prototype.prepend=function(e){return e.length?It.from(e).append(this):this};It.prototype.appendInner=function(e){return new xU(this,e)};It.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?It.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};It.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};It.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};It.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,l){return s.push(e(a,l))},t,r),s};It.from=function(e){return e instanceof It?e:e&&e.length?new nk(e):It.empty};var nk=(function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new e(this.values.slice(s,a))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,a,l,u){for(var f=a;f<l;f++)if(s(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,a,l,u){for(var f=a-1;f>=l;f--)if(s(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Od)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Od)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(It);It.empty=new nk([]);var xU=(function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,a,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(a,u),l)===!1||a>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,a)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,a,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(a,u)-u,l+u)===!1||a<u&&this.left.forEachInvertedInner(r,Math.min(s,u),a,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(It);const EU=500;class dr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,a;t&&(s=this.remapping(r,this.items.length),a=s.maps.length);let l=e.tr,u,f,h=[],p=[];return this.items.forEach((g,b)=>{if(!g.step){s||(s=this.remapping(r,b+1),a=s.maps.length),a--,p.push(g);return}if(s){p.push(new _r(g.map));let v=g.step.map(s.slice(a)),S;v&&l.maybeStep(v).doc&&(S=l.mapping.maps[l.mapping.maps.length-1],h.push(new _r(S,void 0,void 0,h.length+p.length))),a--,S&&s.appendMap(S,a)}else l.maybeStep(g.step);if(g.selection)return u=s?g.selection.map(s.slice(a)):g.selection,f=new dr(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,t,r,s){let a=[],l=this.eventCount,u=this.items,f=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),b=new _r(e.mapping.maps[p],g,t),v;(v=f&&f.merge(b))&&(b=v,p?a.pop():u=u.slice(0,u.length-1)),a.push(b),t&&(l++,t=void 0),s||(f=b)}let h=l-r.depth;return h>_U&&(u=TU(u,h),l-=h),new dr(u.append(a),l)}remapping(e,t){let r=new mc;return this.items.forEach((s,a)=>{let l=s.mirrorOffset!=null&&a-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new dr(this.items.append(e.map(t=>new _r(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),a=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(b=>{b.selection&&u--},s);let f=t;this.items.forEach(b=>{let v=a.getMirror(--f);if(v==null)return;l=Math.min(l,v);let S=a.maps[v];if(b.step){let x=e.steps[v].invert(e.docs[v]),E=b.selection&&b.selection.map(a.slice(f+1,v));E&&u++,r.push(new _r(S,x,E))}else r.push(new _r(S))},s);let h=[];for(let b=t;b<l;b++)h.push(new _r(a.maps[b]));let p=this.items.slice(0,s).append(h).append(r),g=new dr(p,u);return g.emptyItemCount()>EU&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],a=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&a++;else if(l.step){let f=l.step.map(t.slice(r)),h=f&&f.getMap();if(r--,h&&t.appendMap(h,r),f){let p=l.selection&&l.selection.map(t.slice(r));p&&a++;let g=new _r(h.invert(),f,p),b,v=s.length-1;(b=s.length&&s[v].merge(g))?s[v]=b:s.push(g)}}else l.map&&r--},this.items.length,0),new dr(It.from(s.reverse()),a)}}dr.empty=new dr(It.empty,0);function TU(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class _r{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new _r(t.getMap().invert(),t,this.selection)}}}class Ki{constructor(e,t,r,s,a){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=a}}const _U=20;function kU(n,e,t,r){let s=t.getMeta(Xs),a;if(s)return s.historyState;t.getMeta(OU)&&(n=new Ki(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Xs))return l.getMeta(Xs).redo?new Ki(n.done.addTransform(t,void 0,r,Df(e)),n.undone,xE(t.mapping.maps),n.prevTime,n.prevComposition):new Ki(n.done,n.undone.addTransform(t,void 0,r,Df(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),f=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!AU(t,n.prevRanges)),h=l?cg(n.prevRanges,t.mapping):xE(t.mapping.maps);return new Ki(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,Df(e)),dr.empty,h,t.time,u??n.prevComposition)}else return(a=t.getMeta("rebased"))?new Ki(n.done.rebased(t,a),n.undone.rebased(t,a),cg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Ki(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),cg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function AU(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&s>=e[a]&&(t=!0)}),t}function xE(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,a,l)=>e.push(a,l));return e}function cg(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),a=e.map(n[r+1],-1);s<=a&&t.push(s,a)}return t}function CU(n,e,t){let r=Df(e),s=Xs.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,r);if(!a)return null;let l=a.selection.resolve(a.transform.doc),u=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),s,r),f=new Ki(t?u:a.remaining,t?a.remaining:u,null,0,-1);return a.transform.setSelection(l).setMeta(Xs,{redo:t,historyState:f})}let ug=!1,EE=null;function Df(n){let e=n.plugins;if(EE!=e){ug=!1,EE=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ug=!0;break}}return ug}const Xs=new Rt("history"),OU=new Rt("closeHistory");function MU(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new lt({key:Xs,state:{init(){return new Ki(dr.empty,dr.empty,null,0,-1)},apply(e,t,r){return kU(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?ik:r=="historyRedo"?sk:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function rk(n,e){return(t,r)=>{let s=Xs.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let a=CU(s,t,n);a&&r(e?a.scrollIntoView():a)}return!0}}const ik=rk(!1,!0),sk=rk(!0,!0);We.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new lt({key:new Rt("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const s=this.options.limit;if(s==null||s===0){n=!0;return}const a=this.storage.characters({node:r.doc});if(a>s){const l=a-s,u=0,f=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,f);return n=!0,h}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:t.doc}),a=this.storage.characters({node:e.doc});if(a<=r||s>r&&a>r&&a<=s)return!0;if(s>r&&a>r&&a>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,f=a-r,h=u-f,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var RU=We.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[hU(this.options)]}});We.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new lt({key:new Rt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:s}=e,a=[];if(!t||!r)return at.create(n,[]);let l=0;this.options.mode==="deepest"&&n.descendants((f,h)=>{if(f.isText)return;if(!(s>=h&&s<=h+f.nodeSize-1))return!1;l+=1});let u=0;return n.descendants((f,h)=>{if(f.isText||!(s>=h&&s<=h+f.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";a.push(rn.node(h,h+f.nodeSize,{class:this.options.className}))}),at.create(n,a)}}})]}});var NU=We.create({name:"gapCursor",addProseMirrorPlugins(){return[yU()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Fe(fe(n,"allowGapCursor",t)))!=null?e:null}}}),TE="placeholder";function DU(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}We.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:TE,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${DU(this.options.dataAttribute)}`:`data-${TE}`;return[new lt({key:new Rt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=t,a=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((u,f)=>{const h=s>=f&&s<=f+u.nodeSize,p=!u.isLeaf&&Jd(u);if((h||!this.options.showOnlyCurrent)&&p){const g=[this.options.emptyNodeClass];l&&g.push(this.options.emptyEditorClass);const b=rn.node(f,f+u.nodeSize,{class:g.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:f,hasAnchor:h}):this.options.placeholder});a.push(b)}return this.options.includeChildren}),at.create(e,a)}}})]}});We.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new lt({key:new Rt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||f_(t.selection)||n.view.dragging?null:at.create(t.doc,[rn.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function _E({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||(e==null?void 0:e.type)===n}var LU=We.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Rt(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(t).includes(s.name));return[new lt({key:e,appendTransaction:(s,a,l)=>{const{doc:u,tr:f,schema:h}=l,p=e.getState(l),g=u.content.size,b=h.nodes[t];if(p)return f.insert(g,b.create())},state:{init:(s,a)=>{const l=a.tr.doc.lastChild;return!_E({node:l,types:r})},apply:(s,a)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return a;const l=s.doc.lastChild;return!_E({node:l,types:r})}}})]}}),jU=We.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>ik(n,e),redo:()=>({state:n,dispatch:e})=>sk(n,e)}},addProseMirrorPlugins(){return[MU(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zU=We.create({name:"starterKit",addExtensions(){var n,e,t,r;const s=[];return this.options.bold!==!1&&s.push(o3.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(n3.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(V_.configure(this.options.bulletList)),this.options.code!==!1&&s.push(u3.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(h3.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(p3.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(RU.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(NU.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(m3.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(g3.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(jU.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(y3.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(x3.configure(this.options.italic)),this.options.listItem!==!1&&s.push(F_.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(X_.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&s.push(K3.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(Z_.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(oU.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(uU.configure(this.options.strike)),this.options.text!==!1&&s.push(fU.configure(this.options.text)),this.options.underline!==!1&&s.push(ek.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&s.push(LU.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),IU=zU,BU=We.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).some(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),UU=BU,PU=20,ak=(n,e=0)=>{const t=[];return!n.children.length||e>PU||Array.from(n.children).forEach(r=>{r.tagName==="SPAN"?t.push(r):r.children.length&&t.push(...ak(r,e+1))}),t},HU=n=>{if(!n.children.length)return;const e=ak(n);e&&e.forEach(t=>{var r,s;const a=t.getAttribute("style"),l=(s=(r=t.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");t.setAttribute("style",`${l};${a}`)})},ok=ds.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&HU(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",bt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:e})=>e.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(a=>!!a))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),$U=We.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const a=r[s].split(":");if(a.length>=2){const l=a[0].trim().toLowerCase(),u=a.slice(1).join(":").trim();if(l==="background-color")return u.replace(/['"]+/g,"")}}}return(e=n.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:e})=>e().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),qU=We.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const a=r[s].split(":");if(a.length>=2){const l=a[0].trim().toLowerCase(),u=a.slice(1).join(":").trim();if(l==="color")return u.replace(/['"]+/g,"")}}}return(e=n.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),VU=We.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),lk=We.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),ck=We.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:e})=>e().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});We.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push($U.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(qU.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(VU.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(lk.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(ck.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push(ok.configure(this.options.textStyle)),n}});const FU=["14","16","18","20","24"],GU=["1.2","1.4","1.5","1.75","2"];function KU(n){return bn.useMemo(()=>[IU.configure({blockquote:{},bold:{},heading:{levels:[1,2,3]},italic:{},paragraph:{},underline:{},link:{openOnClick:!1,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer"}},strike:!1,code:!1,codeBlock:!1,bulletList:!1,orderedList:!1,listItem:!1,listKeymap:!1,horizontalRule:!1}),UU.configure({types:["heading","paragraph","blockquote"]}),ok,lk,ck,dU],[])}const rb=({value:n,onChange:e,placeholder:t="Write something",className:r="",minHeight:s="12rem"})=>{const a=n!=null&&n.trim()?n.includes("<")?n:gg(n):"",l=KU(),u=XB({extensions:l,content:a,editorProps:{attributes:{class:"prose prose-sm max-w-none font-sans text-textPrimary focus:outline-none min-h-[8rem]"},handleDOMEvents:{blur:()=>{u&&e(u.getHTML())}}},onUpdate:({editor:h})=>{e(h.getHTML())}},[l]);D.useEffect(()=>{if(!u)return;const h=u.getHTML(),p=n!=null&&n.trim()?n.includes("<")?n:gg(n):"<p></p>";h!==p&&document.activeElement!==u.view.dom&&u.commands.setContent(p,!1)},[u,n]);const f=D.useCallback(()=>{if(!u)return;const h=window.prompt("URL:",u.getAttributes("link").href||"https://");h!=null&&(h===""?u.chain().focus().extendMarkRange("link").unsetLink().run():u.chain().focus().extendMarkRange("link").setLink({href:h}).run())},[u]);return u?k.jsxs("div",{className:`border border-paletteBorder rounded-sm overflow-hidden bg-bgMain ${r}`,children:[k.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-paletteBorder bg-neutral-100 font-mono text-xs",children:[k.jsxs("select",{className:"border border-paletteBorder bg-bgMain text-textPrimary px-2 py-1.5 rounded-sm uppercase tracking-wider",value:u.isActive("heading",{level:1})?"h1":u.isActive("heading",{level:2})?"h2":u.isActive("heading",{level:3})?"h3":u.isActive("blockquote")?"blockquote":"p",onChange:h=>{const p=h.target.value;p==="p"?u.chain().focus().setParagraph().run():p==="h1"?u.chain().focus().toggleHeading({level:1}).run():p==="h2"?u.chain().focus().toggleHeading({level:2}).run():p==="h3"?u.chain().focus().toggleHeading({level:3}).run():p==="blockquote"&&u.chain().focus().toggleBlockquote().run()},children:[k.jsx("option",{value:"p",children:"Paragraph"}),k.jsx("option",{value:"h1",children:"Heading 1"}),k.jsx("option",{value:"h2",children:"Heading 2"}),k.jsx("option",{value:"h3",children:"Heading 3"}),k.jsx("option",{value:"blockquote",children:"Blockquote"})]}),k.jsx("span",{className:"text-textSecondary mx-1",children:"|"}),k.jsxs("select",{className:"border border-paletteBorder bg-bgMain text-textPrimary px-2 py-1.5 rounded-sm w-12",onChange:h=>{const p=h.target.value;p?u.chain().focus().setFontSize(p+"px").run():u.chain().focus().unsetFontSize().run()},children:[k.jsx("option",{value:"",children:""}),FU.map(h=>k.jsx("option",{value:h,children:h},h))]}),k.jsxs("select",{className:"border border-paletteBorder bg-bgMain text-textPrimary px-2 py-1.5 rounded-sm w-12",onChange:h=>{const p=h.target.value;p?u.chain().focus().setLineHeight(p).run():u.chain().focus().unsetLineHeight().run()},children:[k.jsx("option",{value:"",children:""}),GU.map(h=>k.jsx("option",{value:h,children:h},h))]}),k.jsx("span",{className:"text-textSecondary mx-1",children:"|"}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().toggleBold().run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder font-bold ${u.isActive("bold")?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Bold",children:"B"}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().toggleItalic().run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder italic ${u.isActive("italic")?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Italic",children:"I"}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().toggleUnderline().run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder underline ${u.isActive("underline")?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Underline",children:"U"}),k.jsx("span",{className:"text-textSecondary mx-1",children:"|"}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().setTextAlign("left").run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder ${u.isActive({textAlign:"left"})?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Align left",children:""}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().setTextAlign("center").run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder ${u.isActive({textAlign:"center"})?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Align center",children:""}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().setTextAlign("right").run(),className:`px-2 py-1.5 rounded-sm border border-paletteBorder ${u.isActive({textAlign:"right"})?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Align right",children:""}),k.jsx("span",{className:"text-textSecondary mx-1",children:"|"}),k.jsx("button",{type:"button",onClick:f,className:`px-2 py-1.5 rounded-sm border border-paletteBorder ${u.isActive("link")?"bg-neutral-300":"bg-bgMain text-textPrimary"}`,title:"Link",children:""}),k.jsx("button",{type:"button",onClick:()=>u.chain().focus().unsetLink().run(),className:"px-2 py-1.5 rounded-sm border border-paletteBorder bg-bgMain text-textPrimary",title:"Unlink",children:"Unlink"}),k.jsx("span",{className:"text-textSecondary mx-1",children:"|"}),k.jsx("button",{type:"button",onClick:()=>{u.chain().focus().unsetAllMarks().run(),u.chain().focus().clearNodes().run()},className:"px-2 py-1.5 rounded-sm border border-paletteBorder bg-bgMain text-textPrimary",title:"Clear formatting",children:"Clear"})]}),k.jsx(M_,{editor:u,style:{minHeight:s},className:"p-3 text-base leading-relaxed [&_.ProseMirror]:min-h-[8rem] [&_.ProseMirror]:outline-none [&_.ProseMirror_p]:mb-4 [&_.ProseMirror_p:last-child]:mb-0 [&_.ProseMirror_h1]:text-2xl [&_.ProseMirror_h1]:font-bold [&_.ProseMirror_h2]:text-xl [&_.ProseMirror_h2]:font-bold [&_.ProseMirror_h3]:text-lg [&_.ProseMirror_h3]:font-bold [&_.ProseMirror_blockquote]:border-l-2 [&_.ProseMirror_blockquote]:border-paletteBorder [&_.ProseMirror_blockquote]:pl-4 [&_.ProseMirror_blockquote]:italic [&_.ProseMirror_a]:underline"})]}):k.jsx("div",{className:`border border-paletteBorder rounded-sm overflow-hidden bg-bgMain ${r}`,style:{minHeight:s},children:k.jsx("div",{className:"p-3 text-textSecondary font-mono text-sm",children:"Loading editor"})})},JU=({data:n,onRefresh:e})=>{const{isAdmin:t}=sa(),r=ia(),[s,a]=D.useState(""),[l,u]=D.useState(new Date().getFullYear().toString()),[f,h]=D.useState(""),[p,g]=D.useState(""),[b,v]=D.useState([]),[S,x]=D.useState(!1);bn.useEffect(()=>{t||r("/")},[t,r]);const E=D.useCallback(async j=>{var W;const P=(W=j.target.files)==null?void 0:W[0];if(!P)return;j.target.value="";const U=await new Promise(de=>{const oe=new FileReader;oe.onloadend=()=>de(oe.result),oe.readAsDataURL(P)}),F=await oo(U);g(F)},[]),_=async j=>{const P=j.target.files;if(!(P!=null&&P.length))return;x(!0);const U=[];for(let F=0;F<P.length;F++){const W=await new Promise(de=>{const oe=new FileReader;oe.onloadend=()=>de(oe.result),oe.readAsDataURL(P[F])});U.push(await oo(W))}v(F=>F.length?[...F,...U]:U),!p&&U[0]&&g(U[0]),x(!1)},C=j=>{const P=b.filter((U,F)=>F!==j);v(P),p&&b[j]===p&&g(P[0]??"")},O=j=>{const P=b[j];P&&g(P)},B=async j=>{if(j.preventDefault(),!s.trim()){alert("Please provide a project title.");return}if(b.length===0){alert("Please provide at least one image.");return}try{const P=Date.now().toString(),U=p||b[0]||"",F=U?await Rg(U).catch(()=>{}):void 0;await jD({id:P,title:s.trim(),year:l.trim(),description:f.trim()||"",imageUrl:U,gallery:b,galleryColumns:1,coverAspectRatio:F}),await Promise.resolve(e()),r(`/project/${P}`)}catch(P){console.error(P),P instanceof DOMException&&P.name==="QuotaExceededError"?alert("Storage limit reached (browser limit). Try fewer images, smaller file sizes, or remove images from other projects."):alert("Failed to create project.")}};return t?k.jsx("div",{className:"fixed inset-0 bg-bgMain flex flex-col overflow-hidden",children:k.jsxs("main",{className:"flex-1 min-h-0 flex",children:[k.jsx("div",{className:"w-2/5 min-w-0 overflow-y-auto pt-pageTop pl-6 pr-6 pb-12",children:k.jsxs("div",{className:"max-w-xl",children:[k.jsx("h1",{className:"font-mono text-sm uppercase tracking-wider text-textPrimary mb-6",children:"New project"}),k.jsxs("form",{onSubmit:B,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Title"}),k.jsx("input",{type:"text",className:"w-full p-3 border border-paletteBorder bg-transparent font-mono text-sm placeholder:text-textSecondary text-textPrimary focus:outline-none",value:s,onChange:j=>a(j.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Year"}),k.jsx("input",{type:"text",className:"w-full p-3 border border-paletteBorder bg-transparent font-mono text-sm placeholder:text-textSecondary text-textPrimary focus:outline-none",value:l,onChange:j=>u(j.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Description"}),k.jsx(rb,{value:f,onChange:h,placeholder:"Project description",minHeight:"10rem"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Cover"}),k.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm font-mono file:mr-4 file:py-2 file:px-4 file:border file:border-paletteBorder file:bg-bgMain file:font-mono file:text-xs file:uppercase file:tracking-wider file:text-textPrimary file:hover:bg-neutral-800 file:hover:text-white file:transition-colors file:duration-150 file:rounded-sm",onChange:E})]}),k.jsx("button",{type:"submit",disabled:S,className:"font-mono text-sm uppercase tracking-wider px-6 py-3 bg-accent text-textPrimary hover:opacity-90 disabled:opacity-50 transition-opacity duration-150 rounded-sm",children:S?"Processing":"Create project"})]})]})}),k.jsx("div",{className:"w-px shrink-0 bg-paletteBorder","aria-hidden":!0}),k.jsx("div",{className:"w-3/5 min-w-0 overflow-y-auto pt-pageTop px-6 pb-12",children:k.jsxs("div",{className:"space-y-4",children:[p&&k.jsxs("div",{children:[k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Cover preview"}),k.jsx("img",{src:p,alt:"Cover",className:"max-h-64 w-auto border border-paletteBorder"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Gallery"}),k.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"block w-full text-sm font-mono file:mr-4 file:py-2 file:px-4 file:border file:border-paletteBorder file:bg-bgMain file:font-mono file:text-xs file:uppercase file:tracking-wider file:text-textPrimary file:hover:bg-neutral-800 file:hover:text-white file:transition-colors file:duration-150 file:rounded-sm",onChange:_})]}),b.length>0&&k.jsx("div",{className:"flex flex-wrap gap-4",children:b.map((j,P)=>k.jsxs("div",{className:"relative group",children:[k.jsx("img",{src:j,alt:"",className:"h-20 w-auto border border-paletteBorder"}),k.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-1 bg-neutral-800/50 opacity-0 group-hover:opacity-100 transition-opacity duration-150",children:[k.jsx("button",{type:"button",onClick:()=>C(P),className:"font-mono text-xs uppercase tracking-wider px-2 py-1 border border-destructive bg-bgMain text-destructive hover:bg-destructive hover:text-white transition-colors duration-150 rounded-sm",children:"Remove"}),k.jsx("button",{type:"button",onClick:()=>O(P),className:"font-mono text-xs uppercase tracking-wider px-2 py-1 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Set as cover"})]})]},P))})]})})]})}):null},WU=({children:n})=>k.jsx("div",{className:"fixed inset-0 bg-bgMain flex flex-col overflow-hidden",children:n}),YU=({src:n,alt:e,className:t})=>{const r="bg-bgMain";return n?k.jsxs("div",{className:`relative w-full h-full overflow-hidden ${r}`,children:[k.jsx("img",{src:n,alt:e,className:t?`${t} w-full h-full object-contain`:"w-full h-full object-contain",onContextMenu:s=>s.preventDefault(),onDragStart:s=>s.preventDefault(),style:{pointerEvents:"none"}}),k.jsx("div",{className:"absolute inset-0 z-10 bg-transparent",onContextMenu:s=>s.preventDefault()})]}):k.jsx("div",{className:`w-full aspect-[4/5] border border-dashed border-paletteBorder ${r}`,"aria-hidden":!0})},XU=({project:n,onRefresh:e})=>{const t=cs(),{isAdmin:r}=sa(),s=ia(),a=r&&!t,[l,u]=D.useState(!1),[f,h]=D.useState(n),[p,g]=D.useState(!1),[b,v]=D.useState(!1),S=l?f:n,x=D.useCallback(async F=>{var te;const W=(te=F.target.files)==null?void 0:te[0];if(!W)return;F.target.value="";const de=await new Promise(he=>{const Te=new FileReader;Te.onloadend=()=>he(Te.result),Te.readAsDataURL(W)}),oe=await oo(de),ke=await Rg(oe).catch(()=>{});h(he=>({...he,imageUrl:oe,coverAspectRatio:ke}))},[]),E=D.useCallback(F=>{const W=f.gallery[F];W&&Rg(W).then(de=>{h(oe=>({...oe,imageUrl:W,coverAspectRatio:de}))}).catch(()=>{h(de=>({...de,imageUrl:W}))})},[f.gallery]),_=async F=>{const W=F.target.files;if(!(W!=null&&W.length))return;v(!0);const de=[];for(let oe=0;oe<W.length;oe++){const ke=await new Promise(te=>{const he=new FileReader;he.onloadend=()=>te(he.result),he.readAsDataURL(W[oe])});de.push(await oo(ke))}h(oe=>({...oe,gallery:[...oe.gallery,...de],imageUrl:oe.imageUrl||de[0]})),v(!1)},C=F=>{if(f.gallery.length<=1)return;const W=f.gallery.filter((de,oe)=>oe!==F);h(de=>({...de,gallery:W,imageUrl:W[0]??de.imageUrl}))},O=async(F,W)=>{var he;const de=(he=W.target.files)==null?void 0:he[0];if(!de)return;W.target.value="",v(!0);const oe=await new Promise(Te=>{const q=new FileReader;q.onloadend=()=>Te(q.result),q.readAsDataURL(de)}),ke=await oo(oe),te=[...f.gallery];te[F]=ke,h(Te=>({...Te,gallery:te,imageUrl:F===0?ke:Te.imageUrl})),v(!1)},B=async()=>{var F;if(!((F=f.title)!=null&&F.trim())){alert("Please provide a project title.");return}if(f.gallery.length===0){alert("Please provide at least one image.");return}try{g(!0);const W=await Promise.all(f.gallery.map(ke=>oo(ke))),de=f.gallery.findIndex(ke=>ke===f.imageUrl),oe={...f,gallery:W,imageUrl:de>=0?W[de]:W[0]};await zD(oe.id,oe),e(),u(!1)}catch(W){console.error(W),W instanceof DOMException&&W.name==="QuotaExceededError"?alert("Storage limit reached (browser limit). Try fewer images, smaller file sizes, or remove images from other projects."):alert("Failed to update project.")}finally{g(!1)}},j=async()=>{confirm("Delete this project?")&&(await ID(n.id),e(),s("/"))},P=k.jsx("div",{className:t?"w-full min-w-0 overflow-y-auto pt-6 px-6 pb-12":"w-2/5 min-w-0 overflow-y-auto pt-pageTop px-6 pb-12",children:k.jsx("div",{className:"max-w-xl",children:!t&&l?k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Title"}),k.jsx("input",{type:"text",className:"w-full p-3 border border-paletteBorder bg-transparent font-mono text-sm focus:outline-none",value:f.title,onChange:F=>h(W=>({...W,title:F.target.value}))})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Year"}),k.jsx("input",{type:"text",className:"w-full p-3 border border-paletteBorder bg-transparent font-mono text-sm focus:outline-none",value:f.year,onChange:F=>h(W=>({...W,year:F.target.value}))})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Description"}),k.jsx(rb,{value:f.description,onChange:F=>h(W=>({...W,description:F})),placeholder:"Project description",minHeight:"10rem"})]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{type:"button",onClick:B,disabled:p,className:"font-mono text-sm uppercase tracking-wider px-4 py-2 bg-accent text-textPrimary hover:opacity-90 disabled:opacity-50 transition-opacity duration-150 rounded-sm",children:p?"Saving":"Save"}),k.jsx("button",{type:"button",onClick:()=>{u(!1),h(n)},className:"font-mono text-sm uppercase tracking-wider px-4 py-2 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Cancel"})]})]}):k.jsxs(k.Fragment,{children:[k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textSecondary mb-2",children:S.year}),k.jsx("h1",{className:"text-3xl font-bold mb-6",children:S.title}),k.jsx("div",{className:"text-base leading-relaxed text-textPrimary [&_p]:mb-8 [&_p:last-child]:mb-0",children:k.jsx(py,{html:S.description})}),a&&k.jsxs("div",{className:"flex gap-2 mt-6",children:[k.jsx("button",{type:"button",onClick:()=>{h(n),u(!0)},className:"font-mono text-xs uppercase tracking-wider px-3 py-2 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Edit"}),k.jsx("button",{type:"button",onClick:j,className:"font-mono text-xs uppercase tracking-wider px-3 py-2 border border-destructive bg-bgMain text-destructive hover:bg-destructive hover:text-white transition-colors duration-150 rounded-sm",children:"Delete"})]})]})})}),U=k.jsx("div",{className:t?"w-full min-w-0 overflow-y-auto pt-6 px-6 pb-6":"w-3/5 min-w-0 overflow-y-auto pt-6 px-6 pb-12",children:!t&&l?k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Cover"}),S.imageUrl?k.jsx("img",{src:S.imageUrl,alt:"Cover",className:"max-h-64 w-auto border border-paletteBorder"}):k.jsx("div",{className:"max-h-64 h-64 border border-paletteBorder flex items-center justify-center font-mono text-xs text-textSecondary",children:"No cover"}),k.jsx("div",{className:"mt-2 flex gap-2",children:k.jsxs("label",{className:"font-mono text-xs uppercase tracking-wider px-3 py-2 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 cursor-pointer rounded-sm",children:["Change cover",k.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:x})]})})]}),k.jsxs("div",{children:[k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Gallery layout"}),k.jsxs("div",{className:"flex gap-4 mb-2",children:[k.jsxs("label",{className:"flex items-center gap-2 font-mono text-sm cursor-pointer",children:[k.jsx("input",{type:"radio",name:"galleryColumns",checked:(f.galleryColumns??1)===1,onChange:()=>h(F=>({...F,galleryColumns:1})),className:"border border-paletteBorder"}),"One column"]}),k.jsxs("label",{className:"flex items-center gap-2 font-mono text-sm cursor-pointer",children:[k.jsx("input",{type:"radio",name:"galleryColumns",checked:f.galleryColumns===2,onChange:()=>h(F=>({...F,galleryColumns:2})),className:"border border-paletteBorder"}),"Two columns"]})]}),k.jsx("p",{className:"font-mono text-xs uppercase tracking-wider text-textPrimary mb-2",children:"Gallery"}),k.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"block w-full text-sm font-mono file:mr-4 file:py-2 file:px-4 file:border file:border-paletteBorder file:bg-bgMain file:font-mono file:text-xs file:uppercase file:tracking-wider file:text-textPrimary file:hover:bg-neutral-800 file:hover:text-white file:transition-colors file:duration-150 file:rounded-sm mb-2",onChange:_}),k.jsx("div",{className:"flex flex-wrap gap-4",children:S.gallery.map((F,W)=>k.jsxs("div",{className:"flex flex-col",children:[k.jsx("img",{src:F,alt:"",className:"h-20 w-auto border border-paletteBorder"}),k.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[k.jsx("button",{type:"button",onClick:()=>E(W),className:"font-mono text-xs uppercase tracking-wider px-2 py-1 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Set as cover"}),k.jsxs("label",{className:"font-mono text-xs uppercase tracking-wider px-2 py-1 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white cursor-pointer transition-colors duration-150 rounded-sm",children:["Replace",k.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:de=>O(W,de)})]}),k.jsx("button",{type:"button",onClick:()=>C(W),disabled:S.gallery.length<=1,className:"font-mono text-xs uppercase tracking-wider px-2 py-1 border border-destructive bg-bgMain text-destructive hover:bg-destructive hover:text-white disabled:opacity-50 transition-colors duration-150 rounded-sm",children:"Remove"})]})]},W))})]})]}):k.jsx(k.Fragment,{children:S.gallery&&S.gallery.length>0?k.jsx("div",{className:`grid gap-0 max-w-4xl ${S.galleryColumns===2?"grid-cols-1 sm:grid-cols-2":"grid-cols-1"}`,children:S.gallery.map((F,W)=>k.jsx("div",{children:k.jsx(YU,{src:F,alt:`${S.title} ${W+1}`})},W))}):null})});return k.jsx(WU,{children:k.jsx("main",{className:`flex-1 min-h-0 flex overflow-hidden ${t?"flex-col pt-12":""}`,children:t?k.jsxs(k.Fragment,{children:[U,P]}):k.jsxs(k.Fragment,{children:[P,k.jsx("div",{className:"w-px shrink-0 bg-paletteBorder","aria-hidden":!0}),U]})})})},QU=()=>cs()?null:k.jsx(is,{to:"/",className:"fixed top-0 left-0 z-[100] h-12 flex items-center font-mono text-base uppercase tracking-wider text-textPrimary px-6 rounded-sm transition-opacity duration-150 hover:opacity-90",style:{backgroundColor:Nd.accent},children:"Home"}),ZU=()=>{const n=cs(),{isAdmin:e,logout:t}=sa(),r=ia();return n||!e?null:k.jsxs("div",{className:"fixed bottom-0 left-0 z-[99] pl-6 pb-6 flex gap-2",children:[k.jsx(is,{to:"/project/new",className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-3 py-2 bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Add project"}),k.jsx(is,{to:"/admin/deployment",className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-3 py-2 bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Domain setup"}),k.jsx("button",{type:"button",onClick:()=>{t(),r("/")},className:"font-mono text-xs uppercase tracking-wider border border-paletteBorder px-3 py-2 bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Logout"})]})},ib=({children:n})=>k.jsx("div",{className:"fixed inset-0 bg-bgMain flex flex-col overflow-hidden",children:n}),eP=({data:n,onRefresh:e})=>{const{id:t}=fO(),r=n.projects.find(s=>s.id===t);return r?k.jsx(XU,{project:r,onRefresh:e}):k.jsx(ib,{children:k.jsx("main",{className:"pt-pageTop px-6 pb-12",children:k.jsx("p",{children:"Project not found."})})})},tP=({data:n,onRefresh:e})=>{const t=cs(),{isAdmin:r}=sa(),[s,a]=bn.useState(!1),[l,u]=bn.useState(n.aboutMe);bn.useEffect(()=>{u(n.aboutMe)},[n.aboutMe]);const f=async()=>{await LD(l),e(),a(!1)},h=r&&!t;return k.jsx(ib,{children:k.jsxs("main",{className:`flex-1 min-h-0 flex overflow-hidden ${t?"flex-col":""}`,children:[k.jsx("div",{className:t?"w-full min-w-0 overflow-y-auto pt-pageTop px-6 pb-12":`w-2/5 min-w-0 overflow-y-auto pt-pageTop px-6 ${r?"pb-24":"pb-12"}`,children:k.jsxs("div",{className:"max-w-xl",children:[h&&k.jsx("div",{className:"mb-6",children:s?k.jsxs("div",{className:"space-y-4",children:[k.jsx(rb,{value:l,onChange:u,placeholder:"About me",minHeight:"14rem"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{type:"button",onClick:f,className:"font-mono text-sm uppercase tracking-wider px-4 py-2 bg-accent text-textPrimary hover:opacity-90 transition-opacity duration-150 rounded-sm",children:"Save"}),k.jsx("button",{type:"button",onClick:()=>{a(!1),u(n.aboutMe)},className:"font-mono text-sm uppercase tracking-wider px-4 py-2 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Cancel"})]})]}):k.jsx("button",{type:"button",onClick:()=>a(!0),className:"font-mono text-xs uppercase tracking-wider px-3 py-2 border border-paletteBorder bg-bgMain text-textPrimary hover:bg-neutral-800 hover:text-white transition-colors duration-150 rounded-sm",children:"Edit biography"})}),!s&&k.jsxs(k.Fragment,{children:[k.jsx("h1",{className:"text-3xl font-bold mb-8 text-textPrimary",children:"About me"}),k.jsx("div",{className:"space-y-6 text-base leading-relaxed text-textPrimary",children:k.jsx(py,{html:n.aboutMe})})]})]})}),!t&&k.jsx("div",{className:"w-px shrink-0 bg-paletteBorder","aria-hidden":!0}),k.jsx("div",{className:t?"w-full min-w-0 overflow-y-auto pt-6 px-6 pb-12 flex items-center justify-center text-textSecondary":"w-3/5 min-w-0 overflow-y-auto pt-pageTop px-6 pb-12 flex items-center justify-center text-textSecondary",children:null})]})})},nP=()=>{const n=cs();return k.jsx(ib,{children:k.jsxs("main",{className:`flex-1 min-h-0 flex overflow-hidden ${n?"flex-col":""}`,children:[k.jsx("div",{className:n?"w-full min-w-0 overflow-y-auto pt-pageTop px-6 pb-12":"w-2/5 min-w-0 overflow-y-auto pt-pageTop px-6 pb-12",children:k.jsxs("div",{className:"max-w-xl",children:[k.jsx("h1",{className:"text-3xl font-bold mb-8 text-textPrimary",children:"Contact"}),k.jsx("p",{className:"mb-4",children:k.jsx("a",{href:"mailto:sphnsx@aol.com",className:"underline font-medium transition-colors duration-150 hover:opacity-80",children:"sphnsx@aol.com"})}),k.jsx("p",{children:k.jsx("a",{href:"https://www.instagram.com/sphnsx/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium transition-colors duration-150 hover:opacity-80",children:"Instagram"})})]})}),!n&&k.jsx("div",{className:"w-px shrink-0 bg-paletteBorder","aria-hidden":!0}),k.jsx("div",{className:n?"w-full min-w-0 overflow-y-auto pt-6 px-6 pb-12 flex items-center justify-center text-textSecondary":"w-3/5 min-w-0 overflow-y-auto pt-pageTop px-6 pb-12 flex items-center justify-center text-textSecondary",children:null})]})})},rP=()=>k.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center p-8 text-center",children:[k.jsx("h1",{className:"text-3xl font-bold mb-4 text-textPrimary",children:"404"}),k.jsx("p",{className:"text-base text-textSecondary mb-6 leading-relaxed",children:"Page not found."}),k.jsx(is,{to:"/",className:"text-sm underline transition-colors duration-150 hover:opacity-80",children:"Go home"})]}),iP=()=>(typeof import.meta<"u"&&"/"||"/").replace(/\/$/,"")||"",sP=()=>{const n=Or();return D.useEffect(()=>{const e=window.location.pathname,t=window.location.hash;if(t&&t!=="#")return;const r=iP(),s=e===r||e===r+"/"?"/":e.startsWith(r+"/")?e.slice(r.length)||"/":e.startsWith("/")?e:"/"+e,a="#"+(s.startsWith("/")?s:"/"+s);window.location.hash=a;const l=s==="/admin"||s.startsWith("/admin/")?"/"+a:r?r+a:"/"+a;window.location.pathname+window.location.hash!==l&&window.history.replaceState(void 0,"",window.location.origin+l)},[n.pathname]),null},aP=()=>{const n=cs(),e=Or(),t=ia();return D.useEffect(()=>{if(!n)return;const r=e.pathname;(r==="/project/new"||r==="/admin/deployment")&&t("/")},[n,e.pathname,t]),null},oP=({children:n})=>{const{isAdmin:e}=sa(),t=ia();return D.useEffect(()=>{e||t("/admin")},[e,t]),e?k.jsx(k.Fragment,{children:n}):null},lP=()=>{const n=cs(),[e,t]=D.useState(DD()),r=()=>ss().then(t);return D.useEffect(()=>{ss().then(t)},[]),k.jsx(YO,{children:k.jsxs(GM,{children:[k.jsx(sP,{}),k.jsx(aP,{}),k.jsxs("div",{className:"min-h-screen bg-bgMain text-textPrimary font-sans",children:[n&&k.jsx(VD,{}),k.jsx(QU,{}),k.jsx(ZU,{}),k.jsxs(kO,{children:[k.jsx(wr,{path:"/",element:k.jsx($D,{data:e,onRefresh:r})}),k.jsx(wr,{path:"/project/new",element:k.jsx(JU,{data:e,onRefresh:r})}),k.jsx(wr,{path:"/project/:id",element:k.jsx(eP,{data:e,onRefresh:r})}),k.jsx(wr,{path:"/about",element:k.jsx(tP,{data:e,onRefresh:r})}),k.jsx(wr,{path:"/contact",element:k.jsx(nP,{})}),k.jsx(wr,{path:"/admin",element:k.jsx(Fw,{})}),k.jsx(wr,{path:"/a",element:k.jsx(Fw,{})}),k.jsx(wr,{path:"/admin/deployment",element:k.jsx(oP,{children:k.jsx(FD,{})})}),k.jsx(wr,{path:"*",element:k.jsx(rP,{})})]})]})]})})},kE=window.location.pathname.replace(/\/$/,"")||"/";(kE==="/admin"||kE==="/a")&&(window.location.hash="#/admin");const uk=document.getElementById("root");if(!uk)throw new Error("Could not find root element to mount to");const cP=CC.createRoot(uk);cP.render(k.jsx(bn.StrictMode,{children:k.jsx(lP,{})}));
